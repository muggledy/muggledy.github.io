<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><script>function randomNum(e,a){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(a-e+1)+e,10);default:return 0}}(async()=>{document.querySelector.bind(document);"serviceWorker"in navigator?(Number(window.localStorage.getItem("MuggledyBlogHelper_Set"))<=1&&(window.localStorage.setItem("MuggledyBlogHelper_Set",1),window.stop(),document.documentElement.appendChild(document.createElement("body")),document.body.innerHTML='<style>@keyframes rotate-fully{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes delayed-appearence{0%{opacity:0}50%{opacity:.9}100%{opacity:1}}.fxs-splashscreen{position:fixed;top:0;right:0;bottom:0;left:0;z-index:8;background-color:#fff;display:flex;flex-flow:column nowrap;align-items:center;-webkit-app-region:drag}.fxs-splashscreen>div{display:flex;justify-content:center}.fxs-splashscreen-outer-ring{height:60px}.fxs-splashscreen-mid-ring{flex-grow:1}.fxs-splashscreen-inner-ring{height:50px}.fxs-splashscreen-logo{height:180px}.fxs-splashscreen-logo>svg{width:150px;height:150px}.fxs-splashscreen-loader-container{animation:delayed-appearence .5s .7s linear 1 forwards;opacity:0}.fxs-fabric-loading-spinner{box-sizing:border-box;width:50px;height:50px;border-radius:50%;border-width:3px;border-style:solid;border-color:#0078d4 #c7e0f4 #c7e0f4;border-image:initial;animation:rotate-fully 1.3s cubic-bezier(.53,.21,.29,.67) infinite}.fxs-msftlogo>svg{margin-bottom:36px;width:99px;height:22px}@media(prefers-color-scheme:dark){.fxs-splashscreen{background-color:#333}}@media screen and (-ms-high-contrast:active){.fxs-splashscreen{-ms-high-contrast-adjust:auto;background-color:window}.fxs-splashscreen-loader-container>div::after{border-color:windowText;background:windowText}}.fxs-extension-frame{position:absolute;left:10px;top:10px;border:0;height:1px;width:1px;display:none}@font-face{font-family:az_ea_font;src:local("Microsoft Yahei UI"),local("Microsoft Yahei"),local("Simsun"),local("Segoe UI"),local("Segoe UI Symbol"),system-ui,-apple-system,blinkmacsystemfont,local("Roboto"),local("Oxygen"),local("Ubuntu"),local("Cantarell"),local("Open Sans"),local("Helvetica Neue"),sans-serif}.weave-display-none1,.weave-display-none2{display:none!important}</style><div id="web-container"></div><div class="fxs-splashscreen"><div class="fxs-splashscreen-outer-ring"></div><div class="fxs-splashscreen-mid-ring"></div><div class="fxs-splashscreen-inner-ring"></div><div class="fxs-splashscreen-logo"><svg t="1651471112447" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1313" width="150" height="150"><path d="M331.847372 1007.871774L429.243621 539.355352H166.632786a17.780942 17.780942 0 0 1-16.584147-24.220834L332.075333 44.68043A52.089041 52.089041 0 0 1 380.687972 11.398154h287.857492a22.796079 22.796079 0 0 1 21.314335 31.116648L584.940843 312.192421l281.47459 1.310775a8.776491 8.776491 0 0 1 6.895814 14.190559l-534.568061 683.42646a3.932324 3.932324 0 0 1-6.895814-3.248441z" fill="#FFF100" p-id="1314"></path><path d="M166.632786 539.355352h35.447904L395.049502 11.398154h-14.36153a52.089041 52.089041 0 0 0-48.612639 33.282276L150.048639 515.134518a17.780942 17.780942 0 0 0 16.584147 24.220834z" fill="#FFFFFF" p-id="1315"></path><path d="M868.638051 310.938637h-43.255561L350.711127 925.406957l-16.641137 79.786278a3.932324 3.932324 0 0 0 6.952804 3.191451l534.511071-683.25549a8.776491 8.776491 0 0 0-6.895814-14.190559z" fill="#F8B62D" p-id="1316"></path><path d="M275.256105 202.999201a11.39804 11.39804 0 0 1-10.657167-15.558324l21.428314-55.394473a11.39804 11.39804 0 0 1 21.257344 8.206588L285.628321 195.704456a11.39804 11.39804 0 0 1-10.372216 7.294745zM335.722705 1024a15.558324 15.558324 0 0 1-6.496882-1.424755 15.330363 15.330363 0 0 1-8.54853-17.09706l94.546739-454.724793H166.632786a29.178982 29.178982 0 0 1-27.184324-39.893139l99.732847-257.880648a11.39804 11.39804 0 1 1 21.257344 8.206589L160.705806 519.237812a6.382902 6.382902 0 0 0 5.69902 8.719501h276.858384l-93.748877 450.84946 69.129111-88.334808a11.39804 11.39804 0 1 1 17.951913 14.019589L347.747637 1018.13001a15.216383 15.216383 0 0 1-12.024932 5.86999z" fill="#231815" p-id="1317"></path><path d="M482.016545 839.351757a11.39804 11.39804 0 0 1-9.004452-18.407834L861.229325 324.844245l-292.92962-1.367765 110.902926-284.950992a11.39804 11.39804 0 0 0-1.196794-10.600177 11.39804 11.39804 0 0 0-9.460373-5.129118H380.687972A40.975953 40.975953 0 0 0 342.618519 48.840714l-15.387353 39.893139a11.39804 11.39804 0 1 1-21.257344-8.206589l15.387353-39.893139A63.943003 63.943003 0 0 1 380.687972 0.000114h287.857492a34.194119 34.194119 0 0 1 31.914511 46.674973l-98.877994 254.176285 264.890443 1.253784a20.23152 20.23152 0 0 1 15.843275 32.598394L490.793035 834.963512a11.39804 11.39804 0 0 1-8.77649 4.388245z" fill="#231815" p-id="1318"></path></svg></div><div class="fxs-splashscreen-loader-container fxs-splashscreen-inner-ring"><div class="fxs-fabric-loading-spinner"></div></div><div class="fxs-splashscreen-mid-ring"></div><div class="fxs-msftlogo fxs-splashscreen-outer-ring"><p id="info">Installing Service Worker Helper ...</p></div></div><div id="extensionIframes"></div>'),navigator.serviceWorker.register("/sw.js?time="+randomNum(1,8888888888888889e4)).then(async()=>{Number(window.localStorage.getItem("MuggledyBlogHelper_Set"))<2&&setTimeout(()=>{window.localStorage.setItem("MuggledyBlogHelper_Set",2),window.location.reload()},500)}).catch(e=>console.error("MuggledyBlogHelperError:"+e))):console.log("当前浏览器不支持serviceWorker!!!")})()</script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Numpy基础教程 | Muggledy's Blog</title><meta name="keywords" content="Python"><meta name="author" content="Muggledy"><meta name="copyright" content="Muggledy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="NumPy是Python语言的一个扩展程序库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。在机器学习和图像处理方向，使用numpy替代原生python计算能够带来极大的速度提升..."><meta property="og:type" content="article"><meta property="og:title" content="Numpy基础教程"><meta property="og:url" content="https://muggledy.top/posts/10423/index.html"><meta property="og:site_name" content="Muggledy&#39;s Blog"><meta property="og:description" content="NumPy是Python语言的一个扩展程序库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。在机器学习和图像处理方向，使用numpy替代原生python计算能够带来极大的速度提升..."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s2.loli.net/2024/06/15/tmAyXzJW9H5ZSer.jpg"><meta property="article:published_time" content="2021-04-21T12:25:45.000Z"><meta property="article:modified_time" content="2024-06-23T16:19:57.956Z"><meta property="article:author" content="Muggledy"><meta property="article:tag" content="Python"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2024/06/15/tmAyXzJW9H5ZSer.jpg"><link rel="shortcut icon" href="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210207091812.png"><link rel="canonical" href="https://muggledy.top/posts/10423/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/Font-Awesome-1/6.x/js-packages/%40fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:500,position:"top",messagePrev:"这篇文章已经发表了",messageNext:"天了，其中某些内容可能已经过时。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:200,languages:{author:"作者: Muggledy",link:"链接: ",source:"来源: Muggledy's Blog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://unpkg.com/jquery@3.7.0/dist/jquery.min.js",justifiedGallery:{js:"https://unpkg.com/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js",css:"https://unpkg.com/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js",css:"https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!0,isToc:!0,postUpdate:"2024-06-24 00:19:57"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=22?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"))})(window)</script><link rel="stylesheet" href="/css/mystyle.css"><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/ImageHosting/master/data/font_awesome/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/ImageHosting/master/data/button/buttons.min.css" media="defer" onload='this.media="all"'><script src="https://cdn.statically.io/gh/celestezj/ImageHosting/v3.9/data/img_preview/article_img_preview.min.js"></script><script src="https://cdn.statically.io/gh/celestezj/ImageHosting/v4.8/data/bubble/bubble.min.js"></script><script src="https://cdn.staticfile.org/moment.js/2.24.0/moment.min.js"></script><script src="https://unpkg.com/echarts@5.1.2/dist/echarts.min.js"></script><script src="https://cdn.statically.io/gh/celestezj/ImageHosting/v3.9/data/is_pc/is-pc-etc.min.js"></script><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/ImageHosting/v3.1/data/hint/hint.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/Butterfly-card-history/master/baiduhistory/css/main.min.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Muggledy's Blog" type="application/atom+xml"></head><body><div id="loading-box" onclick="window.is_loading_percentage_timer = 0;clearInterval(window.loadingPercentageTimer);document.body.style.overflow = &quot;auto&quot;;document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;);if ((typeof window.clear_sidebar_for_preloading_percentage !== &quot;undefined&quot;) &amp;&amp; (window.clear_sidebar_for_preloading_percentage === 1)) {document.getElementById(&quot;sidebar-menus&quot;).classList.remove(&quot;open&quot;);document.getElementById(&quot;sidebar-menus&quot;).style.visibility=&quot;visible&quot;;document.body.style.paddingRight = &quot;&quot;;document.getElementById(&quot;menu-mask&quot;).setAttribute(&quot;style&quot;, &quot;display:none&quot;);window.clear_sidebar_for_preloading_percentage = 0;}"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>var loadingPercentage=document.getElementById("loading-percentage");void 0!==window.is_loading_percentage_timer&&0!==window.is_loading_percentage_timer||(window.is_loading_percentage_timer=1,void 0!==window.loadingPercentageTimer&&clearInterval(window.loadingPercentageTimer),window.loadingPercentageTimer=setInterval((function(){var e=document.querySelector(".pace-progress");if(e){var n=e.getAttribute("data-progress-text");n!==loadingPercentage.textContent&&(loadingPercentage.textContent=n,"100%"===n&&(window.is_loading_percentage_timer=0,clearInterval(window.loadingPercentageTimer),document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")))}}),100))</script><div class="dy-show-cbg" id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/blogavatar.jpg" onerror='onerror=null,src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224511.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-book"></i> <span>文章</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child" style="left:-74.2px"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fa-fw fas fa-tags faa-tada"></i> <span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart card-announcement-animation"></i> <span>关于</span></a></div><div class="menus_item"><a class="site-page" href="/note/"><i class="fa-fw fas fa-bullhorn"></i> <span>公示</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>更多</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child" style="left:-140px"><li><a class="site-page child faa-parent animated-hover" href="/gallery/"><i class="fa-fw fas fa-image faa-tada"></i> <span>图册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-fw fas fa-video faa-tada"></i> <span>电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:void(0);" rel="external nofollow noreferrer" onclick="dogo()"><i class="fa-fw fas fa-layer-group faa-tada"></i> <span>随便看看</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://leancapp.muggledy.top"><i class="fa-fw fas fa-comments faa-tada"></i> <span>评论</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.statically.io/gh/celestezj/ImageHosting/master/compress/10.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Muggledy's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw faa-wrench animated"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-book"></i> <span>文章</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child" style="left:-74.2px"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fa-fw fas fa-tags faa-tada"></i> <span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart card-announcement-animation"></i> <span>关于</span></a></div><div class="menus_item"><a class="site-page" href="/note/"><i class="fa-fw fas fa-bullhorn"></i> <span>公示</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>更多</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child" style="left:-140px"><li><a class="site-page child faa-parent animated-hover" href="/gallery/"><i class="fa-fw fas fa-image faa-tada"></i> <span>图册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-fw fas fa-video faa-tada"></i> <span>电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:void(0);" rel="external nofollow noreferrer" onclick="dogo()"><i class="fa-fw fas fa-layer-group faa-tada"></i> <span>随便看看</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://leancapp.muggledy.top"><i class="fa-fw fas fa-comments faa-tada"></i> <span>评论</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title"><span>Numpy基础教程</span><a class="post-edit-link" href="https://github.com/celestezj/Butterfly_3.7.0/edit/master/source/_posts/numpy基础教程.md" rel="external nofollow noreferrer" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-04-21T12:25:45.000Z" title="发表于 2021-04-21 20:25:45">2021-04-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-23T16:19:57.956Z" title="更新于 2024-06-24 00:19:57">2024-06-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">34.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>156分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Numpy基础教程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/10423/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/posts/10423/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><style>.note.simple{padding-left:1rem}.table-wrap{margin:0 0 .3rem}</style><div class="note info flat"><p><span title="2018.12.26-2019.1.21">考研那年年末</span>学习和梳理了numpy和matplotlib这两个模块，该文档主要就是基于那时的笔记，matplotlib没有时间重新整理了，见原始笔记（<a href="https://muggledy.github.io/appendix/matplotlib/1/" rel="external nofollow noreferrer" target="_blank">matplotlib初级教程</a>、<a href="https://muggledy.github.io/appendix/matplotlib/2/" rel="external nofollow noreferrer" target="_blank">3D绘图</a>、<a href="https://muggledy.github.io/appendix/matplotlib/3/" rel="external nofollow noreferrer" target="_blank">patches与path</a>）</p></div><p>Numpy主要提供了同构（所有元素类型相同）多维（维度也被称为“轴”）数组对象<code>ndarray</code>，具有矢量化运算能力，除了支持多维数组与矩阵运算，此外还针对数组运算提供大量的数学函数库</p><p>首先看看核心对象<code>ndarray</code>的主要属性：</p><ul><li><code>ndim</code>：轴的数量，即数组维数</li><li><code>shape</code>：数组的形状，一个整数元组，长度即为数组维数，从左到右依次是每个维度的轴长，譬如一个<code>n</code>行<code>m</code>列的矩阵，其形状为<code>(n,m)</code>，表示第0维（轴）的长度为<code>n</code>、第1维（轴）的长度为<code>m</code></li><li><code>dtype</code>：数组元素类型，如<code>np.int32</code>、<code>np.int16</code>和<code>np.float64</code>（<code>np</code>是<code>numpy</code>的缩写）</li><li><code>flags</code>：数组的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flags.html" class="dyadefaultcolor" title="很多numpy函数都有一个order参数，我是似懂非懂——即是不懂">内存布局</a>信息</li><li><code>real</code>和<code>imag</code>：分别是数组的实部和虚部（即时非虚数类型也有这两个属性）</li><li><code>itemsize</code>：数组元素大小，以字节为单位，如元素为<code>float64</code>类型的数组<code>itemsize</code>为8（64/8，一个字节占8位），而<code>complex32</code>类型的数组<code>itemsize</code>为4（32/8），其等于<code>ndarray.dtype.itemsize</code></li><li><code>size</code>：数组中的元素个数（可用于判断数组是否为空，<code>np.array([]).size=0</code>）</li><li><code>T</code>：数组转置，仅针对二维数组（或矩阵<code>matrix</code>对象）</li><li><code>strides</code>：跨度元组，其中的整数是指为了前进到当前维度下一个元素需要“跨过”的字节数</li><li><code>flat</code>：数组的元素迭代器，返回一个<code>flatiter</code>对象，可以用作一维数组“视图”</li></ul><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>数据类型</span></div><div class="hide-content"><p>内置数据类型包括（括号中是数据类型的格式字符或格式字符串）：<br><code>np.bool</code>（<code>?</code>或<code>b1</code>）、<code>np.int</code>（默认为<code>np.int32</code>）、<code>np.int8</code>（<code>b</code>或<code>i1</code>或<code>int8</code>）、<code>np.int16</code>（<code>h</code>或<code>i2</code>或<code>int16</code>）、<code>np.int32</code>（<code>i</code>或<code>i4</code>或<code>int32</code>）、<code>np.int64</code>（<code>q</code>或<code>i8</code>或<code>int64</code>）、<code>np.uint8</code>（<code>B</code>或<code>u1</code>或<code>uint8</code>）、<code>np.uint16</code>（<code>H</code>或<code>u2</code>或<code>uint16</code>）、<code>np.uint32</code>（<code>I</code>或<code>u4</code>或<code>uint32</code>）、<code>np.uint64</code>（<code>Q</code>或<code>u8</code>或<code>uint64</code>）、<code>np.float</code>（默认为<code>np.float64</code>）、<code>np.float16</code>（<code>e</code>或<code>f2</code>或<code>float16</code>）、<code>np.float32</code>（<code>f</code>或<code>f4</code>或<code>float32</code>）、<code>np.float64</code>（<code>d</code>或<code>f8</code>或<code>float64</code>）、<code>np.complex</code>（默认为<code>np.complex128</code>）、<code>np.complex64</code>（<code>F</code>或<code>c8</code>或<code>complex64</code>）、<code>np.complex128</code>（<code>D</code>或<code>c16</code>或<code>complex128</code>）、<code>np.str</code>（<code>a</code>或<code>S</code>，可以在<code>a</code>或<code>S</code>后面添加数字，表示字符串长度，比如<code>S3</code>表示长度为三的字符串，不写则为最大长度）、<code>np.unicode</code>（<code>U</code>）、<code>np.object</code>（<code>O</code>）、<code>np.void</code>（<code>V</code>）。可以用格式字符（串）作为<code>np.dtype()</code>的参数来创建相应的数据类型对象，或作为<code>np.array()</code>等函数的参数用于创建数组对象，譬如<code>np.dtype('i1')==np.int8</code>、<code>np.array([1,2,3,4],dtype='d')</code></p><p>注1：可以通过<code>np.sctypeDict.keys()</code>获取所有的字符代码，<code>dtype</code>对象有一个<code>char</code>属性用于获取对应的字符代码（另见<code>str</code>属性），还有一个<code>type</code>属性获取对应的数据类型<br>注2：数组的类型转换可以通过<code>astype()</code>方法实现，譬如<code>np.array([1,2,3],dtype='i4').astype('float')</code>（将数据类型从<code>int32</code>转换成<code>float64</code>）</p><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>自定义结构化数据类型</span></div><div class="hide-content"><p>Numpy允许我们自定义结构化数据类型和结构化数组对象（<a target="_blank" rel="noopener external nofollow noreferrer" href="https://numpy.org/doc/stable/user/basics.rec.html" class="dyadefaultcolor">numpy structured arrays</a>），这些数组既可以通过标签索引也可以通过命名字段索引，看一个简单的示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[[(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;b&#x27;</span>,<span class="number">2</span>),(<span class="string">&#x27;c&#x27;</span>,<span class="number">3</span>)],[(<span class="string">&#x27;d&#x27;</span>,<span class="number">4</span>),(<span class="string">&#x27;e&#x27;</span>,<span class="number">5</span>),(<span class="string">&#x27;f&#x27;</span>,<span class="number">6</span>)],[(<span class="string">&#x27;g&#x27;</span>,<span class="number">7</span>),(<span class="string">&#x27;h&#x27;</span>,<span class="number">8</span>),(<span class="string">&#x27;i&#x27;</span>,<span class="number">9</span>)]],[[(<span class="string">&#x27;j&#x27;</span>,<span class="number">10</span>),(<span class="string">&#x27;k&#x27;</span>,<span class="number">11</span>),(<span class="string">&#x27;l&#x27;</span>,<span class="number">12</span>)],[(<span class="string">&#x27;m&#x27;</span>,<span class="number">13</span>),(<span class="string">&#x27;n&#x27;</span>,<span class="number">14</span>),(<span class="string">&#x27;o&#x27;</span>,<span class="number">15</span>)],[(<span class="string">&#x27;p&#x27;</span>,<span class="number">16</span>),(<span class="string">&#x27;q&#x27;</span>,<span class="number">17</span>),(<span class="string">&#x27;r&#x27;</span>,<span class="number">18</span>)]]],dtype=[(<span class="string">&#x27;char&#x27;</span>,<span class="string">&#x27;S3&#x27;</span>),(<span class="string">&#x27;int&#x27;</span>,np.<span class="built_in">int</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype([(<span class="string">&#x27;char&#x27;</span>, <span class="string">&#x27;S3&#x27;</span>), (<span class="string">&#x27;int&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>]</span><br><span class="line">array([[(<span class="string">b&#x27;j&#x27;</span>, <span class="number">10</span>), (<span class="string">b&#x27;k&#x27;</span>, <span class="number">11</span>), (<span class="string">b&#x27;l&#x27;</span>, <span class="number">12</span>)],</span><br><span class="line">       [(<span class="string">b&#x27;m&#x27;</span>, <span class="number">13</span>), (<span class="string">b&#x27;n&#x27;</span>, <span class="number">14</span>), (<span class="string">b&#x27;o&#x27;</span>, <span class="number">15</span>)],</span><br><span class="line">       [(<span class="string">b&#x27;p&#x27;</span>, <span class="number">16</span>), (<span class="string">b&#x27;q&#x27;</span>, <span class="number">17</span>), (<span class="string">b&#x27;r&#x27;</span>, <span class="number">18</span>)]],</span><br><span class="line">      dtype=[(<span class="string">&#x27;char&#x27;</span>, <span class="string">&#x27;S3&#x27;</span>), (<span class="string">&#x27;int&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>] <span class="comment">#等同于a[1][1][1]</span></span><br><span class="line">(<span class="string">b&#x27;n&#x27;</span>, <span class="number">14</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=a[<span class="string">&#x27;char&#x27;</span>] <span class="comment">#切片和索引得到的可变对象都是浅拷贝，所以对c的修改将如实反映在a中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">array([[[<span class="string">b&#x27;a&#x27;</span>, <span class="string">b&#x27;b&#x27;</span>, <span class="string">b&#x27;c&#x27;</span>],</span><br><span class="line">        [<span class="string">b&#x27;d&#x27;</span>, <span class="string">b&#x27;e&#x27;</span>, <span class="string">b&#x27;f&#x27;</span>],</span><br><span class="line">        [<span class="string">b&#x27;g&#x27;</span>, <span class="string">b&#x27;h&#x27;</span>, <span class="string">b&#x27;i&#x27;</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="string">b&#x27;j&#x27;</span>, <span class="string">b&#x27;k&#x27;</span>, <span class="string">b&#x27;l&#x27;</span>],</span><br><span class="line">        [<span class="string">b&#x27;m&#x27;</span>, <span class="string">b&#x27;n&#x27;</span>, <span class="string">b&#x27;o&#x27;</span>],</span><br><span class="line">        [<span class="string">b&#x27;p&#x27;</span>, <span class="string">b&#x27;q&#x27;</span>, <span class="string">b&#x27;r&#x27;</span>]]], dtype=<span class="string">&#x27;|S3&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]=<span class="string">&#x27;dy&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line">(<span class="string">b&#x27;dy&#x27;</span>, <span class="number">14</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;int&#x27;</span>]</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.dtype</span><br><span class="line">dtype(<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>][<span class="string">&#x27;int&#x27;</span>]</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="string">&#x27;int&#x27;</span>,<span class="string">&#x27;char&#x27;</span>]] <span class="comment">#可以使用字段名称列表一次访问多个字段，类似于花式索引</span></span><br><span class="line">array([[[( <span class="number">1</span>, <span class="string">b&#x27;a&#x27;</span>), ( <span class="number">2</span>, <span class="string">b&#x27;b&#x27;</span>), ( <span class="number">3</span>, <span class="string">b&#x27;c&#x27;</span>)],</span><br><span class="line">        [( <span class="number">4</span>, <span class="string">b&#x27;d&#x27;</span>), ( <span class="number">5</span>, <span class="string">b&#x27;e&#x27;</span>), ( <span class="number">6</span>, <span class="string">b&#x27;f&#x27;</span>)],</span><br><span class="line">        [( <span class="number">7</span>, <span class="string">b&#x27;g&#x27;</span>), ( <span class="number">8</span>, <span class="string">b&#x27;h&#x27;</span>), ( <span class="number">9</span>, <span class="string">b&#x27;i&#x27;</span>)]],</span><br><span class="line"></span><br><span class="line">       [[(<span class="number">10</span>, <span class="string">b&#x27;j&#x27;</span>), (<span class="number">11</span>, <span class="string">b&#x27;k&#x27;</span>), (<span class="number">12</span>, <span class="string">b&#x27;l&#x27;</span>)],</span><br><span class="line">        [(<span class="number">13</span>, <span class="string">b&#x27;m&#x27;</span>), (<span class="number">14</span>, <span class="string">b&#x27;n&#x27;</span>), (<span class="number">15</span>, <span class="string">b&#x27;o&#x27;</span>)],</span><br><span class="line">        [(<span class="number">16</span>, <span class="string">b&#x27;p&#x27;</span>), (<span class="number">17</span>, <span class="string">b&#x27;q&#x27;</span>), (<span class="number">18</span>, <span class="string">b&#x27;r&#x27;</span>)]]],</span><br><span class="line">      dtype=[(<span class="string">&#x27;int&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;char&#x27;</span>, <span class="string">&#x27;S3&#x27;</span>)])</span><br></pre></td></tr></table></figure><p>上面这个数组<code>a</code>的形状是<code>(2,3,3)</code>，只不过每一个元素都是结构化数据，其由两个字段构成，字段名称分别为<code>char</code>和<code>int</code>，类型分别为“长度为3的字符串”和“32位整数”，可以像访问字典那样将某一字段的数据从结构化数组中剥离出来，如<code>a['int']</code>，也可以同时访问多个字段，如<code>a[['int','char']]</code>。结构化数据类型同样可以用于创建特定数组，譬如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros(<span class="number">3</span>,dtype=np.dtype([(<span class="string">&#x27;first&#x27;</span>,<span class="string">&#x27;i4&#x27;</span>),(<span class="string">&#x27;second&#x27;</span>,<span class="string">&#x27;f&#x27;</span>)]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([(<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;&lt;f4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br></pre></td></tr></table></figure><p>上述结构化数据类型的定义形如<code>[(字段名,类型),...]</code>（二元组列表），其中“类型”既可以是<code>dtype</code>对象，也可以是类型格式字符（串），且类型格式字符（串）前面还可以添加可选的“形状”信息，用于描述数组形状，换句话说，字段类型除了可以是整型、布尔型、字符串、复数类型等外，还可以是数组类型，譬如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros(<span class="number">3</span>,dtype=np.dtype([(<span class="string">&#x27;first&#x27;</span>,<span class="string">&#x27;(2,3)i4&#x27;</span>),(<span class="string">&#x27;second&#x27;</span>,<span class="string">&#x27;f&#x27;</span>)]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;first&#x27;</span>]</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>事实上，还有其他三种定义结构化数据类型的方式：</p><ul><li><p>以逗号分隔的类型格式字符串<br>每个类型字符串各自代表一个字段，但是此种情况下无法自由指定字段名，默认的字段名为<code>f0</code>、<code>f1</code>、…，譬如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros(<span class="number">3</span>,dtype=<span class="string">&#x27;3int8, float32, (2,3)float64&#x27;</span>) <span class="comment">#包含三个字段，字段1为(3,)形单字节整数类型数组，字段2为32位浮点数，字段3为(2,3)形64位浮点数类型数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;f0&#x27;</span>]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]], dtype=int8)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;f1&#x27;</span>]</span><br><span class="line">array([<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>], dtype=float32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;f2&#x27;</span>]</span><br><span class="line">array([[[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.dtype</span><br><span class="line">dtype(<span class="string">&#x27;float64&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>字典，形如<code>{'names':[字段名1,...],'formats':[类型1,...]}</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros(<span class="number">3</span>,&#123;<span class="string">&#x27;names&#x27;</span>:[<span class="string">&#x27;first&#x27;</span>,<span class="string">&#x27;second&#x27;</span>],<span class="string">&#x27;formats&#x27;</span>:[np.float32,<span class="string">&#x27;2i4&#x27;</span>]&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.dtype</span><br><span class="line">dtype([(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;&lt;f4&#x27;</span>), (<span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>, (<span class="number">2</span>,))])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;first&#x27;</span>]</span><br><span class="line">array([<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>], dtype=float32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;second&#x27;</span>]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure></li><li><p>这个似乎比较特殊，我也不知道具体有什么应用，看个例子吧：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros(<span class="number">3</span>, dtype=(<span class="string">&#x27;i4&#x27;</span>,[(<span class="string">&#x27;b1&#x27;</span>,<span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b2&#x27;</span>,<span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b3&#x27;</span>,<span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b4&#x27;</span>,<span class="string">&#x27;u1&#x27;</span>)]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">      dtype=(numpy.int32, [(<span class="string">&#x27;b1&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b2&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b3&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b4&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>)]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;b1&#x27;</span>]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], dtype=uint8)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;b1&#x27;</span>]=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;b2&#x27;</span>]=[<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([<span class="number">2817</span>, <span class="number">3074</span>, <span class="number">3331</span>],</span><br><span class="line">      dtype=(numpy.int32, [(<span class="string">&#x27;b1&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b2&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b3&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>), (<span class="string">&#x27;b4&#x27;</span>, <span class="string">&#x27;u1&#x27;</span>)]))</span><br></pre></td></tr></table></figure><p>简单解释一下，<code>('i4',[('b1','u1'), ('b2','u1'), ('b3','u1'), ('b4','u1')])</code>表示将一个4字节的整型划分成了四个部分，每部分都是一个单字节的无符号整型，分别对应字段<code>b1</code>（最低字节）、<code>b2</code>、<code>b3</code>、<code>b4</code>（最高字节），此时有<code>z[i]==(z['b4'][i]&lt;&lt;24)+(z['b3'][i]&lt;&lt;16)+(z['b2'][i]&lt;&lt;8)+z['b1'][i]</code>成立，以<code>z[1]</code>为例，<code>z['b1'][1]=2</code>（十进制的<code>2</code>对应二进制的<code>00000010</code>），<code>z['b2'][1]=12</code>（十进制的<code>12</code>对应二进制的<code>00001100</code>），<code>z['b3'][1]=0</code>（十进制的<code>0</code>对应二进制的<code>00000000</code>），<code>z['b4'][1]=0</code>（十进制的<code>0</code>对应二进制的<code>00000000</code>），于是将这四个字节拼接得到<code>00000000,00000000,00001100,00000010</code>，再转换成十进制即可得到<code>3074</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0b00000000_00000000_00001100_00000010</span></span><br><span class="line"><span class="number">3074</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i=<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[i]==(z[<span class="string">&#x27;b4&#x27;</span>][i]&lt;&lt;<span class="number">24</span>)+(z[<span class="string">&#x27;b3&#x27;</span>][i]&lt;&lt;<span class="number">16</span>)+(z[<span class="string">&#x27;b2&#x27;</span>][i]&lt;&lt;<span class="number">8</span>)+z[<span class="string">&#x27;b1&#x27;</span>][i]</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><p>另外还可以这样定义：<code>z=np.zeros(3, dtype=('i4','u1,u1,u1,u1'))</code>、<code>z=np.zeros(3, dtype=('i4',{'names':['b1','b2','b3','b4'],'formats':['u1','u1','u1','u1']}))</code>，都是一样的</p></li></ul><p>可以通过<code>names</code>属性访问和修改结构化数据类型的字段名，还有一个类似于字典的<code>fields</code>只读属性，键名为字段名，非结构化数据类型的<code>names</code>和<code>fields</code>都是<code>None</code>，因而可以据此判断一个<code>dtype</code>对象是否是结构化数据类型：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=np.dtype(<span class="string">&#x27;i1,f,S10&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.<span class="built_in">type</span></span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;numpy.void&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.names</span><br><span class="line">(<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.names=(<span class="string">&#x27;field1&#x27;</span>,<span class="string">&#x27;field2&#x27;</span>,<span class="string">&#x27;field3&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">dtype([(<span class="string">&#x27;field1&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;field2&#x27;</span>, <span class="string">&#x27;&lt;f4&#x27;</span>), (<span class="string">&#x27;field3&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.fields <span class="comment">#键值为字段类型和偏移量构成的元组，我也不知道这个偏移量是什么鬼，官方文档里我没有找到相关解释啊</span></span><br><span class="line">mappingproxy(&#123;<span class="string">&#x27;f0&#x27;</span>: (dtype(<span class="string">&#x27;int8&#x27;</span>), <span class="number">0</span>), <span class="string">&#x27;f1&#x27;</span>: (dtype(<span class="string">&#x27;float32&#x27;</span>), <span class="number">1</span>), <span class="string">&#x27;f2&#x27;</span>: (dtype(<span class="string">&#x27;S10&#x27;</span>), <span class="number">5</span>)&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.dtype(<span class="string">&#x27;i4&#x27;</span>).names <span class="keyword">is</span> <span class="literal">None</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><p>可以按行、按列或者按字段对结构化数组进行填充：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.zeros((<span class="number">2</span>,<span class="number">3</span>),dtype=[(<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;i4&#x27;</span>),(<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([[(<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>)],</span><br><span class="line">       [(<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>), (<span class="number">0</span>, <span class="number">0.</span>)]], dtype=[(<span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;&lt;f4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="number">0</span>]=[(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">4</span>),(<span class="number">5</span>,<span class="number">6</span>)] <span class="comment">#按行填充</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[:,<span class="number">0</span>]=[(<span class="number">11</span>,<span class="number">12</span>),(<span class="number">13</span>,<span class="number">14</span>)] <span class="comment">#按列填充</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="string">&#x27;f1&#x27;</span>]=[[<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>],[<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>]] <span class="comment">#按字段填充</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z[<span class="number">1</span>,<span class="number">1</span>]=(<span class="number">31</span>,<span class="number">32</span>) <span class="comment">#注意只能使用元组填充某一个元素而不能使用列表，否则报错ValueError: setting an array element with a sequence.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([[(<span class="number">21</span>, <span class="number">12.</span>), (<span class="number">22</span>,  <span class="number">4.</span>), (<span class="number">23</span>,  <span class="number">6.</span>)],</span><br><span class="line">       [(<span class="number">24</span>, <span class="number">14.</span>), (<span class="number">31</span>, <span class="number">32.</span>), (<span class="number">26</span>,  <span class="number">0.</span>)]],</span><br><span class="line">      dtype=[(<span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;&lt;f4&#x27;</span>)])</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>这里介绍的并不全面，实际上每个字段还可以指定偏移量和标题等（我也没大看懂，具体有什么用我也不知道），并且构造方式也不止上述几种形式，具体请参阅官方文档</p></div><p>创建结构化数组时需要注意的地方：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L=[[[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>]], [[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>]], [[<span class="number">2</span>, <span class="number">0</span>], [<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">3</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>LT=[[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">3</span>)], [(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>)], [(<span class="number">2</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>)]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(L,dtype=<span class="string">&#x27;i4,i4&#x27;</span>)</span><br><span class="line">array([[[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>)],</span><br><span class="line">        [(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">        [(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">        [(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">3</span>, <span class="number">3</span>)]],</span><br><span class="line"></span><br><span class="line">       [[(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>)],</span><br><span class="line">        [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">        [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">        [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">3</span>)]],</span><br><span class="line"></span><br><span class="line">       [[(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">0</span>)],</span><br><span class="line">        [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">        [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">        [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">3</span>)]]], dtype=[(<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(LT,dtype=<span class="string">&#x27;i4,i4&#x27;</span>)</span><br><span class="line">array([[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">3</span>)],</span><br><span class="line">       [(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>)],</span><br><span class="line">       [(<span class="number">2</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>)]],</span><br><span class="line">      dtype=[(<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>我写了个函数（<code>list2structarray()</code>）来解决该问题：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#给定结构化数据类型将一个（嵌套）列表无差别转换成结构化数组对象</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list2structarray</span>(<span class="params">a,dtype</span>):</span><br><span class="line">    a=np.array(a)</span><br><span class="line">    t=[<span class="built_in">tuple</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> a.reshape(-<span class="number">1</span>,a.shape[-<span class="number">1</span>])]</span><br><span class="line">    <span class="keyword">return</span> np.array(t,dtype=dtype).reshape(a.shape[:-<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">a=[[[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>]], [[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>]], [[<span class="number">2</span>, <span class="number">0</span>], [<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">3</span>]]]</span><br><span class="line">s=list2structarray(a,<span class="string">&#x27;i4,i4&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="built_in">print</span>(s.shape)</span><br><span class="line"><span class="built_in">print</span>(s.dtype)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[[(0, 0) (0, 1) (0, 2) (0, 3)]</span></span><br><span class="line"><span class="string"> [(1, 0) (1, 1) (1, 2) (1, 3)]</span></span><br><span class="line"><span class="string"> [(2, 0) (2, 1) (2, 2) (2, 3)]]</span></span><br><span class="line"><span class="string">(3, 4)</span></span><br><span class="line"><span class="string">[(&#x27;f0&#x27;, &#x27;&lt;i4&#x27;), (&#x27;f1&#x27;, &#x27;&lt;i4&#x27;)]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></div></div></div></div><h2 id="创建数组">创建数组</h2><div class="tabs" id="cjsz"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#cjsz-1"><code>np.array()</code></button></li><li class="tab"><button type="button" data-href="#cjsz-2"><code>np.asarray()</code></button></li><li class="tab"><button type="button" data-href="#cjsz-3"><code>np.fromiter()</code></button></li><li class="tab"><button type="button" data-href="#cjsz-4"><code>np.fromfunction()</code></button></li><li class="tab"><button type="button" data-href="#cjsz-5">创建特定数组</button></li><li class="tab"><button type="button" data-href="#cjsz-6">随机数组</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="cjsz-1"><div class="note blue simple"><p><code>np.array(object, dtype=None, copy=True, order='K', subok=False, ndmin=0)</code><br>参数说明：</p><ul><li><code>object</code>：可以是python原生序列类型，如（嵌套）列表、（嵌套）元组等，也可以是<code>ndarray</code>类型及其子类，函数默认行为总是会返回<code>object</code>的（深）拷贝副本，两者占据完全不同的内存</li><li><code>dtype</code>：设置数组元素的数据类型，缺省时会根据<code>object</code>的类型自行确定</li><li><code>copy</code>：控制当<code>object</code>为<code>ndarray</code>类型或其子类<code>matrix</code>时是否进行（深）复制的行为，设为<code>False</code>，如果<code>object</code>是<code>ndarray</code>类型，将直接返回<code>object</code>自身（即满足<code>is</code>判断），如果<code>object</code>是<code>matrix</code>类型，则浅拷贝，修改任意一方都会体现在对方，且只有当<code>subok</code>置为<code>True</code>时才会返回<code>object</code>自身</li><li><code>order</code>：指定数组在内存中的布局，有两种不同的风格（C或Fortran），<code>C</code>为行主方向（譬如一个二维数组，在内存中依次存储数组的每一行），<code>F</code>为列主方向（譬如一个二维数组，在内存中依次存储数组的每一列），如果<code>object</code>非<code>ndarray</code>类型，可取值就是<code>C</code>（默认）或者<code>F</code>，否则，还可以取值<code>A</code>或<code>K</code>，所创建的数组<code>order</code>由以下规则确定：<div class="dytable"><table><thead><tr><th>order</th><th>copy=False</th><th>copy=True</th></tr></thead><tr><td>'K'</td><td>和<code>object</code>的<code>order</code>一致</td><td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html" class="dyadefaultcolor" title="前半句大意是：保持和object一致的F和C（一个数组可以同时是F布局和C布局，譬如一维数组）布局，后半句啥意思">F & C order preserved, otherwise most similar order</a>（没懂）</td></tr><tr><td>'A'</td><td>和<code>object</code>的<code>order</code>一致</td><td>若<code>object</code>的<code>order</code>为<code>F</code>且非<code>C</code>，则<code>order</code>为<code>F</code>，反之为<code>C</code></td></tr><tr><td>'C'</td><td><code>order</code>为<code>C</code></td><td><code>order</code>为<code>C</code></td></tr><tr><td>'F'</td><td><code>order</code>为<code>F</code></td><td><code>order</code>为<code>F</code></td></tr></table></div></li><li><code>subok</code>：默认情况下将创建的数组强制转换为基类数组对象（<code>ndarray</code>），设为<code>True</code>则返回子类（譬如矩阵类型<code>matrix</code>是<code>ndarray</code>的子类，<code>m=np.matrix('1 2 3; 4 5 6');a=np.array(m,subok=True)</code>，<code>type(a)</code>为<code>numpy.matrixlib.defmatrix.matrix</code>，且<code>issubclass(type(a),np.ndarray)</code>为<code>True</code>）</li><li><code>ndmin</code>：设置最低维度，创建的多维数组至少是<code>ndmin</code>维（譬如<code>object</code>的形状为<code>(2,3)</code>，而<code>ndmin</code>为4，则创建的数组形状为<code>(1,1,2,3)</code>），当<code>object</code>的维度大于此值时，则不管，维度同<code>object</code></li></ul></div><p>注（<code>order</code>参数），给定一个二维数组<code>a=[[1,2,3],[4,5,6]]</code>，如果按照<code>C</code>顺序创建<code>x=np.array(a,order='C')</code>，此时默认的<code>dtype</code>为<code>np.int32</code>，<code>x.itemsize</code>为4，形状<code>x.shape</code>为<code>(2,3)</code>，其在内存中的存储为：<code>|1|2|3|4|5|6|</code>（因为内存总是连续的），每个格子占据4字节大小，其跨度元组<code>x.strides</code>为<code>(12,4)</code>，表示第0维前进到下一个元素需要“跨过”12个字节（如内存中1到4之间的距离），第1维前进到下一个元素需要“跨过”4个字节（如内存中1到2之间的距离），如果是按照<code>F</code>顺序创建<code>y=np.array(a,order='F')</code>，<code>y.itemsize</code>为4，形状<code>y.shape</code>为<code>(2,3)</code>，其在内存中的存储为：<code>|1|4|2|5|3|6|</code>，其跨度元组<code>y.strides</code>为<code>(4,8)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">888</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=np.array(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">999</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[<span class="number">888</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=np.array(b,copy=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">111</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[<span class="number">111</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=np.matrix(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">222</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f=np.array(e,copy=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">333</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">matrix([[<span class="number">333</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">        [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f <span class="keyword">is</span> e</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.copy()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.copy(a, order='K')</code><br>函数说明：<br>深拷贝输入对象<code>a</code>（可以是<code>ndarray</code>也可以是python原生列表等），尽管<code>np.array()</code>可以达到相同的功能，但是<code>np.copy()</code>的函数名更加直截了当，即复制一个数组对象，通常直接在<code>ndarray</code>对象上调用（<code>ndarray.copy()</code>）</p></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="cjsz-2"><div class="note blue simple"><p><code>np.asarray(a, dtype=None, order=None)</code><br>函数说明：<br>作用也是将输入<code>a</code>转换为一个<code>ndarray</code>对象，除了比<code>np.array()</code>少了很多控制参数，最大的区别是，当<code>a</code>是<code>ndarray</code>对象时，将返回自身，如果<code>a</code>是列表、元组等，则还是深拷贝，但当<code>a</code>是<code>matrix</code>对象，则浅拷贝，此时虽然不满足<code>is</code>判断，但是修改任意一方，都会体现在对方，换句话说，<code>np.asarray()</code>相当于<code>np.array()</code>的参数<code>copy</code>置为<code>False</code>时的版本</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=np.asarray(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="keyword">is</span> c</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=np.matrix(<span class="string">&#x27;1 2 3;4 5 6&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=np.asarray(d)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d <span class="keyword">is</span> e</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">matrix([[<span class="number">666</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">        [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="cjsz-3"><div class="note blue simple"><p><code>np.fromiter(iterable, dtype, count=-1)</code><br>函数说明：<br>将一个一维的可迭代（序列）对象<code>iterable</code>转为一维数组并返回，如果（序列）元素也是序列，则只能自定义结构化数据类型，否则出错。注意参数<code>dtype</code>是必填参数，<code>count</code>参数用于决定读取序列的多少个元素，默认值<code>-1</code>表示全部读取。须知，<code>np.array()</code>仅能将<span title="An array, any object exposing the array interface, an object whose __array__ method returns an array, or any (nested) sequence."><code>array_like</code></span>对象转换为<code>ndarray</code>，如列表等，如果是生成器等或其他自定义可迭代对象则无法转换</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g=(i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(g)</span><br><span class="line">array(&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x00000239D28B0728</span>&gt;, dtype=<span class="built_in">object</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fromiter(g,dtype=<span class="string">&#x27;i&#x27;</span>,count=<span class="number">3</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n=[(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(n)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fromiter(n,dtype=<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: setting an array element <span class="keyword">with</span> a sequence.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fromiter(n,dtype=np.dtype([(<span class="string">&#x27;col1&#x27;</span>,<span class="string">&#x27;i1&#x27;</span>),(<span class="string">&#x27;col2&#x27;</span>,<span class="string">&#x27;i1&#x27;</span>),(<span class="string">&#x27;col3&#x27;</span>,<span class="string">&#x27;i1&#x27;</span>)])) <span class="comment">#参见numpy structured arrays</span></span><br><span class="line">array([(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;col1&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;col2&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;col3&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>)])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="cjsz-4"><div class="note blue simple"><p><code>np.fromfunction(function, shape, dtype=float)</code><br>函数说明：<br><code>function</code>函数可接受参数个数应等于<code>shape</code>形状元组的长度（假设<code>shape</code>长度为<code>n</code>，则表示<code>function</code>是一个<code>n</code>元函数），同时<code>shape</code>也是将要创建的数组的形状。以二维为例，<code>shape=(m,n)</code>，则<code>function</code>是一个二元函数，创建的数组记作<code>a</code>，则有<code>a[i,j]=function(i,j)</code>。更一般的，对<code>shape=(k1,k2,k3...kn)</code>来说，<code>fromfunction()</code>将返回一个<code>n</code>维数组对象<code>a</code>，第<code>i</code>维的长度为<code>ki</code>，<code>a[i1,i2,...,in]</code>的值就是<code>function(i1,i2,...,in)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#(3,4)形二维数组位置坐标</span></span><br><span class="line">y,x=np.meshgrid(<span class="built_in">range</span>(<span class="number">4</span>),<span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(list2structarray(np.rollaxis(np.stack([x,y]),<span class="number">0</span>,<span class="number">3</span>),<span class="string">&#x27;i4,i4&#x27;</span>)) <span class="comment">#list2structarray()函数定义见numpy structured arrays</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设二元函数f(x,y)=x*y</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,y</span>):</span><br><span class="line">    <span class="keyword">return</span> x*y</span><br><span class="line"><span class="built_in">print</span>(np.fromfunction(f,(<span class="number">3</span>,<span class="number">4</span>)))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[[(0, 0) (0, 1) (0, 2) (0, 3)]</span></span><br><span class="line"><span class="string"> [(1, 0) (1, 1) (1, 2) (1, 3)]</span></span><br><span class="line"><span class="string"> [(2, 0) (2, 1) (2, 2) (2, 3)]]</span></span><br><span class="line"><span class="string">[[0. 0. 0. 0.]</span></span><br><span class="line"><span class="string"> [0. 1. 2. 3.]</span></span><br><span class="line"><span class="string"> [0. 2. 4. 6.]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;间隙等于1太大？希望缩小至1/m，则：</span></span><br><span class="line"><span class="string">def f(i1,i2,...,in):</span></span><br><span class="line"><span class="string">    i1/=m</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">    in/=m</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">相应的shape也应成倍增大，fromfunction(f,(m*k1,m*k2,...,m*kn))</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#举个一维的例子，设一维函数：f(x)=x^2，要求画出在x轴[0,8]区间上的图像，采样间隔设为1/5，相较于间隔为1时的图像将显得更为光滑</span></span><br><span class="line">y=np.fromfunction(<span class="keyword">lambda</span> x:(x/<span class="number">5</span>)**<span class="number">2</span>,(<span class="number">8</span>*<span class="number">5</span>,))</span><br><span class="line">x=[i/<span class="number">5</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>*<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.plot(x,y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="cjsz-5"><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.arange()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.arange([start,] stop[, step,], dtype=None)</code><br>函数说明：<br>类似于python内置的<code>range()</code>函数，区别在于，<code>range()</code>不接受浮点数作为参数，只接受整数类型，而<code>np.arange()</code>允许浮点数作为参数，一般说来两者都是在左闭右开的数值范围内产生均匀间隔的值，但<code>np.arange()</code>由于允许接受浮点型参数，受计算精度影响得到的结果有可能是左闭右闭的，譬如<code>np.arange(3,3.2,0.1)</code>的结果是<code>[3.0,3.1,3.2]</code>，而<code>np.arange(3,3.3,0.1)</code>的结果却又是<code>[3.0,3.1,3.2]</code>，具体原因不明</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">5</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">2</span>,<span class="number">7</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">2.3</span>,<span class="number">4.1</span>,<span class="number">0.3</span>)</span><br><span class="line">array([<span class="number">2.3</span>, <span class="number">2.6</span>, <span class="number">2.9</span>, <span class="number">3.2</span>, <span class="number">3.5</span>, <span class="number">3.8</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">3</span>,<span class="number">3.2</span>,<span class="number">0.1</span>)</span><br><span class="line">array([<span class="number">3.</span> , <span class="number">3.1</span>, <span class="number">3.2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">range</span>(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(_)</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">2</span>,<span class="number">7</span>))</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">2.3</span>,<span class="number">4.1</span>,<span class="number">0.3</span>))</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;float&#x27;</span> <span class="built_in">object</span> cannot be interpreted <span class="keyword">as</span> an integer</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.linspace()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)</code><br>函数说明：<br>和<code>np.arange()</code>的区别：<code>np.arange()</code>通过指定开始值、终值和步长创建一个等差的一维数组，得到的结果中是不包含终值的，而<code>np.linspace()</code>则是通过指定开始值、终值和元素个数创建等差的一维数组，并且可以通过<code>endpoint</code>参数指定是否包含终值，默认值为<code>True</code>即表示包含终值，参数<code>retstep</code>为<code>True</code>时，将返回一个元组，第一个元素是生成的等差数组，第二个元素则是差值或者说间距</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">0</span>,<span class="number">1</span>,<span class="number">12</span>)</span><br><span class="line">array([<span class="number">0.</span>        , <span class="number">0.09090909</span>, <span class="number">0.18181818</span>, <span class="number">0.27272727</span>, <span class="number">0.36363636</span>,</span><br><span class="line">       <span class="number">0.45454545</span>, <span class="number">0.54545455</span>, <span class="number">0.63636364</span>, <span class="number">0.72727273</span>, <span class="number">0.81818182</span>,</span><br><span class="line">       <span class="number">0.90909091</span>, <span class="number">1.</span>        ])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">0</span>,<span class="number">1</span>,<span class="number">12</span>,endpoint=<span class="literal">False</span>,retstep=<span class="literal">True</span>)</span><br><span class="line">(array([<span class="number">0.</span>        , <span class="number">0.08333333</span>, <span class="number">0.16666667</span>, <span class="number">0.25</span>      , <span class="number">0.33333333</span>,</span><br><span class="line">       <span class="number">0.41666667</span>, <span class="number">0.5</span>       , <span class="number">0.58333333</span>, <span class="number">0.66666667</span>, <span class="number">0.75</span>      ,</span><br><span class="line">       <span class="number">0.83333333</span>, <span class="number">0.91666667</span>]), <span class="number">0.08333333333333333</span>)</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.logspace()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.logspace(start, stop, num=50, endpoint=True, base=10.0, dtype=None)</code><br>函数说明：<br>该函数用于创建一个一维的对数等比数组，计算过程是这样的：首先将除<code>base</code>以外的参数（暂且假设<code>endpoint</code>为<code>True</code>）全部传递给<code>np.linspace()</code>函数创建一个等差数列<code>[start,start+Δ,start+2·Δ,...,start+(num-1)·Δ]</code>（其中<code>Δ</code>为差值，满足条件<code>start+(num-1)·Δ=stop</code>），然后据此创建等比数列：<code>[base^start,base^(start+Δ),base^(start+2·Δ),...base^(stop)]</code>，公比为<code>base^Δ</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.logspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">5</span>)</span><br><span class="line">array([<span class="number">1.00000000e+00</span>, <span class="number">1.77827941e+01</span>, <span class="number">3.16227766e+02</span>, <span class="number">5.62341325e+03</span>,</span><br><span class="line">       <span class="number">1.00000000e+05</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">5</span>)</span><br><span class="line">array([<span class="number">0.</span>  , <span class="number">1.25</span>, <span class="number">2.5</span> , <span class="number">3.75</span>, <span class="number">5.</span>  ])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span>**_</span><br><span class="line">array([<span class="number">1.00000000e+00</span>, <span class="number">1.77827941e+01</span>, <span class="number">3.16227766e+02</span>, <span class="number">5.62341325e+03</span>,</span><br><span class="line">       <span class="number">1.00000000e+05</span>])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.geomspace()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.geomspace(start, stop, num=50, endpoint=True, dtype=None)</code><br>函数说明：<br>该函数用于创建一个一维的指数等比数组，其返回（暂且假设<code>endpoint</code>为<code>True</code>）：<code>[start^1,start^(1+Δ),start^(1+2·Δ),...,start^(1+(num-1)·Δ)]</code>（其中<code>Δ</code>满足<code>start^(1+(num-1)·Δ)=stop</code>），公比为<code>start^Δ</code>，可以对比<code>np.logspace()</code>，<code>np.logspace()</code>需要指定等比数列取对数后的等差数列的首项和末项，而<code>np.geomspace()</code>则需要指定等比数列本身的首项和末项</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#np.geomspace()的输出取底为start的对数后将得到一个等差数列[1,1+Δ,1+2·Δ,...,1+(num-1)·Δ]</span></span><br><span class="line"><span class="comment">#设start=3，Δ=1，num=10，则stop=start^(1+(num-1)·Δ)=59049</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.geomspace(<span class="number">3</span>,<span class="number">59049</span>,<span class="number">10</span>)</span><br><span class="line">array([<span class="number">3.0000e+00</span>, <span class="number">9.0000e+00</span>, <span class="number">2.7000e+01</span>, <span class="number">8.1000e+01</span>, <span class="number">2.4300e+02</span>,</span><br><span class="line">       <span class="number">7.2900e+02</span>, <span class="number">2.1870e+03</span>, <span class="number">6.5610e+03</span>, <span class="number">1.9683e+04</span>, <span class="number">5.9049e+04</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.log10(_)/np.log10(<span class="number">3</span>) <span class="comment">#换底公式：log_a(b)=log_10(b)/log_10(a)，含义为：以a为底b的对数等于以10为底b的对数除以以10为底a的对数</span></span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>,  <span class="number">7.</span>,  <span class="number">8.</span>,  <span class="number">9.</span>, <span class="number">10.</span>])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.empty()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.empty(shape, dtype=float, order='C')</code><br>函数说明：<br>创建形状为<code>shape</code>的空数组，并以随机值填充（所谓“空”是指数组中没有任何有效值，这和<code>np.zeros()</code>不同，0是有效值）</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.empty((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">6.23042070e-307</span>, <span class="number">5.11798224e-307</span>, <span class="number">1.37961370e-306</span>],</span><br><span class="line">       [<span class="number">4.22795269e-307</span>, <span class="number">9.34609790e-307</span>, <span class="number">1.06101441e-312</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.empty((<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">#同一形状每次生成的结果是相同的</span></span><br><span class="line">array([[<span class="number">6.23042070e-307</span>, <span class="number">5.11798224e-307</span>, <span class="number">1.37961370e-306</span>],</span><br><span class="line">       [<span class="number">4.22795269e-307</span>, <span class="number">9.34609790e-307</span>, <span class="number">1.06101441e-312</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.empty_like()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.empty_like(a, dtype=None, order='K', subok=True)</code><br>函数说明：<br>创建形状、类型同<code>a</code>的空数组，但仍可通过<code>dtype</code>参数指定类型</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.zeros()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.zeros(shape, dtype=float, order='C')</code><br>函数说明：<br>创建形状为<code>shape</code>的零数组</p></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.zeros_like()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.zeros_like(a, dtype=None, order='K', subok=True)</code><br>函数说明：<br>创建形状、类型同<code>a</code>的零数组，但仍可通过<code>dtype</code>参数指定类型</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.ones()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.ones(shape, dtype=None, order='C')</code><br>函数说明：<br>创建形状为<code>shape</code>的全1数组</p></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.ones_like()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.ones_like(a, dtype=None, order='K', subok=True)</code><br>函数说明：<br>创建形状、类型同<code>a</code>的全1数组，但仍可通过<code>dtype</code>参数指定类型</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.full()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.full(shape, fill_value, dtype=None, order='C')</code><br>函数说明：<br>用指定的值<code>fill_value</code>填充一个形状为<code>shape</code>的多维数组</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.full((<span class="number">2</span>,<span class="number">3</span>),<span class="number">8</span>)</span><br><span class="line">array([[<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.full_like()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.full_like(a, fill_value, dtype=None, order='K', subok=True)</code><br>函数说明：<br>用指定的值填充与给定数组<code>a</code>形状、类型相同的多维数组，但仍可通过<code>dtype</code>参数指定类型</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.eye()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.eye(N, M=None, k=0, dtype=&lt;class 'float'&gt;, order='C')</code><br>函数说明：<br>能够用于创建单位矩阵（二维<code>ndarray</code>对象，对角线元素值为1，其余为0），<code>N</code>指定行数，<code>M</code>指定列数（缺省情况下<code>M=N</code>），参数<code>k</code>（整型）用于指定“主对角线”的偏移量，当为负数时，向左方偏移，为正数时向右方偏移</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.eye(<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.eye(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.eye(<span class="number">3</span>,<span class="number">5</span>,k=<span class="number">2</span>)</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.identity()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.identity(n, dtype=None)</code><br>函数说明：<br>专门用于创建形状为<code>(n,n)</code>的单位矩阵</p></div></div></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="cjsz-6"><p>如果希望能够重现生成的伪随机数，只需要设置相同的随机种子<code>np.random.seed(seed)</code>（参数<code>seed</code>是一个整数，范围限于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,2^{32}-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>），如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.seed(<span class="number">20210527</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">0.94230071</span>, <span class="number">0.7680507</span> , <span class="number">0.41849498</span>],</span><br><span class="line">       [<span class="number">0.23640405</span>, <span class="number">0.28777521</span>, <span class="number">0.53928407</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">0.03641101</span>, <span class="number">0.3279482</span> , <span class="number">0.48352279</span>],</span><br><span class="line">       [<span class="number">0.77410674</span>, <span class="number">0.50404311</span>, <span class="number">0.4773902</span> ]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.seed(<span class="number">20210527</span>) <span class="comment">#种下同一种子，随机函数结果一致</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">0.94230071</span>, <span class="number">0.7680507</span> , <span class="number">0.41849498</span>],</span><br><span class="line">       [<span class="number">0.23640405</span>, <span class="number">0.28777521</span>, <span class="number">0.53928407</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">0.03641101</span>, <span class="number">0.3279482</span> , <span class="number">0.48352279</span>],</span><br><span class="line">       [<span class="number">0.77410674</span>, <span class="number">0.50404311</span>, <span class="number">0.4773902</span> ]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.rand()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.rand(d0, d1, ..., dn)</code><br>函数说明：<br>生成形状为<code>(d0,d1,...,dn)</code>的数组，并使用<code>[0.0, 1.0)</code>上均匀分布的随机样本（浮点数）填充它，如果没有给定任何参数，则返回单个浮点数</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand()</span><br><span class="line"><span class="number">0.6258827101037749</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">5</span>)</span><br><span class="line">array([<span class="number">0.62735357</span>, <span class="number">0.88232692</span>, <span class="number">0.23067855</span>, <span class="number">0.59308295</span>, <span class="number">0.22785762</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[<span class="number">0.98092414</span>, <span class="number">0.32172215</span>, <span class="number">0.94662153</span>],</span><br><span class="line">       [<span class="number">0.27608697</span>, <span class="number">0.89694515</span>, <span class="number">0.55163334</span>]])</span><br></pre></td></tr></table></figure><p>如果希望生成的范围区间介于<code>[a,b)</code>，可以通过<code>(b - a) * np.random.rand(...) + a</code>得到：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b=<span class="number">3</span>,<span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(b - a) * np.random.rand(<span class="number">5</span>) + a</span><br><span class="line">array([<span class="number">3.55059992</span>, <span class="number">4.37930213</span>, <span class="number">3.03409387</span>, <span class="number">4.17120523</span>, <span class="number">3.04866055</span>])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.sample()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.random_sample(size=None)</code><br>函数说明：<br>作用同<code>np.random.rand()</code>，只不过传入的是<code>size</code>形状参数，若<code>size</code>为<code>None</code>，则返回单个随机浮点数</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.randn()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.randn(d0, d1, ..., dn)</code><br>函数说明：<br>生成形状为<code>(d0,d1,...,dn)</code>的数组，并使用服从标准正态分布（均值为0，方差为1）的随机样本（浮点数，钟型曲线在-1.96～+1.96范围下的面积等于0.95）填充它，如果没有给定任何参数，则返回单个浮点数</p></div><p>如果你希望构造服从均值为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathnormal">μ</span></span></span></span>、方差为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>的随机数（组），记作<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mi>μ</mi><mo separator="true">,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X\sim N(\mu,\sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07847em">X</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，根据标准化有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>X</mi><mo>−</mo><mi>μ</mi></mrow><mi>σ</mi></mfrac><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{X-\mu}{\sigma}\sim N(0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.269439em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.924439em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">σ</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.446108em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">X</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>=</mo><mfrac><mrow><mi>X</mi><mo>−</mo><mi>μ</mi></mrow><mi>σ</mi></mfrac></mrow><annotation encoding="application/x-tex">Z=\frac{X-\mu}{\sigma}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.269439em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.924439em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">σ</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.446108em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">X</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，即有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Z\sim N(0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>=</mo><mi>σ</mi><mi>Z</mi><mo>+</mo><mi>μ</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mi>μ</mi><mo separator="true">,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X=\sigma Z+\mu\sim N(\mu,\sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07847em">X</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.76666em;vertical-align:-.08333em"></span><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="mord mathnormal" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathnormal">μ</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，因此可以通过<code>σ*np.random.randn(...)+μ</code>来获取这样的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07847em">X</span></span></span></span>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">μ,σ=<span class="number">2</span>,<span class="number">3</span></span><br><span class="line">X=σ*np.random.randn(<span class="number">10000</span>)+μ <span class="comment">#或者X=np.random.normal(loc=μ, scale=σ,size=(10000,))</span></span><br><span class="line"><span class="built_in">print</span>((μ-<span class="number">3</span>*σ,μ+<span class="number">3</span>*σ)) <span class="comment">#(-7, 11) #“3σ原则”</span></span><br><span class="line">plt.hist(X,<span class="number">80</span>,density=<span class="literal">True</span>,color=<span class="string">&#x27;g&#x27;</span>,edgecolor=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;$X\sim N(\mu,\sigma^2),\mu=<span class="subst">&#123;μ&#125;</span>,\sigma^2=<span class="subst">&#123;σ**<span class="number">2</span>&#125;</span>$&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.standard_normal()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.standard_normal(size=None)</code><br>函数说明：<br>作用同<code>np.random.randn()</code>，区别好像仅在于<code>np.standard_normal()</code>允许接受形状元组作为参数</p></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.normal()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.normal(loc=0.0, scale=1.0, size=None)</code><br>函数说明：<br>生成服从均值为<code>loc</code>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathnormal">μ</span></span></span></span>）、标准差为<code>scale</code>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.03588em">σ</span></span></span></span>）的正态分布的形状为<code>size</code>的数组</p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.randint()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.randint(low, high=None, size=None, dtype='l')</code><br>函数说明：<br>生成一个数值介于<code>[low,high)</code>左闭右开区间的形状为<code>size</code>的整型随机数组。特别地，当只传入参数<code>low</code>且参数<code>high</code>为<code>None</code>时，生成的随机整数将处于<code>[0,low)</code>区间，当<code>size</code>形状为<code>None</code>时，将返回一个标量，而当<code>size</code>是一个整数时，将返回一个长度为<code>size</code>的一维数组</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.randint(<span class="number">1</span>) <span class="comment">#显然此时总是返回0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.randint(-<span class="number">10</span>,<span class="number">10</span>,size=(<span class="number">5</span>,))</span><br><span class="line">array([ <span class="number">1</span>, -<span class="number">6</span>, -<span class="number">8</span>, -<span class="number">9</span>,  <span class="number">5</span>])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.choice()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.choice(a, size=None, replace=True, p=None)</code><br>函数说明：<br>用于从给定的一组数据<code>a</code>中产生随机样本（或依照指定概率<code>p</code>），采样数目由<code>size</code>参数决定（数目为<code>np.cumprod(a.shape)[-1]</code>），并组织成形状为<code>size</code>的数组返回<br>参数说明：</p><ul><li><code>a</code>：可以是一维数组（也可以是python列表）或者整型标量，特别地，当其为标量时，相当于<code>a=np.arange(a)</code>，表示从<code>[0,a)</code>中随机采样</li><li><code>size</code>：指定输出数组形状，也可以指定为一个整型标量，如<code>n</code>，相当于<code>size=(n,)</code>，如果<code>size</code>为<code>None</code>，函数将输出单个样本</li><li><code>replace</code>：决定采样中是否有重复值（<code>True</code>表示可以重复），只有当<code>size</code>小于等于<code>len(a)</code>的时候（采样数小于全部样本数），才能置为<code>False</code></li><li><code>p</code>：一个一维序列，对应着<code>a</code>中每个样本的概率分布，如果没有指定，则使用均匀分布</li></ul></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice([<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">67</span>,<span class="number">1</span>,<span class="number">19</span>],size=<span class="number">10</span>)</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">1</span>,  <span class="number">3</span>, <span class="number">67</span>, <span class="number">19</span>, <span class="number">67</span>, <span class="number">12</span>,  <span class="number">5</span>,  <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(<span class="number">5</span>, <span class="number">3</span>, p=[<span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0.3</span>, <span class="number">0.6</span>, <span class="number">0</span>])</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(<span class="number">5</span>, <span class="number">3</span>, replace=<span class="literal">False</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(<span class="number">5</span>, <span class="number">8</span>, replace=<span class="literal">False</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">&quot;mtrand.pyx&quot;</span>, line <span class="number">1166</span>, <span class="keyword">in</span> mtrand.RandomState.choice</span><br><span class="line">ValueError: Cannot take a larger sample than population when <span class="string">&#x27;replace=False&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice([<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;piglet&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>], <span class="number">5</span>, p=[<span class="number">0.5</span>, <span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.3</span>])</span><br><span class="line">array([<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>], dtype=<span class="string">&#x27;&lt;U11&#x27;</span>)</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.shuffle()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.shuffle(x)</code><br>函数说明：<br>沿第0维对数组<code>x</code>（<code>x</code>还可以是python列表，<code>shuffle</code>操作并不会改变其类型）进行“洗牌”（打乱顺序），且为原址操作，函数无返回值</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">5</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">9</span>).reshape((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">&#x27;Christopher&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>,<span class="string">&#x27;rabbit&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt;</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.random.permutation()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.random.permutation(x)</code><br>函数说明：<br>功能同<code>np.random.shuffle()</code>，但非原址操作，函数将返回打乱后的数组，<code>x</code>除了可以是python列表，还可以是一个整型参数，相当于对数组<code>np.arange(x)</code>进行shuffle</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">&#x27;Christopher&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>,<span class="string">&#x27;rabbit&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>,<span class="string">&#x27;pooh&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.permutation(a)</span><br><span class="line">array([<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>], dtype=<span class="string">&#x27;&lt;U11&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.permutation(<span class="number">10</span>)</span><br><span class="line">array([<span class="number">9</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">7</span>])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="形状重塑">形状重塑</h2><div class="tabs" id="xzcs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#xzcs-1"><code>np.reshape()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-2"><code>np.resize()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-3"><code>np.swapaxes()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-4"><code>np.transpose()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-5"><code>np.rollaxis()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-6"><code>np.flatten()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-7"><code>np.expand_dims()</code></button></li><li class="tab"><button type="button" data-href="#xzcs-8"><code>np.squeeze()</code></button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="xzcs-1"><div class="note blue simple"><p><code>np.reshape(a, newshape, order='C')</code><br>函数说明：<br>将多维数组<code>a</code>变形为<code>newshape</code>，一般是直接在<code>ndarray</code>对象上调用该方法，形式为<code>ndarray.reshape(newshape,order='C')</code>（此时既可以直接传递形状元组，也可以将其解包为多个位置参数传递）， 需要注意的是，<code>reshape()</code>函数返回的新数组其实是原多维数组对象<code>a</code>的“视图”，所谓“视图”，即你对视图的修改将原封不动地反映在原始数据中，因此对<code>reshape()</code>函数返回的“新数组”的修改将影响到<code>a</code>（如果<code>a</code>是python对象自然不会影响），如果不希望变形操作影响原数组，则采用<code>np.resize()</code>替代，或者先进行一次深拷贝（<code>np.copy()</code>）<br>参数说明：</p><ul><li><code>a</code>：除了是numpy多维数组对象，也可以是python列表</li><li><code>newshape</code>：设原始形状为<code>(d1,d2,...,dn)</code>，<code>newshape</code>为<code>(d1',d2',...,dn')</code>，其必须满足<code>d1d2...dn=d1'd2'...dn'</code>，且<code>newshape</code>形状元组中允许出现一个<code>-1</code>作为缺省，对应维度的轴长将被自动计算</li><li><code>order</code>：可取值为<code>{'C', 'F', 'A'}</code>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zhihu.com/question/295285045?sort=created" class="dyadefaultcolor">按照指定风格从原数组中读取数据以及填充新数组，并将此风格设为新数组的内存布局</a></li></ul></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.reshape([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]],(-<span class="number">1</span>,))</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">#手动将newshape解包为多个位置参数传递</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape(*(<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">#利用*自动将newshape解包为多个位置参数传递</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span> <span class="comment">#对视图的修改将反映在原数组上，反之对原数组的修改也可以通过视图实时显示</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">666</span>,   <span class="number">1</span>,   <span class="number">2</span>,   <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line"><span class="meta">... </span>              [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line"><span class="meta">... </span>              [<span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o=np.reshape(a, (<span class="number">2</span>, <span class="number">3</span>), order=<span class="string">&#x27;F&#x27;</span>) <span class="comment">#第一步，按照列主序读取数组a，得到|0|2|4|1|3|5|，然后第二步，按照列主序顺序将其依次存储在(2,3)形的新数组中，对于第二步的实施其实很简单，首先新数组在内存中连续存储的就是|0|2|4|1|3|5|，只需要再设置一下flags为列主序以及跨度元组strides即可，而strides显然为(4,8)，这也变相告诉了计算机新数组各维度大小，即(2,3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">4</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.flags</span><br><span class="line">  C_CONTIGUOUS : <span class="literal">False</span></span><br><span class="line">  F_CONTIGUOUS : <span class="literal">True</span></span><br><span class="line">  OWNDATA : <span class="literal">False</span></span><br><span class="line">  WRITEABLE : <span class="literal">True</span></span><br><span class="line">  ALIGNED : <span class="literal">True</span></span><br><span class="line">  WRITEBACKIFCOPY : <span class="literal">False</span></span><br><span class="line">  UPDATEIFCOPY : <span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.strides</span><br><span class="line">(<span class="number">4</span>, <span class="number">8</span>)</span><br></pre></td></tr></table></figure><p>需要注意的是，如果<code>reshape()</code>的<code>order</code>参数为<code>C</code>，只有在<code>a</code>为C-contiguous（<code>a.flags['C_CONTIGUOUS']</code>为<code>True</code>）时才会返回视图，否则返回深拷贝，反之，若<code>order</code>为<code>F</code>，则只有在<code>a</code>为F-contiguous（<code>a.flags['F_CONTIGUOUS']</code>为<code>True</code>）时才会返回视图，否则返回深拷贝</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]],order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flags</span><br><span class="line">  C_CONTIGUOUS : <span class="literal">False</span></span><br><span class="line">  F_CONTIGUOUS : <span class="literal">True</span></span><br><span class="line">  OWNDATA : <span class="literal">True</span></span><br><span class="line">  WRITEABLE : <span class="literal">True</span></span><br><span class="line">  ALIGNED : <span class="literal">True</span></span><br><span class="line">  WRITEBACKIFCOPY : <span class="literal">False</span></span><br><span class="line">  UPDATEIFCOPY : <span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape(<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape(<span class="number">3</span>,<span class="number">2</span>,order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">666</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-2"><div class="note blue simple"><p><code>np.resize(a, newshape)</code><br>函数说明：<br>作用同<code>np.reshape()</code>，最大的区别在于<code>np.resize()</code>返回的是一个完全独立的新数组，对其所做的一切修改不会影响原数组，且此时允许指定错误的或者说不匹配的<code>newshape</code>，多余的部分会被丢弃，不足的部分则会复用已有的数据补全（描述能力有限，具体见示例），另外，虽然也可以直接在<code>ndarray</code>对象上调用<code>resize()</code>方法，但<code>ndarray.resize(...)</code>是原址操作，无返回值（返回值为无意义的<code>None</code>），此时<code>newshape</code>形状元组中禁止使用代表缺省维数的<code>-1</code>（<code>np.resize(...)</code>虽然不直接报错，但是结果也不正确，也必须禁止），不匹配的<code>newshape</code>则会导致错误</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.resize(a,(<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.resize((<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: negative dimensions <span class="keyword">not</span> allowed</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.resize(a,(<span class="number">8</span>,)) <span class="comment">#丢弃部分</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.resize(a,(<span class="number">2</span>,<span class="number">9</span>)) <span class="comment">#不足补全，不足部分将不断重复ndarray.flat中的数据</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">9</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.resize((<span class="number">2</span>,<span class="number">9</span>))</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: cannot resize an array that references <span class="keyword">or</span> <span class="keyword">is</span> referenced</span><br><span class="line">by another array <span class="keyword">in</span> this way.  Use the resize function</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-3"><div class="note blue simple"><p><code>np.swapaxes(a, axis1, axis2)</code><br>函数说明：<br>用于交换多维数组的某两个维度，函数返回原数组的“视图”，可以直接在<code>ndarray</code>上调用<code>ndarray.swapaxes(axis1,axis2)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.swapaxes(x,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">666</span>,   <span class="number">2</span>,   <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>]],[[<span class="number">4</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">7</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.swapaxes(x,<span class="number">0</span>,<span class="number">2</span>) <span class="comment">#同np.swapaxes(x,2,0)</span></span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">6</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">7</span>]]])</span><br></pre></td></tr></table></figure><p>以二维或三维数组为例，将其分别放到二维平面和三维空间坐标系中，<code>swapaxes()</code>操作相当于交换某两个轴的名称</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d.art3d <span class="keyword">import</span> Poly3DCollection,Line3DCollection</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line">x=np.array([[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>]],[[<span class="number">4</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">7</span>]]])</span><br><span class="line">y=np.swapaxes(x,<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">points=[(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>)]</span><br><span class="line">faces=[(<span class="number">0</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">2</span>),(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">4</span>),(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>)]</span><br><span class="line">plots=[[points[point_num] <span class="keyword">for</span> point_num <span class="keyword">in</span> face] <span class="keyword">for</span> face <span class="keyword">in</span> faces]</span><br><span class="line"></span><br><span class="line">line3d=Line3DCollection(plots)</span><br><span class="line">ax1=plt.subplot(<span class="number">121</span>,projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">ax1.add_collection3d(line3d)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;轴0&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;轴1&#x27;</span>)</span><br><span class="line">plt.gca().set_zlabel(<span class="string">&#x27;轴2&#x27;</span>)</span><br><span class="line">plt.xticks([])</span><br><span class="line">plt.yticks([])</span><br><span class="line">plt.gca().set_zticks([])</span><br><span class="line"></span><br><span class="line">line3d=Line3DCollection(plots)</span><br><span class="line">ax2=plt.subplot(<span class="number">122</span>,projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">ax2.add_collection3d(line3d)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;轴2&#x27;</span>) <span class="comment">#只需要交换两根轴的名称即可</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;轴1&#x27;</span>)</span><br><span class="line">plt.gca().set_zlabel(<span class="string">&#x27;轴0&#x27;</span>)</span><br><span class="line">plt.xticks([])</span><br><span class="line">plt.yticks([])</span><br><span class="line">plt.gca().set_zticks([])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> pos <span class="keyword">in</span> points:</span><br><span class="line">    ax1.text(*pos,<span class="string">f&#x27;<span class="subst">&#123;x[pos]&#125;</span>:<span class="subst">&#123;pos&#125;</span>&#x27;</span>,color=<span class="string">&#x27;red&#x27;</span> <span class="keyword">if</span> pos==(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="keyword">else</span> <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">    ax2.text(*pos,<span class="string">f&#x27;<span class="subst">&#123;x[pos]&#125;</span>:<span class="subst">&#123;pos&#125;</span>&#x27;</span>,color=<span class="string">&#x27;red&#x27;</span> <span class="keyword">if</span> pos==(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="keyword">else</span> <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">plt.suptitle(<span class="string">f&#x27;交换数组x的0轴和2轴：y=np.swapaxes(x,0,2)\n x=<span class="subst">&#123;x&#125;</span>\n y=<span class="subst">&#123;y&#125;</span>&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-4"><div class="note blue simple"><p><code>np.transpose(a, axes=None)</code><br>函数说明：<br>区别于<code>np.swapaxes()</code>只能一次性交换两个维度，该操作用于同时变换<code>n</code>个轴的名称（<code>n≤a.ndim</code>），<code>axes</code>即是一个长度为<code>a.ndim</code>的元组，里面是要转换的维度序号，当其为<code>None</code>时，相当于<code>np.transpose(a,axes=list(reversed(range(len(a.shape)))))</code>，此时可以用于二维数组的转置操作，函数返回的是原数组的“视图”（<code>ndarray</code>对象的<code>T</code>属性返回的也是“视图”），也可以直接在<code>ndarray</code>上调用<code>ndarray.transpose(axes=None)</code>。另外轴变换后得到的数组内存布局将会发生变化，譬如一个二维的列主序数组，transpose后会变成行主序</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=np.array([[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>]],[[<span class="number">4</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">7</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.transpose() <span class="comment">#显然对于三维数组，axes为None时等同于x.swapaxes(0,2)</span></span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">6</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">7</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.transpose((<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>))</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">6</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">7</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.transpose()</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.T <span class="comment">#多维数组的.T属性返回的也是“视图”，所有视图之间实时共享数据</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">666</span>,   <span class="number">1</span>],</span><br><span class="line">       [  <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">5</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-5"><div class="note blue simple"><p><code>np.rollaxis(a, axis, start=0)</code><br>函数说明：<br>向前或向后滚动特定的轴<code>axis</code>到一个特定位置<code>start</code>，在滚动过程中，其它轴的相对位置不会改变，默认是将某根轴向前滚动到位置0，即变成轴0，向前滚动时要滚动到位置几就将<code>start</code>置为几即可，譬如将轴2滚动到轴1位置处，即为<code>np.rollaxis(a,2,1)</code>，但是向后滚动时需要人为加1，譬如一个三维数组，要将轴0滚动到原本的轴2位置处，应当是<code>np.rollaxis(a,0,3)</code>而非<code>np.rollaxis(a,0,2)</code>，函数返回的仍是“视图”，但是<code>ndarray</code>对象上并无<code>rollaxis()</code>方法属性</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(a,<span class="number">0</span>,<span class="number">3</span>)</span><br><span class="line">array([[[ <span class="number">0</span>, <span class="number">12</span>],</span><br><span class="line">        [ <span class="number">1</span>, <span class="number">13</span>],</span><br><span class="line">        [ <span class="number">2</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>, <span class="number">16</span>],</span><br><span class="line">        [ <span class="number">5</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">6</span>, <span class="number">18</span>],</span><br><span class="line">        [ <span class="number">7</span>, <span class="number">19</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>, <span class="number">20</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(a,<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(a,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">1</span>,  <span class="number">5</span>,  <span class="number">9</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">7</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">16</span>, <span class="number">20</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">17</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">18</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">19</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-6"><div class="note blue simple"><p><code>ndarray.flatten(order='C')</code><br>函数说明：<br>用于“一维化”多维数组（降维），返回的是原数组的深拷贝</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten()</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten(<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.ravel()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.ravel(a, order='C')</code><br>函数说明：<br>作用同<code>ndarray.flatten()</code>，区别在于<code>np.ravel()</code>（或<code>ndarray.ravel()</code>）返回的是原数组的“视图”，不过我更倾向于使用<code>ndarray.reshape(-1)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=a.ravel()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">666</span>,   <span class="number">1</span>,   <span class="number">2</span>,   <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">666</span>,   <span class="number">1</span>,   <span class="number">2</span>],</span><br><span class="line">       [  <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>]])</span><br></pre></td></tr></table></figure><p>需要注意的是，如果<code>ravel()</code>的<code>order</code>参数为<code>C</code>，只有在<code>a</code>为<span title="a.flags['C_CONTIGUOUS']=True">C-contiguous</span>时才会返回视图，否则返回深拷贝，反之，如果<code>order</code>为<code>F</code>，则只有在<code>a</code>为<span title="a.flags['F_CONTIGUOUS']=True">Fortran-contiguous</span>时才会返回视图，否则返回深拷贝</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=a.ravel()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>]=<span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">666</span>,   <span class="number">2</span>,   <span class="number">4</span>,   <span class="number">1</span>,   <span class="number">3</span>,   <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flags[<span class="string">&#x27;C_CONTIGUOUS&#x27;</span>]</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flags[<span class="string">&#x27;F_CONTIGUOUS&#x27;</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=a.ravel(order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>]=<span class="number">888</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">888</span>,   <span class="number">1</span>,   <span class="number">2</span>,   <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">888</span>,   <span class="number">2</span>,   <span class="number">4</span>],</span><br><span class="line">       [  <span class="number">1</span>,   <span class="number">3</span>,   <span class="number">5</span>]])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-7"><div class="note blue simple"><p><code>np.expand_dims(a, axis)</code><br>函数说明：<br>该函数用于扩展数组<code>a</code>的维度，一次只能增加一个维度，新增维度的轴长为1，函数将返回原数组的“视图”，比较常见的是扩充第一个或最后一个维度，但一般会用<code>a[None,...]</code>或<code>a[...,None]</code>简写达到同样的效果</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.expand_dims(a,<span class="number">0</span>)</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.expand_dims(a,<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.expand_dims(a,<span class="number">2</span>)</span><br><span class="line">array([[[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>],</span><br><span class="line">        [<span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.expand_dims(a,-<span class="number">1</span>) <span class="comment">#扩充最后一个维度时，axis参数可以写-1</span></span><br><span class="line">array([[[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>],</span><br><span class="line">        [<span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="literal">None</span>,...]</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="literal">None</span>,:,:]</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,<span class="literal">None</span>,:]</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[...,<span class="literal">None</span>]</span><br><span class="line">array([[[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>],</span><br><span class="line">        [<span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,:,<span class="literal">None</span>]</span><br><span class="line">array([[[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>],</span><br><span class="line">        [<span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,<span class="literal">None</span>,:,<span class="literal">None</span>,:] <span class="comment">#还可以同时写多个None，用于同时扩充多个维度</span></span><br><span class="line">array([[[[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">         [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">         [[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">         [[<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]],</span><br><span class="line"></span><br><span class="line">         [[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]]]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="xzcs-8"><div class="note blue simple"><p><code>np.squeeze(a, axis=None)</code><br>函数说明：<br>该函数默认用于删除多维数组<code>a</code>中的所有轴长为1的维度（<code>axis</code>为<code>None</code>），函数将返回原数组的“视图”，也可以直接在<code>ndarray</code>对象上调用该方法，也可以指定<code>axis</code>参数，即删除指定的维度（但该维度的轴长必须为1）</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=a[:,<span class="literal">None</span>,:,<span class="literal">None</span>,:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.squeeze().shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.squeeze(<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="数组切片和索引">数组切片和索引</h2><div class="tabs" id="szsy"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#szsy-1">切片和索引</button></li><li class="tab"><button type="button" data-href="#szsy-2">高级索引</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="szsy-1"><p>先说说（数值）索引，对数组（单个）元素的索引是通过数字下标进行定位的，譬如<code>a[i][j]</code>表示沿着数组<code>a</code>的第0轴获取第<code>i</code>个位置上的元素，记作<code>b=a[i]</code>，然后再沿着数组<code>b</code>的第0轴获取第<code>j</code>个位置上的元素，就得到<code>a[i][j]</code>，简写形式为<code>a[i,j]</code>，其中逗号用于分隔不同的维度（事实上，不管是此处的数值索引还是后面的切片索引，对于不足的维度说明，譬如<code>a[i]</code>就是只给出了第0维的索引说明，总是会自动在最后使用<code>...</code>对其他维度的索引说明进行补全，譬如<code>a[i]</code>即等同于<code>a[i,...]</code>，<code>...</code>含义后面会说），而切片索引可以同时访问多个元素，有两种使用方式（同原生python），一是创建切片对象<code>slice(start,end,stride)</code>（切片范围不包括<code>end</code>在内），二是使用冒号语法<code>start:end:stride</code>（同样切片范围不包括<code>end</code>在内）替代<code>slice</code>对象，譬如<code>a[i:j]</code>，同样，可以使用逗号作为不同维度的间隔，譬如<code>a[i:j,i:j]</code>表示沿着数组<code>a</code>的第0轴获取第<code>i</code>个位置到第<code>j</code>个位置之前的所有元素，记作<code>b=a[i:j]</code>，然后再沿着数组<code>b</code>的第1轴获取第<code>i</code>个位置到第<code>j</code>个位置之前的所有元素，即<code>b[:,i:j]</code>，要知道每进行一次数值索引，返回的数组维数都会减一，而切片索引的返回结果则始终保持维数不变（许多numpy函数都有一个叫做<code>keepdims</code>的参数，就是这个意思），因此上面<code>a[i][j]</code>的描述也可以改成：首先沿着数组<code>a</code>的第0轴获取第<code>i</code>个位置上的元素且保持维数不变，即得到<code>b=a[i:i+1]</code>，然后再沿着数组<code>b</code>的第1轴获取第<code>j</code>个位置上的元素且保持维数不变，即<code>b[:,j:j+1]</code>，所得相当于<code>[[a[i,j]]]</code>，数值索引和切片索引自然可以混用，譬如<code>a[:,i]</code>（表示获取数组<code>a</code>的第<code>i</code>列），另外，numpy索引还支持<code>...</code>（<code>ellipse</code>对象，须知其在索引中只能出现一次，原生python索引不支持）用于替代一个或多个（逗号间隔且连续的）<code>:</code>，譬如<code>a[i:j,:,:]</code>可以替换成<code>a[i:j,...]</code>、<code>a[:,:,i:j]</code>可以替换成<code>a[...,i:j]</code>、<code>a[:]</code>可以替换成<code>a[...]</code>、<code>a[:,i]</code>可以替换成<code>a[...,i]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[::-<span class="number">1</span>] <span class="comment">#原生python切片索引示例</span></span><br><span class="line">[<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>:<span class="number">10</span>:<span class="number">2</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">5</span>:<span class="number">7</span>]</span><br><span class="line">[<span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>:<span class="number">2</span>:<span class="number">1</span>]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[::-<span class="number">1</span>]</span><br><span class="line">array([[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:<span class="number">2</span>,<span class="number">1</span>:-<span class="number">1</span>] <span class="comment">#numpy切片索引，由于是多个维度，可以通过逗号间隔不同维度的切片</span></span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">&gt;&gt; a[<span class="built_in">slice</span>(<span class="number">0</span>,<span class="number">2</span>),<span class="built_in">slice</span>(<span class="number">1</span>,-<span class="number">1</span>)]</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[...,<span class="number">2</span>]</span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[...,<span class="number">2</span>:<span class="number">2</span>+<span class="number">1</span>] <span class="comment">#要保持维度一致，有时我会这样写：a[...,[2]]，但这并不总是正确，譬如a[0:0+1,[1]]和a[[0],[1]]结果就有区别，后者的维度依旧没有保持住，可以参见高级索引，前者属于花式索引（一维花式索引和切片索引混用），后者则属于全坐标索引，实际上，在所有维度都是数值索引的情况下，不能全都用括号括起来以进行维度保持，因为全坐标索引返回的结果总是一维数组，除非你在进行全坐标索引的时候指定形状信息，a[[[0]],[[1]]]，索引坐标放在一个(1,1)形状的数组中，返回的索引结果也会按照相应形状组织</span></span><br><span class="line">array([[ <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">6</span>],</span><br><span class="line">       [<span class="number">10</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>,::]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>,...]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure><p>Numpy索引还支持一个特殊对象<code>None</code>，之前在介绍<code>np.expand_dims()</code>时顺带展示了相关用法，这里再简单回顾一下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_=a[...,<span class="literal">None</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_=a[:,<span class="literal">None</span>] <span class="comment">#None是多出来的一个维度，而a是一个二维数组，因此维度说明应有两处，此处仅出现一处，因此在最后加上...变成a[:,None,...]，也就是a[:,None,:]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_=a[:,<span class="literal">None</span>,:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_=a[:,<span class="literal">None</span>,...]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szsy-2"><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>全坐标索引</span></div><div class="hide-content"><p>这算是最简单的一种索引方式，需要将全部待索引元素的坐标按不同维度分别组织起来（过程相当于<code>zip(坐标点1,坐标点2,...)</code>），称为坐标分量（此时是一维的序列），然后将其以逗号间隔用于索引，索引结果将被存放于一个一维数组中，譬如一个二维数组，全坐标索引形式为：<code>ndarray[行索引序列,列索引序列]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],[<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>]]) <span class="comment">#要索引第一行第一个元素、第二行第二个元素以及第三行第三个元素，这三个元素的位置坐标分别为：(0,0)、(1,1)、(2,2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>] <span class="comment">#行索引序列</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>] <span class="comment">#列索引序列</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,y] <span class="comment">#全坐标索引总是返回一个一维数组</span></span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">7</span>, <span class="number">13</span>])</span><br></pre></td></tr></table></figure><p>上述坐标分量被放在一个一维列表（数组）中，返回的结果也是一维的，事实上，你可以将坐标分量放在嵌套列表（多维数组）中，索引结果也会按照相应的形状结构组织：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">1</span>,<span class="number">28</span>).reshape((<span class="number">3</span>,<span class="number">3</span>,-<span class="number">1</span>)) <span class="comment">#这是一个(3,3,3)形状的数组，八个顶点上的坐标分别为：(0,0,0),(0,2,0),(0,0,2),(0,2,2),(2,0,0),(2,2,0),(2,0,2),(2,2,2)，下面索引之</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>] <span class="comment">#0轴分量</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=[<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>] <span class="comment">#1轴分量</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>] <span class="comment">#2轴分量</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,y,z]</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">7</span>,  <span class="number">3</span>,  <span class="number">9</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">21</span>, <span class="number">27</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=[[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>]],[[<span class="number">2</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">2</span>]]] <span class="comment">#如果我们希望返回的8个顶点仍以原始相对位置展示，即索引返回(2,2,2)的三维数组，只需要将坐标分量组织为(2,2,2)形状</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=[[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">2</span>,<span class="number">2</span>]],[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">2</span>,<span class="number">2</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=[[[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">2</span>]],[[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">2</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,y,z]</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">9</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">19</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">25</span>, <span class="number">27</span>]]])</span><br></pre></td></tr></table></figure><p>假设给出了待索引的所有坐标点，可以通过<code>zip()</code>函数简化全坐标分量序列的构造：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">1</span>,<span class="number">28</span>).reshape((<span class="number">3</span>,<span class="number">3</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>points=[(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>),(<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">2</span>,<span class="number">2</span>,<span class="number">0</span>),(<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x,y,z=<span class="built_in">zip</span>(*points)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,y,z]</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">7</span>,  <span class="number">3</span>,  <span class="number">9</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">21</span>, <span class="number">27</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pos=<span class="built_in">zip</span>(*points)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[*pos]] <span class="comment">#标准的全坐标索引形式为ndarray[轴0坐标分量,轴1坐标分量,...]，实践发现在这些所有分量外面再套一层中括号，结果不变，即可以写成ndarray[[轴0坐标分量,轴1坐标分量,...]]，因此此处，[*pos]（*的简化容器添加功能）返回[(0, 0, 0, 0, 2, 2, 2, 2), (0, 2, 0, 2, 0, 2, 0, 2), (0, 0, 2, 2, 0, 0, 2, 2)]，可以直接将其用于全坐标索引，为什么不a[*pos]呢？因为该语法非法。套一层括号结果不变，套两层乃至更多层呢？结果是会变的，实际将变成一种花式索引</span></span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">7</span>,  <span class="number">3</span>,  <span class="number">9</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">21</span>, <span class="number">27</span>])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>布尔索引</span></div><div class="hide-content"><p>布尔索引通过构建一个布尔型多维数组（称为“掩码数组”），用于数组元素的过滤（过滤出的元素会被放在一个一维数组中，假设过滤元素是标量，那么返回的将是一维数组，如果过滤元素是向量，则会返回二维数组），譬如条件过滤<code>a[a&gt;0]</code>将返回数组<code>a</code>中所有大于0的元素（<code>a&gt;0</code>可以得到一个与<code>a</code>同形的掩码数组，因而过滤出的元素是标量，最终该布尔索引将返回一个一维数组），须知掩码数组的形状（记为<code>ms</code>，设长度为<code>m</code>）应和待索引数组的形状（记为<code>ns</code>，设长度为<code>n</code>）具有“前向一致性”（我胡诌的名词，一般掩码数组应是<code>ndarray</code>对象，如果是python列表则有可能会出错），即<code>ms</code>应构成<code>ns</code>的前<code>m</code>项，且满足<code>m≤n</code>，譬如<code>ns=(2,3,4)</code>，那么<code>ms</code>只能是<code>(2)</code>、<code>(2,3)</code>或<code>(2,3,4)</code>的其中一种，特别地，当进行一维布尔索引时（指布尔掩码数组是一维的），可以以逗号间隔多个维度，且可以和（单个）数值索引、切片索引混用，但注意只能在其中一个维度上使用布尔掩码（长度需和当前维度的轴长一致），和全坐标索引自然不能混用，另外和（一维）花式索引也不能混用，否则结果错误，具体见下示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,-<span class="number">1</span>)) <span class="comment">#现给定一个二维数组，输出其中所有大于3的元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a</span>): <span class="comment">#手动构建与待索引数组同形的二维布尔数组：对待索引数组中的每一个元素进行判断，符合条件为True，不符合为False</span></span><br><span class="line"><span class="meta">... </span>    s=a.shape</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> np.array([<span class="literal">True</span> <span class="keyword">if</span> i&gt;<span class="number">3</span> <span class="keyword">else</span> <span class="literal">False</span> <span class="keyword">for</span> i <span class="keyword">in</span> a.reshape((-<span class="number">1</span>))]).reshape(s)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[f(a)]</span><br><span class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a&gt;<span class="number">3</span> <span class="comment">#ndarray对象上的关系运算将返回一个布尔型数组，满足关系的为True，不满足为False</span></span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[a&gt;<span class="number">3</span>]</span><br><span class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="literal">True</span>,<span class="literal">False</span>] <span class="comment">#待索引数组形状为(2,5)，此掩码数组的形状为(2,)，这是允许的，含义是沿待索引二维数组的0轴进行元素过滤选取，具体的，此处表示第一行符合条件，而第二行不符合条件</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>,[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">True</span>]] <span class="comment">#以逗号间隔不同维度的索引，其中第0维是（单个）数值索引，第1维是（一维）布尔索引，如果改成a[[True,True],[True,False,False,False,True]]，结果是没意义的，尽管不会直接报错，因为布尔索引在不同维度上至多只能使用一次，再譬如改成a[[0,1],[True,False,False,False,True]]，返回array([0, 9])结果也是没意义的，第0维上其实是（一维）花式索引，和布尔索引不能混用</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="literal">True</span>,<span class="literal">False</span>]][:,[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">True</span>]] <span class="comment">#如果要对不同维度分别进行布尔索引，应像这样使用，交换顺序也正确，a[:,[True,False,False,False,True]][[True,False]]</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.array([[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>],[<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>]])] <span class="comment">#待索引数组形状为(2,3,4)，布尔掩码数组形状是(2,3)，这是允许的，表示沿着0轴和1轴构成的“面”进行过滤，过滤出的元素是长度为4的一维数组，过滤出的元素将被放在一个一维数组中，因此返回的结果将是(n,4)形状的，其中n是过滤出的元素个数</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">       [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>],[<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>]]] <span class="comment">#同上，只不过掩码数组是list类型，此时出错，而之前如一维的布尔掩码数组则允许是list类型，有点莫名</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: boolean index did <span class="keyword">not</span> <span class="keyword">match</span> indexed array along dimension <span class="number">0</span>; dimension <span class="keyword">is</span> <span class="number">2</span> but corresponding boolean dimension <span class="keyword">is</span> <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="literal">True</span>,<span class="literal">True</span>],:,[<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>]] <span class="comment">#注意这是一个错误示例，输出不符合预期（因为一维布尔索引只能出现一次，不能出现在多个维度上），按理说，由于数组a轴0长度为2，该索引应该相当于a[...,[True,True,False,False]]，观察输出，后者正常</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">13</span>, <span class="number">17</span>, <span class="number">21</span>]])</span><br></pre></td></tr></table></figure><p>使用布尔索引可以“较为方便”地操作“表”结构（其实就是二维或三维的numpy数组，三维即表示“多层叠加的表”），为此，还需要准备有字段数组，用于标识“表”不同维度所代表的信息，譬如下面我们预备构建一个(2,3,3)形的三维数组，其中(3,3)的子数组记录的是所有3个学生3门科目的成绩信息，第0维的2表示期中和期末两个阶段的成绩，另构建三个字段数组，第一个表示“时间”维度信息，第二个表示“学生”维度信息，第三个表示“科目”维度信息：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;学生成绩单</span></span><br><span class="line"><span class="string">                            语文      数学    英语</span></span><br><span class="line"><span class="string">期中：Daiyang：  80       78      70</span></span><br><span class="line"><span class="string">            Muggle:      90       82      86</span></span><br><span class="line"><span class="string">            Huamulan:   87       78      83</span></span><br><span class="line"><span class="string">期末：Daiyang：  78       76      85</span></span><br><span class="line"><span class="string">            Muggle:      88       91      79</span></span><br><span class="line"><span class="string">            Huamulan:   92       89      90</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">scores=np.array([[[<span class="number">80</span>,<span class="number">78</span>,<span class="number">70</span>],[<span class="number">90</span>,<span class="number">82</span>,<span class="number">86</span>],[<span class="number">87</span>,<span class="number">78</span>,<span class="number">83</span>]],</span><br><span class="line">                 [[<span class="number">78</span>,<span class="number">76</span>,<span class="number">85</span>],[<span class="number">88</span>,<span class="number">91</span>,<span class="number">79</span>],[<span class="number">92</span>,<span class="number">89</span>,<span class="number">90</span>]]])</span><br><span class="line"></span><br><span class="line">periods=np.array([<span class="string">&#x27;Midterm&#x27;</span>,<span class="string">&#x27;Endterm&#x27;</span>])</span><br><span class="line">names=np.array([<span class="string">&#x27;Daiyang&#x27;</span>,<span class="string">&#x27;Muggle&#x27;</span>,<span class="string">&#x27;Huamulan&#x27;</span>])</span><br><span class="line">subjects=np.array([<span class="string">&#x27;Chinese&#x27;</span>,<span class="string">&#x27;Math&#x27;</span>,<span class="string">&#x27;English&#x27;</span>])</span><br></pre></td></tr></table></figure><p>要获取Muggle期中的三科成绩：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[periods==<span class="string">&#x27;Midterm&#x27;</span>].squeeze()[names==<span class="string">&#x27;Muggle&#x27;</span>]</span><br><span class="line">array([[<span class="number">90</span>, <span class="number">82</span>, <span class="number">86</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[periods==<span class="string">&#x27;Midterm&#x27;</span>][:,names==<span class="string">&#x27;Muggle&#x27;</span>] <span class="comment">#这种方式看起来更好一点</span></span><br><span class="line">array([[[<span class="number">90</span>, <span class="number">82</span>, <span class="number">86</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[:,names==<span class="string">&#x27;Muggle&#x27;</span>][periods==<span class="string">&#x27;Midterm&#x27;</span>] <span class="comment">#交换顺序也正确</span></span><br><span class="line">array([[[<span class="number">90</span>, <span class="number">82</span>, <span class="number">86</span>]]])</span><br></pre></td></tr></table></figure><p>要获取所有人的期末英语成绩：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[periods==<span class="string">&#x27;Endterm&#x27;</span>][:,:,subjects==<span class="string">&#x27;English&#x27;</span>]</span><br><span class="line">array([[[<span class="number">85</span>],</span><br><span class="line">        [<span class="number">79</span>],</span><br><span class="line">        [<span class="number">90</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[...,subjects==<span class="string">&#x27;English&#x27;</span>][periods==<span class="string">&#x27;Endterm&#x27;</span>]</span><br><span class="line">array([[[<span class="number">85</span>],</span><br><span class="line">        [<span class="number">79</span>],</span><br><span class="line">        [<span class="number">90</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[periods==<span class="string">&#x27;Endterm&#x27;</span>].squeeze().T[subjects==<span class="string">&#x27;English&#x27;</span>]</span><br><span class="line">array([[<span class="number">85</span>, <span class="number">79</span>, <span class="number">90</span>]])</span><br></pre></td></tr></table></figure><p>要获取Muggle期中期末的数学成绩：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[:,names==<span class="string">&#x27;Muggle&#x27;</span>][...,subjects==<span class="string">&#x27;Math&#x27;</span>]</span><br><span class="line">array([[[<span class="number">82</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">91</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores.swapaxes(<span class="number">0</span>,<span class="number">1</span>)[names==<span class="string">&#x27;Muggle&#x27;</span>].squeeze().T[subjects==<span class="string">&#x27;Math&#x27;</span>]</span><br><span class="line">array([[<span class="number">82</span>, <span class="number">91</span>]])</span><br></pre></td></tr></table></figure><p>要获取Daiyang和Huamulan期末的语文成绩：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[periods==<span class="string">&#x27;Endterm&#x27;</span>][:,(names==<span class="string">&#x27;Daiyang&#x27;</span>)|(names==<span class="string">&#x27;Huamulan&#x27;</span>)][...,subjects==<span class="string">&#x27;Chinese&#x27;</span>]</span><br><span class="line">array([[[<span class="number">78</span>],</span><br><span class="line">        [<span class="number">92</span>]]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>花式索引</span></div><div class="hide-content"><p>何为花式索引？设待索引数组<code>a</code>为二维，给定两个整数序列<code>s1</code>和<code>s2</code>，含义上，<code>s1</code>选中了二维数组中的某些行，<code>s2</code>选中了二维数组中的某些列，现要获取这些行列交线的交点所在位置的元素，这就是花式索引，很简单，通过<code>a[np.ix_(s1,s2)]</code>即可获得，所得结果数组形状为<code>(len(s1),len(s2))</code>，换句话说，这两个整数序列<code>s1</code>和<code>s2</code>的笛卡尔积就是将要定位的全部元素的二维位置坐标，再譬如三维数组的花式索引，给定三个整数序列<code>s1</code>、<code>s2</code>、<code>s3</code>，这三个整数序列的笛卡尔积就是将要定位的全部元素的三维位置坐标，可以通过<code>a[np.ix_(s1,s2,s3)]</code>快速获取，返回的数组形状显然就是<code>(len(s1),len(s2),len(s3))</code>，事实上，对于任意一个待索引的<code>n</code>维数组，传入<code>np.ix_()</code>的整数序列数量≤<code>n</code>即可，仍以三维待索引数组<code>a</code>为例（将其视为由诸多一维数组元素构成的二维数组，数组元素<code>a[i][j]</code>即是一个一维数组），<code>a[np.ix_(s1,s2)]</code>表示在轴0和轴1构成的“面”上进行花式索引，由于索引的元素本身就是一维数组，因此该花式索引将返回三维数组，形状为<code>(len(s1),len(s2),a.shape[2])</code>，特别地，当传入<code>np.ix_()</code>的整数序列数量为1时，表示特殊的一维花式索引（由于<code>np.ix_(s,)</code>将返回<code>s</code>本身，所以一维花式索引<code>a[np.ix_(s,)]</code>可以简写成<code>a[s]</code>），此时可以以逗号间隔不同的维度，但是只能在其中一个维度上使用（一维）花式索引，其可以和（单个）数值索引、切片索引混用，和全坐标索引自然不能混用，另外也不能和（一维）布尔索引混用，否则结果错误（整体十分类似于上面介绍的布尔索引）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.ix_([<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">3</span>])]</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[np.ix_([<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>],[<span class="number">1</span>,<span class="number">3</span>])]</span><br><span class="line">array([[[ <span class="number">5</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">17</span>, <span class="number">19</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[np.ix_([<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>])] <span class="comment">#在三维数组轴0和轴1构成的“面”上进行花式索引</span></span><br><span class="line">array([[[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(b,<span class="number">1</span>,<span class="number">3</span>)[np.ix_([<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>])] <span class="comment">#如果要在轴0和轴2构成的“面”上进行花式索引的话，需要先变换数组的轴，使原来的轴2滚动到轴1的位置上</span></span><br><span class="line">array([[[ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">7</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">14</span>, <span class="number">18</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">19</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.ix_([<span class="number">0</span>,<span class="number">2</span>])]</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">0</span>,<span class="number">2</span>]] <span class="comment">#同上，因为np.ix_([0,2])将返回np.array([0,2])，其实也就是[0,2]。这是一维花式索引，允许以逗号为间隔指定多个维度的索引方式，其等同于a[[0,2],...]</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,[<span class="number">0</span>,<span class="number">2</span>]] <span class="comment">#一维花式索引可以和切片索引混用</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">8</span>, <span class="number">10</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,[<span class="number">0</span>,<span class="number">2</span>]] <span class="comment">#一维花式索引可以和（单个）数值索引混用</span></span><br><span class="line">array([<span class="number">4</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[:,<span class="number">1</span>,[<span class="number">0</span>,<span class="number">3</span>]] <span class="comment">#同上</span></span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">7</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">19</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[[<span class="number">0</span>,<span class="number">1</span>],:,[<span class="number">0</span>,<span class="number">1</span>]] <span class="comment">#注意这是一个错误示例，输出不符合预期（因为一维花式索引只能出现一次，不能出现在多个维度上），按理说，由于数组b轴0长度为2，此处不应该相当于b[...,[0,1]]么？观察两者输出，后者正常</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">13</span>, <span class="number">17</span>, <span class="number">21</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>笛卡尔积计算</span></div><div class="hide-content"><p>废话不多说，直接看代码吧：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;任意数量的序列的笛卡尔积，递归法求解</span></span><br><span class="line"><span class="string">编写思路：</span></span><br><span class="line"><span class="string">1.函数返回的是什么？返回的形式总为：[(),(),...,()]</span></span><br><span class="line"><span class="string">2.一般步骤是什么？对于N个序列的“笛卡尔积”，只要求出前N-1个，其结果记为t（形如[(),(),...,()]，设其长度为s），那么与第N个序列（[e0,e1,...,en]）再做一次“笛卡尔积”的结果将为：[(*t[0],e0),...,(*t[s],e0),(*t[0],e1),...,(*t[s],e1),(*t[0],e2),...,(*t[s],e2),......,(*t[0],en),...,(*t[s],en)]</span></span><br><span class="line"><span class="string">3.递归的终点是什么（问题分解的最小规模）？只有一个序列（记为seq）的“笛卡尔积”，返回结果就是：[(e,) for e in seq]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cross_product</span>(<span class="params">*arrs</span>):</span><br><span class="line">    ret=[]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arrs)==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> [(i,) <span class="keyword">for</span> i <span class="keyword">in</span> arrs[<span class="number">0</span>]]</span><br><span class="line">    t=cross_product(*arrs[:-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> t:</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> arrs[-<span class="number">1</span>]:</span><br><span class="line">            ret.append((*i,j))</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cross_product([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])) <span class="comment">#个数3</span></span><br><span class="line"><span class="built_in">print</span>(cross_product([<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])) <span class="comment">#个数2*3=6</span></span><br><span class="line"><span class="built_in">print</span>(cross_product([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])) <span class="comment">#个数3*3*3=27</span></span><br></pre></td></tr></table></figure></div></div>特别地，<code>np.ix_()</code>还允许接收布尔型序列<code>boolean_sequence</code>，它将被自动转化为<code>np.nonzero(boolean_sequence))</code>，也就是序列中为真值<code>True</code>的下标，还是以之前的“学生成绩单”为案例，再要获取Muggle期中的三科成绩：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[np.ix_(periods==<span class="string">&#x27;Midterm&#x27;</span>,names==<span class="string">&#x27;Muggle&#x27;</span>)]</span><br><span class="line">array([[[<span class="number">90</span>, <span class="number">82</span>, <span class="number">86</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[np.ix_(periods==<span class="string">&#x27;Midterm&#x27;</span>,names==<span class="string">&#x27;Muggle&#x27;</span>,subjects==<span class="string">&#x27;Math&#x27;</span>)] <span class="comment">#进一步获取Muggle的期中数学成绩</span></span><br><span class="line">array([[[<span class="number">82</span>]]])</span><br></pre></td></tr></table></figure>再要获取所有人的期末英语成绩：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(scores,<span class="number">1</span>,<span class="number">3</span>)[np.ix_(periods==<span class="string">&#x27;Endterm&#x27;</span>,subjects==<span class="string">&#x27;English&#x27;</span>)]</span><br><span class="line">array([[[<span class="number">85</span>, <span class="number">79</span>, <span class="number">90</span>]]])</span><br></pre></td></tr></table></figure>掌握技巧就会很容易写：将要进行条件选择的字段提前，不需要的一律置后，譬如上面的例子，<code>periods</code>和<code>subjects</code>两个字段需要进行条件选择，而<code>names</code>字段（“所有人”嘛）不需要，因此将<code>names</code>字段滚动到最后一个轴位置处，其他两个字段也就相对提前了，再举个例子，要获取Muggle的所有成绩，只有<code>names</code>字段需要条件选择，因此只需要将该字段提到最前即可：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(scores,<span class="number">1</span>)[np.ix_(names==<span class="string">&#x27;Muggle&#x27;</span>)] <span class="comment">#或np.rollaxis(scores,1)[names==&#x27;Muggle&#x27;]</span></span><br><span class="line">array([[[<span class="number">90</span>, <span class="number">82</span>, <span class="number">86</span>],</span><br><span class="line">        [<span class="number">88</span>, <span class="number">91</span>, <span class="number">79</span>]]])</span><br></pre></td></tr></table></figure>再要获取Muggle期中期末的数学成绩：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rollaxis(scores,<span class="number">0</span>,<span class="number">3</span>)[np.ix_(names==<span class="string">&#x27;Muggle&#x27;</span>,subjects==<span class="string">&#x27;Math&#x27;</span>)]</span><br><span class="line">array([[[<span class="number">82</span>, <span class="number">91</span>]]])</span><br></pre></td></tr></table></figure>再要获取Daiyang和Huamulan期末的语文成绩：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores[np.ix_(periods==<span class="string">&#x27;Endterm&#x27;</span>,(names==<span class="string">&#x27;Daiyang&#x27;</span>)|(names==<span class="string">&#x27;Huamulan&#x27;</span>),subjects==<span class="string">&#x27;Chinese&#x27;</span>)]</span><br><span class="line">array([[[<span class="number">78</span>],</span><br><span class="line">        [<span class="number">92</span>]]])</span><br></pre></td></tr></table></figure><p>最后再看一种特殊的（一维）花式索引，在上述一维花式索引使用的基础上，譬如<code>a[s]</code>，其中<code>s</code>是一个一维序列，事实上，<code>s</code>可以reshape成任意形状（必须是<code>ndarray</code>对象），此时<code>a[s]</code>返回的结果相当于<code>t=a[s.flatten()];a[s]=t.reshape(*s.shape,*t.shape[1:])</code>，再譬如<code>a[:,s]</code>的返回结果相当于<code>t=a[:,s.flatten()];a[:,s]=t.reshape(*t.shape[:-1],*s.shape)</code>，看个示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.array([[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>]])]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=np.array([[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>]]);t=a[s.flatten()];t.reshape(*s.shape,*t.shape[<span class="number">1</span>:]) <span class="comment">#验证</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>]])]</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>]])]</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">5</span>,  <span class="number">4</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">        [<span class="number">10</span>,  <span class="number">9</span>,  <span class="number">8</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>]]);t=a[:,s.flatten()];t.reshape(*t.shape[:-<span class="number">1</span>],*s.shape) <span class="comment">#验证</span></span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">5</span>,  <span class="number">4</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">        [<span class="number">10</span>,  <span class="number">9</span>,  <span class="number">8</span>]]])</span><br></pre></td></tr></table></figure><p>看一个利用该原理的示例，构建循环队列：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">circular_queue</span>(<span class="params">arr</span>):</span><br><span class="line">    t=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="built_in">len</span>(arr)))</span><br><span class="line">    inds=<span class="built_in">list</span>(<span class="built_in">zip</span>(*[(t+t[:-<span class="number">1</span>])[i:] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t))]))</span><br><span class="line">    <span class="keyword">return</span> np.array(arr)[np.array(inds)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(circular_queue([<span class="number">4</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">7</span>]))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[[4 4 6 3 2 7]</span></span><br><span class="line"><span class="string"> [4 6 3 2 7 4]</span></span><br><span class="line"><span class="string"> [6 3 2 7 4 4]</span></span><br><span class="line"><span class="string"> [3 2 7 4 4 6]</span></span><br><span class="line"><span class="string"> [2 7 4 4 6 3]</span></span><br><span class="line"><span class="string"> [7 4 4 6 3 2]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="数组元素迭代">数组元素迭代</h2><div class="tabs" id="szysdd"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#szysdd-1"><code>np.nditer()</code></button></li><li class="tab"><button type="button" data-href="#szysdd-2"><code>ndarray.flat</code></button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="szysdd-1"><div class="note blue simple"><p><code>np.nditer(a, order, flags, op_flags, ...)</code><br>函数说明：<br>对一个多维数组使用<code>for</code>循环迭代只能遍历第0维上的元素，要迭代所有元素，需使用<code>flatten()</code>等函数展平（一维化）数组，并且可以指定访问风格，行主序或列主序，numpy为我们提供了一个专门的函数<code>nditer()</code>，通过该函数将创建一个在多维数组上的元素迭代器<br>参数说明（部分）：</p><ul><li><code>order</code>：指定数组元素的迭代风格，行主序或列主序</li><li><code>flags</code>参数（部分）可取值（一个字符串序列，可以同时指定以下多个值）：<ul><li><code>c_index</code>：表示跟踪C顺序的索引（从0开始计数），索引值通过函数返回的迭代器的<code>index</code>属性获取，即便实际是以F风格（<code>order</code>参数）迭代数组元素，给出的也是C风格索引。注意<code>c_index</code>和<code>f_index</code>两者只能取其一</li><li><code>f_index</code>：表示跟踪F顺序的索引，同上</li><li><code>multi_index</code>：表示跟踪迭代元素的全（位置）坐标，通过函数返回的迭代器的<code>multi_index</code>属性获取</li><li><code>external_loop</code>（没懂）：其将多维数组<code>a</code>视为由诸多一维数组元素构成的数组，若指定<code>order='F'</code>，那么迭代次数将为<code>reduce(lambda x,y:x*y,a.shape[1:])</code>，此时第0维上的向量被视为单个元素，若指定<code>order='C'</code>，那么迭代次数将为1，访问的元素就是<code>np.flatten(a)</code>，一个一维数组，这有何用？</li></ul></li><li><code>op_flags</code>：默认取值<code>readonly</code>，即视待遍历的数组为只读对象，为了在遍历数组的同时实现对数组元素值的修改，需指定为<code>readwrite</code>或<code>writeonly</code></li></ul></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>元素迭代器的属性和方法</span></div><div class="hide-content"><p>函数所返回的迭代器上的（部分）属性和方法：</p><ul><li><code>finished</code>：判断元素是否迭代完毕，也可以通过迭代器对象的<code>iternext()</code>方法的返回值来判断</li><li><code>iterindex</code>：返回当前迭代位置处元素的索引，至于是C风格还是F风格由<code>order</code>参数决定</li><li><code>has_index</code>：如果返回<code>True</code>，表示迭代器是指定<code>c_index</code>或<code>f_index</code>标志（<code>flags</code>参数）创建的，此时属性<code>index</code>才是可获得的</li><li><code>index</code>：同<code>iterindex</code>，只不过具体的风格是由<code>flags</code>参数决定，且只有当<code>has_index</code>属性为<code>True</code>时，可以使用该属性，否则引发<code>ValueError</code>异常</li><li><code>has_multi_index</code>：如果返回<code>True</code>，表示迭代器是指定<code>multi_index</code>标志（<code>flags</code>参数）创建的，此时属性<code>multi_index</code>才是可获得的</li><li><code>multi_index</code>：返回当前迭代位置处元素的全坐标（即该元素在原始数组中的位置坐标），只有当<code>has_multi_index</code>属性为<code>True</code>时，可以使用该属性，否则引发<code>ValueError</code>异常</li><li><code>itersize</code>：返回迭代器中元素的个数（还有<code>ndim</code>和<code>shape</code>属性，我还没弄明白它们的输出，譬如<code>nditer(np.arange(12).reshape(3,-1),flags=['f_index']).shape</code>为什么是<code>(4,3)</code>，而将其中的<code>f_index</code>改成<code>c_index</code>输出又变成<code>(12,)</code>？）</li><li><code>iternext()</code>：表示执行一次内部迭代，但不返回迭代元素，只返回<code>True</code>或<code>False</code>，用于判断当前迭代器是否已尽，返回<code>False</code>表示没有元素可供迭代了（继续执行<code>iternext()</code>方法仍会返回<code>False</code>，调用<code>iterable[0]</code>则会出错，除非调用<code>reset()</code>方法重置状态以从头开始迭代），而要获取当前迭代位置处的元素，可以通过下标0索引该迭代器（即<code>iterator[0]</code>，事实上，你可以使用<code>nditer()</code>并行迭代多个多维数组对象，于是第二个多维数组的元素可以通过<code>iterable[1]</code>获取，以此类推。注意在使用<code>nditer()</code>创建迭代器后，立即就可调用<code>iterable[0]</code>来获取第一个迭代元素，而无需先调用<code>iternext()</code>方法）的方式获取。除了使用<code>iternext()</code>，常规的迭代方法则是使用<code>for</code>循环遍历迭代器（自动调用迭代器对象的<code>__next__()</code>方法），当然也可以手动调用<code>__next__()</code>方法（此时需自行捕捉<code>StopIteration</code>异常）</li><li><code>reset()</code>：重置迭代器的状态</li><li><code>copy()</code>：返回迭代器在当前状态下的一个副本</li></ul></div></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### nditer() ###&#x27;</span>)</span><br><span class="line">a=np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>),order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.nditer(a,order=<span class="string">&#x27;C&#x27;</span>): <span class="comment">#默认order为&#x27;K&#x27;，其将会按照a的布局进行访问，打印0,1,2,3,4,5,</span></span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### read_write mode ###&#x27;</span>)</span><br><span class="line"><span class="comment">#读写模式</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.nditer(a,op_flags=(<span class="string">&#x27;readwrite&#x27;</span>,),order=<span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">    i*=<span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">#可以看到原始数组也已经被修改了</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### while+iternext() ###&#x27;</span>)</span><br><span class="line"><span class="comment">#通过while循环不断输出迭代器对象的索引属性值</span></span><br><span class="line">a=np.array([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>]).reshape((<span class="number">2</span>,<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">it=np.nditer(a,flags=[<span class="string">&#x27;f_index&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(it.ndim,it.shape,it.itersize)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> it.finished:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[F]index-%d: %d [C]index-%d&quot;</span> % (it.index,it[<span class="number">0</span>],it.iterindex)) <span class="comment">#index属性跟踪F顺序的索引，即使当前实际是以C风格访问数组元素</span></span><br><span class="line">    it.iternext()</span><br><span class="line">it=np.nditer(a,flags=[<span class="string">&#x27;multi_index&#x27;</span>])</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> it.finished:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;index-%s: %d&quot;</span> % (it.multi_index,it[<span class="number">0</span>])) <span class="comment">#全位置坐标</span></span><br><span class="line">    it.iternext()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### external_loop ###&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.nditer(a,flags=[<span class="string">&#x27;external_loop&#x27;</span>],order=<span class="string">&#x27;F&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.nditer(a,flags=[<span class="string">&#x27;external_loop&#x27;</span>],order=<span class="string">&#x27;C&#x27;</span>): <span class="comment">#有什么用？</span></span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### copy() ###&#x27;</span>)</span><br><span class="line">it=np.nditer(np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(it.__next__())</span><br><span class="line"><span class="built_in">print</span>(it.__next__())</span><br><span class="line">it2=it.copy() <span class="comment">#副本保存了原件的状态</span></span><br><span class="line"><span class="built_in">print</span>(it2.__next__())</span><br><span class="line"><span class="built_in">print</span>(it.__next__())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;### return of iternext() ###&#x27;</span>)</span><br><span class="line">it=np.nditer(np.array([<span class="number">12</span>,<span class="number">13</span>]))</span><br><span class="line"><span class="built_in">print</span>(it.iternext())</span><br><span class="line"><span class="built_in">print</span>(it.__next__())</span><br><span class="line"><span class="built_in">print</span>(it.iternext())</span><br><span class="line"><span class="built_in">print</span>(it.iternext())</span><br><span class="line"><span class="built_in">print</span>(it.iternext())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">### nditer() ###</span></span><br><span class="line"><span class="string">[[0 2 4]</span></span><br><span class="line"><span class="string"> [1 3 5]]</span></span><br><span class="line"><span class="string">0,2,4,1,3,5,</span></span><br><span class="line"><span class="string">### read_write mode ###</span></span><br><span class="line"><span class="string">0,4,8,2,6,10,</span></span><br><span class="line"><span class="string">[[ 0  4  8]</span></span><br><span class="line"><span class="string"> [ 2  6 10]]</span></span><br><span class="line"><span class="string">### while+iternext() ###</span></span><br><span class="line"><span class="string">[[[1 3]</span></span><br><span class="line"><span class="string">  [5 7]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[2 4]</span></span><br><span class="line"><span class="string">  [6 8]]]</span></span><br><span class="line"><span class="string">3 (2, 2, 2) 8</span></span><br><span class="line"><span class="string">[F]index-0: 1 [C]index-0</span></span><br><span class="line"><span class="string">[F]index-4: 3 [C]index-1</span></span><br><span class="line"><span class="string">[F]index-2: 5 [C]index-2</span></span><br><span class="line"><span class="string">[F]index-6: 7 [C]index-3</span></span><br><span class="line"><span class="string">[F]index-1: 2 [C]index-4</span></span><br><span class="line"><span class="string">[F]index-5: 4 [C]index-5</span></span><br><span class="line"><span class="string">[F]index-3: 6 [C]index-6</span></span><br><span class="line"><span class="string">[F]index-7: 8 [C]index-7</span></span><br><span class="line"><span class="string">index-(0, 0, 0): 1</span></span><br><span class="line"><span class="string">index-(0, 0, 1): 3</span></span><br><span class="line"><span class="string">index-(0, 1, 0): 5</span></span><br><span class="line"><span class="string">index-(0, 1, 1): 7</span></span><br><span class="line"><span class="string">index-(1, 0, 0): 2</span></span><br><span class="line"><span class="string">index-(1, 0, 1): 4</span></span><br><span class="line"><span class="string">index-(1, 1, 0): 6</span></span><br><span class="line"><span class="string">index-(1, 1, 1): 8</span></span><br><span class="line"><span class="string">### external_loop ###</span></span><br><span class="line"><span class="string">[1 2],[5 6],[3 4],[7 8],</span></span><br><span class="line"><span class="string">[1 3 5 7 2 4 6 8],</span></span><br><span class="line"><span class="string">### copy() ###</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">### return of iternext() ###</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">13</span></span><br><span class="line"><span class="string">False</span></span><br><span class="line"><span class="string">False</span></span><br><span class="line"><span class="string">False</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>并行迭代，如果两个数组是同形的（弱化条件为两者可以广播至同一形状），那么<code>nditer()</code>能够同时迭代它们：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a=np.arange(<span class="number">0</span>,<span class="number">60</span>,<span class="number">5</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">b=np.array([<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment">#b（形状为(1,4)）可以广播至与a的相同形状(3,4)</span></span><br><span class="line"><span class="keyword">for</span> ia,ib <span class="keyword">in</span> np.nditer([a,b]):</span><br><span class="line">    <span class="built_in">print</span>(ia,<span class="string">&#x27;,&#x27;</span>,ib)</span><br><span class="line"></span><br><span class="line">it=np.nditer([a,b],flags=[<span class="string">&#x27;multi_index&#x27;</span>])</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> it.finished:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;pos:<span class="subst">&#123;it.multi_index&#125;</span>,item(a):<span class="subst">&#123;it[<span class="number">0</span>]&#125;</span>,item(b):<span class="subst">&#123;it[<span class="number">1</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">    it.iternext()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[[ 0  5 10 15]</span></span><br><span class="line"><span class="string"> [20 25 30 35]</span></span><br><span class="line"><span class="string"> [40 45 50 55]]</span></span><br><span class="line"><span class="string">[1 2 3 4]</span></span><br><span class="line"><span class="string">0 , 1</span></span><br><span class="line"><span class="string">5 , 2</span></span><br><span class="line"><span class="string">10 , 3</span></span><br><span class="line"><span class="string">15 , 4</span></span><br><span class="line"><span class="string">20 , 1</span></span><br><span class="line"><span class="string">25 , 2</span></span><br><span class="line"><span class="string">30 , 3</span></span><br><span class="line"><span class="string">35 , 4</span></span><br><span class="line"><span class="string">40 , 1</span></span><br><span class="line"><span class="string">45 , 2</span></span><br><span class="line"><span class="string">50 , 3</span></span><br><span class="line"><span class="string">55 , 4</span></span><br><span class="line"><span class="string">pos:(0, 0),item(a):0,item(b):1</span></span><br><span class="line"><span class="string">pos:(0, 1),item(a):5,item(b):2</span></span><br><span class="line"><span class="string">pos:(0, 2),item(a):10,item(b):3</span></span><br><span class="line"><span class="string">pos:(0, 3),item(a):15,item(b):4</span></span><br><span class="line"><span class="string">pos:(1, 0),item(a):20,item(b):1</span></span><br><span class="line"><span class="string">pos:(1, 1),item(a):25,item(b):2</span></span><br><span class="line"><span class="string">pos:(1, 2),item(a):30,item(b):3</span></span><br><span class="line"><span class="string">pos:(1, 3),item(a):35,item(b):4</span></span><br><span class="line"><span class="string">pos:(2, 0),item(a):40,item(b):1</span></span><br><span class="line"><span class="string">pos:(2, 1),item(a):45,item(b):2</span></span><br><span class="line"><span class="string">pos:(2, 2),item(a):50,item(b):3</span></span><br><span class="line"><span class="string">pos:(2, 3),item(a):55,item(b):4</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szysdd-2"><p>该属性返回多维数组的元素迭代器（一个<code>flatiter</code>对象，由于是迭代器对象，用完即弃），遵循C风格，也可以作为一个一维数组“视图”使用，支持切片索引、花式索引等，<code>flatiter</code>对象上有一个<code>copy()</code>方法将其转为（一维的）<code>ndarray</code>对象（深拷贝），其还有三个主要属性：</p><ul><li><code>base</code>：返回<code>flatiter</code>对象的原始数组引用</li><li><code>index</code>：返回当前迭代元素的索引（从0开始计数）</li><li><code>coords</code>：返回当前迭代元素在原数组中的全坐标</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a=np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line">b=a.flat</span><br><span class="line"><span class="built_in">print</span>(b.base <span class="keyword">is</span> a)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> b:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;元素:&#x27;</span>,i,<span class="string">&#x27;索引:&#x27;</span>,b.index,<span class="string">&#x27;位置坐标:&#x27;</span>,b.coords)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">元素: 0 索引: 1 位置坐标: (0, 1)</span></span><br><span class="line"><span class="string">元素: 1 索引: 2 位置坐标: (0, 2)</span></span><br><span class="line"><span class="string">元素: 2 索引: 3 位置坐标: (0, 3)</span></span><br><span class="line"><span class="string">元素: 3 索引: 4 位置坐标: (0, 4)</span></span><br><span class="line"><span class="string">元素: 4 索引: 5 位置坐标: (1, 0)</span></span><br><span class="line"><span class="string">元素: 5 索引: 6 位置坐标: (1, 1)</span></span><br><span class="line"><span class="string">元素: 6 索引: 7 位置坐标: (1, 2)</span></span><br><span class="line"><span class="string">元素: 7 索引: 8 位置坐标: (1, 3)</span></span><br><span class="line"><span class="string">元素: 8 索引: 9 位置坐标: (1, 4)</span></span><br><span class="line"><span class="string">元素: 9 索引: 10 位置坐标: (2, 0)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>上述输出不正确，这里不建议通过<code>for</code>循环的方式去获取索引或坐标，因为<code>flatiter</code>只有调用一次<code>__next__()</code>方法后才能获取到（第一个）迭代元素，而调用后其<code>index</code>和<code>coords</code>属性又会立即更新（变成第二个迭代元素的索引和坐标），因此必须在<code>next()</code>前获取<code>index</code>和<code>coords</code>，<code>for</code>循环无法控制<code>next()</code>调用的时机，因此可以通过<code>while</code>方式并手动调用<code>next()</code>迭代元素：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> count</span><br><span class="line">a=np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line">b=a.flat</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> count():</span><br><span class="line">    s=<span class="string">f&#x27;<span class="subst">&#123;b.index&#125;</span>,<span class="subst">&#123;b.coords&#125;</span>&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(s,b.__next__())</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">0,(0, 0) 0</span></span><br><span class="line"><span class="string">1,(0, 1) 1</span></span><br><span class="line"><span class="string">2,(0, 2) 2</span></span><br><span class="line"><span class="string">3,(0, 3) 3</span></span><br><span class="line"><span class="string">4,(0, 4) 4</span></span><br><span class="line"><span class="string">5,(1, 0) 5</span></span><br><span class="line"><span class="string">6,(1, 1) 6</span></span><br><span class="line"><span class="string">7,(1, 2) 7</span></span><br><span class="line"><span class="string">8,(1, 3) 8</span></span><br><span class="line"><span class="string">9,(1, 4) 9</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><code>ndarray.flat</code>本身也可以作为展平后的一维数组“视图”使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a=np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a.flat[[<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>]]) <span class="comment">#对一维数组的花式索引</span></span><br><span class="line">a.flat[[<span class="number">3</span>,<span class="number">6</span>]]=<span class="number">55</span> <span class="comment">#对“视图”的修改将影响原数组</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.flat.copy()[<span class="number">0</span>]=<span class="number">78</span> <span class="comment">#copy()深复制，不影响原数组</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.flat=[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">200</span>)] <span class="comment">#可以将一个一维数组或列表赋给flat属性（长度不一致时会自动截取前n项），这常用于一个多维数组元素的修改</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[[0 1 2 3 4]</span></span><br><span class="line"><span class="string"> [5 6 7 8 9]]</span></span><br><span class="line"><span class="string">[2 5 7]</span></span><br><span class="line"><span class="string">[[ 0  1  2 55  4]</span></span><br><span class="line"><span class="string"> [ 5 55  7  8  9]]</span></span><br><span class="line"><span class="string">[[ 0  1  2 55  4]</span></span><br><span class="line"><span class="string"> [ 5 55  7  8  9]]</span></span><br><span class="line"><span class="string">[[100 101 102 103 104]</span></span><br><span class="line"><span class="string"> [105 106 107 108 109]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="广播机制">广播机制</h2><div class="tabs" id="gbjz"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#gbjz-1"><code>np.broadcast()</code></button></li><li class="tab"><button type="button" data-href="#gbjz-2"><code>np.broadcast_to()</code></button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="gbjz-1"><p>广播机制是处理不同维度数组间操作的一个非常重要的手段，要知道两个不同的多维数组能够进行操作的基本条件是其形状相同，当形状不同时，但符合广播的条件，则会自动对这两个或其中一个多维数组进行维度补齐并进行元素复制（补齐维数）<br>广播的规则：</p><ol><li>让所有输入数组都向其中维数最大（<code>shape</code>最长）的数组看齐，<code>shape</code>中不足的部分在前面加1补齐维度</li><li>输出数组的<code>shape</code>根据所有输入数组<code>shape</code>的各个轴上的最大值得到</li><li>如果输入数组的某个轴和输出数组的对应轴的长度相同或者不同但其中一方长度为1时，这些输入数组被认为能够广播至输出数组的形状，即符合广播的条件，否则抛出异常</li><li>当输入数组的某个轴的长度为1且输出数组对应轴长大于1时，将沿着此轴复制第一个元素来进一步补齐维数</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">b1=np.arange(<span class="number">4</span>).reshape((-<span class="number">1</span>))</span><br><span class="line">b2=np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>,-<span class="number">1</span>))</span><br><span class="line">c1=a+b1 <span class="comment">#首先维度补齐：b1.reshape((1,1,4))，确定输出数组形状：(2,3,4)，判断能够进行广播，最后进行元素复制</span></span><br><span class="line">c2=a+b2 <span class="comment">#同上，维度补齐后得到b2.reshape((1,3,4))，输出数组形状仍是(2,3,4)，且符合广播的条件</span></span><br><span class="line"></span><br><span class="line">a=np.arange(<span class="number">8</span>).reshape((<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>))</span><br><span class="line">b=np.arange(<span class="number">12</span>).reshape((<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,-<span class="number">1</span>))</span><br><span class="line">c=a+b <span class="comment">#a补齐维度a.reshape((1,1,2,1,4))，b补齐维度b.reshape((1,1,1,3,4))，再确定输出数组形状(1,1,2,3,4)，显然也符合广播条件</span></span><br></pre></td></tr></table></figure><div class="note blue simple"><p><code>np.broadcast(*arrs)</code><br>函数说明：<br>函数可以接受任意数量（设为<code>n</code>）的输入数组，并产生基于这些输入数组的“广播对象”作为函数返回值，这个广播对象有一些属性和方法，其中<code>shape</code>和<code>ndim</code>（或<code>nd</code>）分别获取经广播机制作用后的输出数组的形状和维数，而<code>iters</code>属性返回一个长度为<code>n</code>（数量可由<code>numiter</code>属性获取）的由诸多<code>flatiter</code>对象构成的元组，这些<code>flatiter</code>（用完即弃）分别代表那些输入数组经广播（维度补齐和元素复制）后的数据内容，此外，广播对象本身也是一个迭代器（用完即弃），相当于并行迭代前面的<code>flatiter</code>对象，为了复用广播对象，其有一个<code>reset()</code>方法能够重置初始的迭代状态</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>broadcast_obj=np.broadcast(x,y) <span class="comment">#两个输入数组x和y的形状分别为(3,1)和(5,)，于是输出数组的形状可以确定为(3,5)，并且符合广播条件，于是x和y分别沿着第1轴和第0轴按列复制和按行复制元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(broadcast_obj)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;numpy.broadcast&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>broadcast_obj.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>broadcast_obj.nd</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b=broadcast_obj.iters</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(a)</span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(b) <span class="comment">#之后再执行list(a)或list(b)只会得到空列表[]，除非执行重置reset()</span></span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>broadcast_obj.reset()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[(i,j) <span class="keyword">for</span> i,j <span class="keyword">in</span> broadcast_obj]</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">1</span>, <span class="number">5</span>), (<span class="number">1</span>, <span class="number">6</span>), (<span class="number">1</span>, <span class="number">7</span>), (<span class="number">1</span>, <span class="number">8</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">6</span>), (<span class="number">2</span>, <span class="number">7</span>), (<span class="number">2</span>, <span class="number">8</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>), (<span class="number">3</span>, <span class="number">7</span>), (<span class="number">3</span>, <span class="number">8</span>)]</span><br></pre></td></tr></table></figure>手动实现两个多维数组的相加操作：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x+y</span><br><span class="line">array([[ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bo=np.broadcast(x,y)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=np.empty(bo.shape,dtype=<span class="string">&#x27;i4&#x27;</span>) <span class="comment">#创建一个空的结果数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.flat=[x+y <span class="keyword">for</span> i,j <span class="keyword">in</span> bo]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">array([[ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gbjz-2"><div class="note blue simple"><p><code>np.broadcast_to(array, shape, subok=False)</code><br>函数说明：<br>用于将一个数组广播至一个指定的形状</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.broadcast_to(np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]),(<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.broadcast_to(np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]),(<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="数组拼接与分割">数组拼接与分割</h2><div class="tabs" id="szdd"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#szdd-1">数组拼接</button></li><li class="tab"><button type="button" data-href="#szdd-2">数组分割</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="szdd-1"><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.concatenate()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.concatenate((a1, a2, ...), axis=0, out=None)</code><br>函数说明：<br>用于沿指定轴（<code>axis</code>）连接多个数组对象（<code>a1</code>，<code>a2</code>，…），<code>a1</code>、<code>a2</code>等数组的形状完全相同固然最好（此时，可以沿任意轴进行连接），即使不相同，也必须满足“除了将要连接的那个轴的长度可以不一致外，其余轴长必须完全相同”的条件（举例：<code>shape1=(2,3,4,5)</code>，<code>shape2=(2,3,7,5)</code>，则连接轴只能设为2轴，否则出错，且显然输出形状为<code>(2,3,11,5)</code>），特别地，<code>axis</code>置为<code>None</code>时，<code>a1</code>、<code>a2</code>等数组首先会被“展平”（一维化）开来，然后沿0轴连接，<code>out</code>参数指定结果存放的数组</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]) <span class="comment">#形状为(2,2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array([[<span class="number">5</span>,<span class="number">6</span>]]) <span class="comment">#形状为(1,2)，显然这两个数组只能沿第0轴连接</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a,b),axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a,b),axis=<span class="literal">None</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a,b.T),axis=<span class="number">1</span>) <span class="comment">#b转置后形状变为(2,1)，此时只能沿着第1轴连接</span></span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">24</span>,<span class="number">56</span>).reshape((<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>)) <span class="comment">#显然a和b只能沿着第1轴连接，输出数组形状为(2,7,4)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a,b),axis=<span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>],</span><br><span class="line">        [<span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>],</span><br><span class="line">        [<span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>],</span><br><span class="line">        [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">        [<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>],</span><br><span class="line">        [<span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>],</span><br><span class="line">        [<span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>],</span><br><span class="line">        [<span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>]]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.stack()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.stack(arrays, axis=0, out=None)</code><br>函数说明：<br>沿新轴堆叠数组。用于堆叠的各数组形状必须完全一致，注意<code>stack()</code>总是会增加一个维度（最简单的就是二维数组的堆叠，结果将变成三维数组），“新轴”由参数<code>axis</code>指定，<code>axis</code>的取值为<code>0~len(shape)+1</code>，若取值<code>len(shape)+1</code>表示在最后新增一个维度，譬如有两个待堆叠数组，形状为<code>(2,3,4)</code>，若指定<code>axis</code>为3，返回的新数组形状将为<code>(2,3,4,2)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">12</span>,<span class="number">24</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack((a,b))</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack((a,b),axis=<span class="number">2</span>)</span><br><span class="line">array([[[ <span class="number">0</span>, <span class="number">12</span>],</span><br><span class="line">        [ <span class="number">1</span>, <span class="number">13</span>],</span><br><span class="line">        [ <span class="number">2</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>, <span class="number">16</span>],</span><br><span class="line">        [ <span class="number">5</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">6</span>, <span class="number">18</span>],</span><br><span class="line">        [ <span class="number">7</span>, <span class="number">19</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>, <span class="number">20</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.vstack()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.vstack((a1,a2,...))</code><br>函数说明：<br>不同于<code>np.stack()</code>，<code>vstack()</code>垂直堆叠（不改变维数）总是沿着第0轴连接（<code>concatenate()</code>）多个数组，<code>a1</code>、<code>a2</code>等除0轴外其余轴长必须保持一致，之所以叫“垂直”堆叠，是假设<code>a1</code>、<code>a2</code>等都是二维数组时，第0轴正是那根垂直的轴，特别地，要对一维数组进行“垂直堆叠”，等同于<code>np.vstack((a1[None,:],a2[None,:],...))</code>，因此这些一维数组的长度必须相同（只有在这种特殊情况下，堆叠后的数组维数发生改变）</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack((a,b))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack((a[<span class="literal">None</span>,:],b[<span class="literal">None</span>,:]))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack((np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">4</span>),np.arange(<span class="number">4</span>).reshape(<span class="number">1</span>,<span class="number">4</span>)))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.row_stack()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.row_stack((a1,a2,...))</code><br>函数说明：<br>按行堆叠，等同于<code>np.vstack((a1,a2,...))</code></p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.hstack()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.hstack((a1,a2,...))</code><br>函数说明：<br>类似于<code>np.vstack()</code>，<code>hstack()</code>水平堆叠（不改变维数）总是沿着第1轴连接（<code>concatenate()</code>）多个数组，<code>a1</code>、<code>a2</code>等除1轴外其余轴长必须保持一致，特别地，要对一维数组进行“水平”堆叠，仍等同于<code>np.hstack((a1[None,:],a2[None,:],...))</code>，因此对这些一维数组的长度没有限制</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array((<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hstack((a,b))</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=np.arange(<span class="number">4</span>,<span class="number">10</span>).reshape(<span class="number">3</span>,<span class="number">2</span>,order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hstack((a[:,<span class="literal">None</span>],c))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.column_stack()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.column_stack((a1,a2,...))</code><br>函数说明：<br>按列堆叠，等同于<code>np.hstack((a1,a2,...))</code></p></div></div></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.dstack()</code></span></div><div class="hide-content"><p>类似于<code>np.vstack()</code>或<code>np.hstack()</code>，<code>dstack()</code>深度堆叠（不改变维数）总是沿着第2轴连接（<code>concatenate()</code>）多个数组，<code>a1</code>、<code>a2</code>等除2轴外其余轴长必须保持一致，特别地，要对一维数组进行“深度”堆叠，等同于<code>np.dstack((a1[None,:,None],a2[None,:,None],...))</code>，因此这些一维数组的长度必须相同（只有在这种特殊情况下，堆叠后的数组维数发生改变）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.dstack((a,b))</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>,  <span class="number">4</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>,  <span class="number">5</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>,  <span class="number">6</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">16</span>, <span class="number">17</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">19</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">10</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">3</span>,<span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.dstack((a,b))</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.dstack((a[<span class="literal">None</span>,:,<span class="literal">None</span>],b[<span class="literal">None</span>,:,<span class="literal">None</span>]))</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">5</span>]]])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szdd-2"><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.split()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.split(arr, indices_or_sections, axis=0)</code><br>函数说明：<br>用于沿指定的轴<code>axis</code>将数组分割为多个子数组。参数<code>indices_or_sections</code>可以是整数，也可以是一个整数列表，分别表示不同的切割方式，当为整数<code>n</code>时，沿指定轴<code>axis</code>将数组<code>arr</code>平均切割为<code>n</code>份，如果该轴长度不足以均分为<code>n</code>等份时，将抛出异常，当为整数列表时，其中每一个整数表示一处切割的位置，譬如<code>[2,5,7]</code>表示分别在轴长刻度为2、5、7处进行切割（并得到四个子数组），具体的，第一份从刻度0开始但不包括刻度2，第二份从刻度2开始但不包括刻度5，第三份从刻度5开始但不包括刻度7，最后一份从刻度7开始直至最后（有可能是空数组），特别地，如果指定的切割位置超出轴长，则返回空的子数组而不会报错</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(a,<span class="number">3</span>)</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">16</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(b,[<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>],axis=<span class="number">1</span>)</span><br><span class="line">[array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">8</span>, <span class="number">9</span>]]), array([[ <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]]), array([[ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">13</span>, <span class="number">14</span>]]), array([[ <span class="number">7</span>],</span><br><span class="line">       [<span class="number">15</span>]])]</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.vsplit()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.vsplit(arr, indices_or_sections)</code><br>函数说明：<br>垂直分割，特指沿0轴切割，注意不能对一维数组执行该操作（至少是二维）</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">8</span>).reshape((<span class="number">4</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vsplit(a,<span class="number">2</span>)</span><br><span class="line">[array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>]]), array([[<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>]])]</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.hsplit()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.hsplit(arr, indices_or_sections)</code><br>函数说明：<br>水平分割，特指沿1轴切割，特别地，要对一维数组进行“水平”切割，相当于但不完全等同于<code>np.hsplit(arr[None,:], indices_or_sections)</code>（此处返回的子数组是二维的），返回的子数组仍是一维的</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hsplit(np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>),[<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">[array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>]]), array([[<span class="number">2</span>],</span><br><span class="line">       [<span class="number">6</span>]]), array([[<span class="number">3</span>],</span><br><span class="line">       [<span class="number">7</span>]])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hsplit(np.arange(<span class="number">8</span>),<span class="number">4</span>)</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>]), array([<span class="number">2</span>, <span class="number">3</span>]), array([<span class="number">4</span>, <span class="number">5</span>]), array([<span class="number">6</span>, <span class="number">7</span>])]</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.dsplit()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.dsplit(arr, indices_or_sections)</code><br>函数说明：<br>深度分割，特指沿2轴切割，注意不对对一维或二维数组执行该操作（至少是三维）</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">4</span>,<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.dsplit(a,<span class="number">2</span>)</span><br><span class="line">[array([[[ <span class="number">0</span>],</span><br><span class="line">        [ <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">4</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">8</span>],</span><br><span class="line">        [<span class="number">10</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>],</span><br><span class="line">        [<span class="number">14</span>],</span><br><span class="line">        [<span class="number">16</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">18</span>],</span><br><span class="line">        [<span class="number">20</span>],</span><br><span class="line">        [<span class="number">22</span>]]]), array([[[ <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">9</span>],</span><br><span class="line">        [<span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">13</span>],</span><br><span class="line">        [<span class="number">15</span>],</span><br><span class="line">        [<span class="number">17</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">19</span>],</span><br><span class="line">        [<span class="number">21</span>],</span><br><span class="line">        [<span class="number">23</span>]]])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>].shape</span><br><span class="line">(<span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="数组增删改查">数组增删改查</h2><div class="tabs" id="szzsgc"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#szzsgc-1"><code>np.append()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-2"><code>np.delete()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-3"><code>np.insert()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-4"><code>np.unique()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-5"><code>np.sort()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-6"><code>np.max()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-7"><code>np.min()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-8"><code>np.sum()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-9"><code>np.cumprod()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-10"><code>np.nonzero()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-11"><code>np.where()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-12"><code>np.extract()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-13"><code>np.place()</code></button></li><li class="tab"><button type="button" data-href="#szzsgc-14"><code>np.partition()</code></button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="szzsgc-1"><div class="note blue simple"><p><code>np.append(arr, values, axis=None)</code><br>函数说明：<br>用于沿指定轴<code>axis</code>向数组中追加数据<code>values</code>（多维数组对象），该操作基本同<code>np.concatenate()</code>函数，要追加的子数组<code>values</code>的形状和<code>arr</code>的形状除<code>axis</code>轴长度可以不一致外，其余轴长必须一致，另外当<code>axis</code>置为<code>None</code>时（默认值），会将一维化的<code>arr</code>和<code>values</code>连接成一个一维数组并返回</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.append(np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>),np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>),axis=<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.append(np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>),np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>),axis=<span class="literal">None</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-2"><div class="note blue simple"><p><code>np.delete(arr, obj, axis=None)</code><br>函数说明：<br>用于沿指定轴<code>axis</code>删除特定位置处的子数组。<code>obj</code>参数可以是整数（指定要删除的刻度位置处的元素）、切片或整数列表（指定要删除的多个刻度对应位置处的元素），特别地，当<code>axis</code>置为<code>None</code>时（默认值），将会首先“展平”（一维化）<code>arr</code>数组</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr=np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],[<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,[<span class="number">0</span>,<span class="number">2</span>]) <span class="comment">#axis为None，则先展平再删除</span></span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,[<span class="number">0</span>,<span class="number">2</span>],axis=<span class="number">0</span>) <span class="comment">#沿着第0轴删除第0个元素和第2个元素</span></span><br><span class="line">array([[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,[<span class="number">0</span>,<span class="number">2</span>],axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,<span class="built_in">slice</span>(<span class="number">0</span>,<span class="number">2</span>),axis=<span class="number">0</span>)</span><br><span class="line">array([[ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,np.s_[:<span class="number">2</span>],axis=<span class="number">0</span>) <span class="comment">#这种切片方式更简便，效果同上</span></span><br><span class="line">array([[ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,np.s_[::],axis=<span class="number">1</span>) <span class="comment">#表示全部删除，返回一个空数组</span></span><br><span class="line">array([], shape=(<span class="number">3</span>, <span class="number">0</span>), dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,np.s_[::<span class="number">2</span>],axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.s_[::<span class="number">2</span>]</span><br><span class="line"><span class="built_in">slice</span>(<span class="literal">None</span>, <span class="literal">None</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr,np.ix_(np.<span class="built_in">max</span>(arr,axis=<span class="number">0</span>)&gt;<span class="number">10</span>),axis=<span class="number">1</span>) <span class="comment">#删除arr数组中那些列中最大值大于10的列</span></span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-3"><div class="note blue simple"><p><code>np.insert(arr, obj, values, axis=None)</code><br>函数说明：<br>此操作类似于<code>np.append()</code>，可以认为<code>append()</code>是<code>insert()</code>的一个特例（在末尾插入子数组），参数<code>obj</code>可以是整数（在指定刻度位置处插入子数组<code>values</code>）、切片对象或整数列表（在指定的多个刻度位置处插入子数组<code>values</code>），具体的，当<code>obj</code>为切片或整数列表时，<code>values</code>的形状和<code>arr</code>的形状除了满足“除<code>axis</code>所在轴长度可以不一致外其余轴长必须相同”的条件外（基本原则），还需要满足“<code>values</code>的<code>axis</code>所在轴长要么是1，要么是切片或整数列表的长度”的条件，当<code>obj</code>为整数时，<code>values</code>的形状除了需要满足基本原则，还需要满足“<code>values</code>的<code>axis</code>所在轴长必须为1”的条件，最后还要删除这个多余的长度为1的<code>axis</code>维（<code>squeeze()</code>），当<code>obj</code>为单整数序列时，<code>values</code>的形状只需要满足基本原则即可。特别地，<code>axis</code>参数可以为<code>None</code>时（默认值），表示会将<code>arr</code>一维化展开，其余的，正常按照前述规则，就像在一维数组中插入数据一样</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">0</span>,<span class="number">1</span>],np.arange(<span class="number">12</span>,<span class="number">18</span>).reshape(<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>),<span class="number">1</span>) <span class="comment">#由于obj为整数列表，根据规则，插入数据values的形状只能是(2,1,3)或(2,2,3)，当其为(2,1,3)时，表示沿1轴来看，values相当于单个元素，当沿着1轴在刻度0位置处插入数据values后，似乎没有元素可供插入刻度1位置处了，这时会复制一份一模一样的数据插在刻度1位置处</span></span><br><span class="line">array([[[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">12</span>,<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">array([[[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">0</span>,<span class="number">1</span>],_,<span class="number">1</span>) <span class="comment">#当values形状为(2,2,3)时，沿1轴来看，values相当于有两个元素，于是分别插在原数组的刻度0和刻度1位置处</span></span><br><span class="line">array([[[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,<span class="number">1</span>,np.arange(<span class="number">12</span>,<span class="number">18</span>).reshape(<span class="number">2</span>,<span class="number">3</span>),<span class="number">1</span>) <span class="comment">#此处obj是单整数，根据规则，插入数据values的形状只能是(2,1,3)，且要删除axis所在轴（长度为1），于是形状只能是(2,3)，为什么要减去这个维度呢？之前在介绍数值索引时说过，数值索引总是会导致维度减1，譬如给定一个二维数组，a=np.arange(12).reshape(3,4)，a[:,0]或a[0]的结果总是一维的，因此在向二维数组a的某列或某行赋值时，也必须是一维的，即a[:,0]=np.array([666,777,888])，如果写成a[:,0]=np.array([666,777,888])[:,None]就会出错，同理，此处的insert()函数在obj为单整数时候，也是这个道理</span></span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>),<span class="number">1</span>,np.array([<span class="number">666</span>,<span class="number">777</span>,<span class="number">888</span>]),<span class="number">1</span>) <span class="comment">#根据规则，插入数据values的形状只能是(3,1)，去除axis所在轴（长度为1），于是形状只能是(3,)</span></span><br><span class="line">array([[  <span class="number">0</span>, <span class="number">666</span>,   <span class="number">1</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>, <span class="number">777</span>,   <span class="number">5</span>,   <span class="number">6</span>,   <span class="number">7</span>],</span><br><span class="line">       [  <span class="number">8</span>, <span class="number">888</span>,   <span class="number">9</span>,  <span class="number">10</span>,  <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">1</span>],np.arange(<span class="number">12</span>,<span class="number">18</span>).reshape(<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>),<span class="number">1</span>) <span class="comment">#如果obj是单整数序列呢？这个比较特殊，此时插入数据values的形状为(2,x,3)即可，其中x任意</span></span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">1</span>],np.arange(<span class="number">12</span>,<span class="number">42</span>).reshape(<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>),<span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>],</span><br><span class="line">        [<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>],</span><br><span class="line">        [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>],</span><br><span class="line">        [<span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten()</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">2</span>,<span class="number">5</span>],[<span class="number">88</span>])</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>, <span class="number">88</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>, <span class="number">88</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">2</span>,<span class="number">5</span>],[<span class="number">66</span>,<span class="number">88</span>])</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>, <span class="number">66</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>, <span class="number">88</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>],[<span class="number">66</span>,<span class="number">88</span>,<span class="number">99</span>])</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>, <span class="number">66</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>, <span class="number">88</span>,  <span class="number">5</span>,  <span class="number">6</span>, <span class="number">99</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,np.s_[::<span class="number">3</span>],[<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>])</span><br><span class="line">array([<span class="number">66</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>, <span class="number">77</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>, <span class="number">88</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>, <span class="number">99</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,[<span class="number">2</span>],[<span class="number">66</span>,<span class="number">99</span>,<span class="number">100</span>])</span><br><span class="line">array([  <span class="number">0</span>,   <span class="number">1</span>,  <span class="number">66</span>,  <span class="number">99</span>, <span class="number">100</span>,   <span class="number">2</span>,   <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>,   <span class="number">7</span>,   <span class="number">8</span>,   <span class="number">9</span>,</span><br><span class="line">        <span class="number">10</span>,  <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,<span class="number">2</span>,[<span class="number">66</span>,<span class="number">99</span>,<span class="number">100</span>]) <span class="comment">#这里也比较特殊，对于一维，obj为单整数，不仅可以插入[666]（长度为1的一维数组），也可以插入[666,777,888]（任意长度）</span></span><br><span class="line">array([  <span class="number">0</span>,   <span class="number">1</span>,  <span class="number">66</span>,  <span class="number">99</span>, <span class="number">100</span>,   <span class="number">2</span>,   <span class="number">3</span>,   <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>,   <span class="number">7</span>,   <span class="number">8</span>,   <span class="number">9</span>,</span><br><span class="line">        <span class="number">10</span>,  <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(a,<span class="number">2</span>,[<span class="number">66</span>])</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>, <span class="number">66</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-4"><div class="note blue simple"><p><code>np.unique(arr, return_index=False, return_inverse=False, return_counts=False, axis=None)</code><br>函数说明：<br>用于去除数组<code>arr</code>中的重复元素，返回以升序排序的去重值数组（由于<code>axis</code>默认为<code>None</code>，因此会首先一维化<code>arr</code>，并最终返回一个去重的一维数组）<br>参数说明：</p><ul><li><code>axis</code>：沿<code>axis</code>轴对数组元素进行去重，举个例子，当<code>arr</code>为二维数组，<code>axis</code>为<code>1</code>，表示要去重的元素是二维数组中的列向量，反之，<code>axis</code>为0，表示要去重的元素是二维数组中的行向量。<code>axis</code>置为<code>None</code>时，表示将<code>arr</code>一维化</li><li><code>return_index</code>：若为<code>True</code>，同时返回去重数组中元素在原始数组中的位置下标</li><li><code>return_inverse</code>：若为<code>True</code>，同时返回原始数组中元素在去重数组中的位置下标</li><li><code>return_counts</code>：若为<code>True</code>，同时返回去重数组中元素在原始数组中出现的次数</li></ul></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([<span class="number">6</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">5</span>]).reshape(<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unique(a)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r,ind=np.unique(a,axis=<span class="number">1</span>,return_index=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r</span><br><span class="line">array([[<span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ind</span><br><span class="line">array([<span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r,ind,cs=np.unique(a,axis=<span class="number">1</span>,return_inverse=<span class="literal">True</span>,return_counts=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r</span><br><span class="line">array([[<span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ind</span><br><span class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cs</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r[:,ind] <span class="comment">#（一维）花式索引重构原始数组</span></span><br><span class="line">array([[<span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-5"><div class="note blue simple"><p><code>np.sort(a, axis=-1, kind='quicksort', order=None)</code><br>函数说明：<br>用于沿指定轴对输入数组进行排序。默认是沿着最后一个轴（<code>axis=-1</code>）进行排序，如果<code>axis</code>置为<code>None</code>，则先一维化展平数组<code>a</code>，然后再进行排序（最终将返回一个一维数组），<code>kind</code>参数指定排序算法，还可取值<code>mergesort</code>（归并排序）和<code>heapsort</code>（堆排序），此处的<code>order</code>参数并非有关内存布局，而是用于自定义结构化数据类型时，设置不同字段参与排序时的优先级（<code>order</code>列表中字段的优先级从左至右依次降低），没有出现在<code>order</code>的字段，其优先级低于<code>order</code>中的字段，且按照定义结构化数据类型<code>dtype</code>时的字段顺序依次降低</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=<span class="literal">None</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dtype = [(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="built_in">float</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="built_in">int</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>values = [(<span class="string">&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>), (<span class="string">&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>), (<span class="string">&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array(values, dtype=dtype)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a, order=<span class="string">&#x27;height&#x27;</span>)</span><br><span class="line">array([(<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>), (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>),</span><br><span class="line">       (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a, order=[<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>])</span><br><span class="line">array([(<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>), (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>),</span><br><span class="line">       (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a)</span><br><span class="line">array([(<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>), (<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>),</span><br><span class="line">       (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b&#x27;Arthur&#x27;</span>&lt;<span class="string">b&#x27;Galahad&#x27;</span>&lt;<span class="string">b&#x27;Lancelot&#x27;</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.argsort()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.argsort(a, axis=-1, kind='quicksort', order=None)</code><br>函数说明：<br>函数返回的是数组值从小到大排列的下标序列，参数同<code>np.sort()</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.argsort(x)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[y] <span class="comment">#（一维）花式索引构造升序排列的结果</span></span><br><span class="line">array([ <span class="number">4</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">21</span>, <span class="number">23</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">0</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x, axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">0</span>]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[_,np.broadcast_to(np.arange(x.shape[<span class="number">1</span>]),x.shape)] <span class="comment">#全坐标索引构造二维数组沿0轴升序排列的结果</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x, axis=<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">1</span>]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.broadcast_to(np.arange(x.shape[<span class="number">0</span>])[:,<span class="literal">None</span>],x.shape),_] <span class="comment">#全坐标索引构造二维数组沿1轴升序排列的结果</span></span><br><span class="line">array([[<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x, axis=<span class="literal">None</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.flatten()[_]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pos = np.unravel_index(np.argsort(x, axis=<span class="literal">None</span>), x.shape)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[pos] <span class="comment">#全坐标索引</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>)], dtype=[(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x, order=(<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>))</span><br><span class="line">array([<span class="number">1</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x, order=(<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;x&#x27;</span>))</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>], dtype=int64)</span><br></pre></td></tr></table></figure>上面使用了一个叫做<code>unravel_index(indices, dims, order='C')</code>的函数，是干嘛用的？将一个多维数组按C或F风格（<code>order</code>参数）“展平”为一维数组后，可以通过取值范围为<code>[0,len(arr.flat)-1]</code>的下标<code>i</code>来索引任意元素，那么现在的下标索引<code>i</code>（指定参数<code>indices</code>，其也可以是一个整数列表）所指向的数组元素在原数组（指定形状参数<code>dims</code>）中的位置坐标又是几何？函数<code>np.unravel_index()</code>就是为了解决这个问题的，看个例子：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten(order=<span class="string">&#x27;C&#x27;</span>) <span class="comment">#按C风格展平，其中第1、3、5个元素在原始数组中的坐标为：np.unravel_index([1,3,5],(2,3))</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten(order=<span class="string">&#x27;F&#x27;</span>) <span class="comment">#按F风格展平，其中第1、3、5个元素在原始数组中的坐标为：np.unravel_index([1,3,5],(2,3),order=&#x27;F&#x27;)</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unravel_index(<span class="number">3</span>,(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unravel_index([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64), array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>], dtype=int64))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unravel_index([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],(<span class="number">2</span>,<span class="number">3</span>),order=<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">(array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64), array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], dtype=int64))</span><br></pre></td></tr></table></figure>上面列举了一维数组和二维数组的情况下如何根据<code>argsort()</code>的结果构造<code>sort()</code>的结果，下面再看看三维数组的情况：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=np.random.randint(<span class="number">0</span>,<span class="number">100</span>,<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(x,axis=-<span class="number">1</span>) <span class="comment">#等同于np.sort(x,axis=2)</span></span><br><span class="line">array([[[<span class="number">39</span>, <span class="number">57</span>, <span class="number">60</span>, <span class="number">99</span>],</span><br><span class="line">        [<span class="number">26</span>, <span class="number">35</span>, <span class="number">38</span>, <span class="number">85</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">12</span>, <span class="number">35</span>, <span class="number">85</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">30</span>, <span class="number">66</span>, <span class="number">86</span>, <span class="number">88</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">49</span>, <span class="number">66</span>, <span class="number">80</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">45</span>, <span class="number">47</span>, <span class="number">70</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x,axis=-<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.broadcast_to(np.arange(<span class="number">2</span>)[:,<span class="literal">None</span>,<span class="literal">None</span>],x.shape),np.broadcast_to(np.arange(<span class="number">3</span>)[<span class="literal">None</span>,:,<span class="literal">None</span>],x.shape),_] <span class="comment">#全坐标索引构造三维数组沿2轴升序排列的结果</span></span><br><span class="line">array([[[<span class="number">39</span>, <span class="number">57</span>, <span class="number">60</span>, <span class="number">99</span>],</span><br><span class="line">        [<span class="number">26</span>, <span class="number">35</span>, <span class="number">38</span>, <span class="number">85</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">12</span>, <span class="number">35</span>, <span class="number">85</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">30</span>, <span class="number">66</span>, <span class="number">86</span>, <span class="number">88</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">49</span>, <span class="number">66</span>, <span class="number">80</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">45</span>, <span class="number">47</span>, <span class="number">70</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(x,axis=<span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">8</span>, <span class="number">35</span>, <span class="number">12</span>, <span class="number">26</span>],</span><br><span class="line">        [<span class="number">60</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">39</span>],</span><br><span class="line">        [<span class="number">85</span>, <span class="number">99</span>, <span class="number">57</span>, <span class="number">85</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">3</span>, <span class="number">70</span>, <span class="number">30</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">49</span>, <span class="number">80</span>, <span class="number">47</span>, <span class="number">45</span>],</span><br><span class="line">        [<span class="number">88</span>, <span class="number">86</span>, <span class="number">66</span>, <span class="number">66</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x,axis=<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.broadcast_to(np.arange(<span class="number">2</span>)[:,<span class="literal">None</span>,<span class="literal">None</span>],x.shape),_,np.broadcast_to(np.arange(<span class="number">4</span>)[<span class="literal">None</span>,<span class="literal">None</span>,:],x.shape)] <span class="comment">#全坐标索引构造三维数组沿1轴升序排列的结果</span></span><br><span class="line">array([[[ <span class="number">8</span>, <span class="number">35</span>, <span class="number">12</span>, <span class="number">26</span>],</span><br><span class="line">        [<span class="number">60</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">39</span>],</span><br><span class="line">        [<span class="number">85</span>, <span class="number">99</span>, <span class="number">57</span>, <span class="number">85</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">3</span>, <span class="number">70</span>, <span class="number">30</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">49</span>, <span class="number">80</span>, <span class="number">47</span>, <span class="number">45</span>],</span><br><span class="line">        [<span class="number">88</span>, <span class="number">86</span>, <span class="number">66</span>, <span class="number">66</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(x,axis=<span class="number">0</span>)</span><br><span class="line">array([[[<span class="number">60</span>, <span class="number">86</span>, <span class="number">30</span>, <span class="number">39</span>],</span><br><span class="line">        [<span class="number">49</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">21</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">35</span>, <span class="number">12</span>, <span class="number">45</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">88</span>, <span class="number">99</span>, <span class="number">57</span>, <span class="number">66</span>],</span><br><span class="line">        [<span class="number">85</span>, <span class="number">80</span>, <span class="number">66</span>, <span class="number">26</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">70</span>, <span class="number">47</span>, <span class="number">85</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(x,axis=<span class="number">0</span>)</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[_,np.broadcast_to(np.arange(<span class="number">3</span>)[<span class="literal">None</span>,:,<span class="literal">None</span>],x.shape),np.broadcast_to(np.arange(<span class="number">4</span>)[<span class="literal">None</span>,<span class="literal">None</span>,:],x.shape)] <span class="comment">#全坐标索引构造三维数组沿0轴升序排列的结果</span></span><br><span class="line">array([[[<span class="number">60</span>, <span class="number">86</span>, <span class="number">30</span>, <span class="number">39</span>],</span><br><span class="line">        [<span class="number">49</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">21</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">35</span>, <span class="number">12</span>, <span class="number">45</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">88</span>, <span class="number">99</span>, <span class="number">57</span>, <span class="number">66</span>],</span><br><span class="line">        [<span class="number">85</span>, <span class="number">80</span>, <span class="number">66</span>, <span class="number">26</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">70</span>, <span class="number">47</span>, <span class="number">85</span>]]])</span><br></pre></td></tr></table></figure>上述写法还是太麻烦，可以借助<code>np.meshgrid()</code>简化坐标分量的构造（试问，还有更好更简便的写法吗？）：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>y,x,z=np.meshgrid(<span class="built_in">range</span>(<span class="number">3</span>),<span class="built_in">range</span>(<span class="number">2</span>),<span class="built_in">range</span>(<span class="number">4</span>)) <span class="comment">#三个坐标分量，要通过meshgrid()构造任意形状多维数组的坐标分量，譬如shape=(s0,s1,s2,...,sn)，则有axis1,axis0,axis2,...,axisn=meshgrid(range(s1),range(s0),range(s3),...,range(sn))，即第0轴和第1轴比较特殊，是顺序反过来的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=-<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">33</span>, <span class="number">71</span>, <span class="number">90</span>, <span class="number">90</span>],</span><br><span class="line">        [<span class="number">41</span>, <span class="number">51</span>, <span class="number">56</span>, <span class="number">71</span>],</span><br><span class="line">        [<span class="number">23</span>, <span class="number">66</span>, <span class="number">70</span>, <span class="number">87</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">32</span>, <span class="number">41</span>, <span class="number">62</span>, <span class="number">86</span>],</span><br><span class="line">        [<span class="number">48</span>, <span class="number">71</span>, <span class="number">75</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">54</span>, <span class="number">73</span>, <span class="number">83</span>, <span class="number">92</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(a,axis=-<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,y,_]</span><br><span class="line">array([[[<span class="number">33</span>, <span class="number">71</span>, <span class="number">90</span>, <span class="number">90</span>],</span><br><span class="line">        [<span class="number">41</span>, <span class="number">51</span>, <span class="number">56</span>, <span class="number">71</span>],</span><br><span class="line">        [<span class="number">23</span>, <span class="number">66</span>, <span class="number">70</span>, <span class="number">87</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">32</span>, <span class="number">41</span>, <span class="number">62</span>, <span class="number">86</span>],</span><br><span class="line">        [<span class="number">48</span>, <span class="number">71</span>, <span class="number">75</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">54</span>, <span class="number">73</span>, <span class="number">83</span>, <span class="number">92</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">66</span>, <span class="number">56</span>, <span class="number">23</span>, <span class="number">51</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">70</span>, <span class="number">33</span>, <span class="number">87</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">90</span>, <span class="number">41</span>, <span class="number">90</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">48</span>, <span class="number">41</span>, <span class="number">54</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">86</span>, <span class="number">73</span>, <span class="number">62</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">92</span>, <span class="number">75</span>, <span class="number">71</span>, <span class="number">83</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(a,axis=<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[x,_,z]</span><br><span class="line">array([[[<span class="number">66</span>, <span class="number">56</span>, <span class="number">23</span>, <span class="number">51</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">70</span>, <span class="number">33</span>, <span class="number">87</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">90</span>, <span class="number">41</span>, <span class="number">90</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">48</span>, <span class="number">41</span>, <span class="number">54</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">86</span>, <span class="number">73</span>, <span class="number">62</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">92</span>, <span class="number">75</span>, <span class="number">71</span>, <span class="number">83</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a,axis=<span class="number">0</span>)</span><br><span class="line">array([[[<span class="number">71</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">48</span>, <span class="number">56</span>, <span class="number">41</span>, <span class="number">51</span>],</span><br><span class="line">        [<span class="number">66</span>, <span class="number">70</span>, <span class="number">23</span>, <span class="number">83</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">86</span>, <span class="number">90</span>, <span class="number">62</span>, <span class="number">90</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">75</span>, <span class="number">71</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">92</span>, <span class="number">73</span>, <span class="number">54</span>, <span class="number">87</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(a,axis=<span class="number">0</span>)</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]]], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[_,y,z]</span><br><span class="line">array([[[<span class="number">71</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">48</span>, <span class="number">56</span>, <span class="number">41</span>, <span class="number">51</span>],</span><br><span class="line">        [<span class="number">66</span>, <span class="number">70</span>, <span class="number">23</span>, <span class="number">83</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">86</span>, <span class="number">90</span>, <span class="number">62</span>, <span class="number">90</span>],</span><br><span class="line">        [<span class="number">71</span>, <span class="number">75</span>, <span class="number">71</span>, <span class="number">80</span>],</span><br><span class="line">        [<span class="number">92</span>, <span class="number">73</span>, <span class="number">54</span>, <span class="number">87</span>]]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.msort()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.msort(a)</code><br>函数说明：<br>用于沿数组<code>a</code>的第0轴进行排序，相当于<code>np.sort(a, axis=0)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">12</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">15</span>,  <span class="number">8</span>, <span class="number">23</span>, <span class="number">12</span>],</span><br><span class="line">       [<span class="number">14</span>,  <span class="number">1</span>, <span class="number">17</span>, <span class="number">13</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">4</span>, <span class="number">14</span>,  <span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.msort(a)</span><br><span class="line">array([[ <span class="number">5</span>,  <span class="number">1</span>, <span class="number">14</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">14</span>,  <span class="number">4</span>, <span class="number">17</span>, <span class="number">12</span>],</span><br><span class="line">       [<span class="number">15</span>,  <span class="number">8</span>, <span class="number">23</span>, <span class="number">13</span>]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.lexsort()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.lexsort(keys, axis=-1)</code><br>函数说明：<br>参数<code>keys</code>是一个元组（越靠后优先级越高），包含多个（至少两个）排序键（一维序列），<code>lexsort()</code>将会执行多重排序，其实就相当于<code>sorted(zip(keys[::-1]),key=lambda x:x)</code>，只不过<code>lexsort()</code>返回的是排序后的下标索引列表</p></div>看个例子，现有一个学生姓名列表，另外还有这些学生对应的语文成绩列表、数学成绩列表、英语成绩列表以及语数英总分列表，要对学生进行优劣排序，规则：首先按照总分降序排序，当总分相同时按照语文成绩降序排序，如果又出现相同，再依次按照数学、英语成绩降序排序，根据这些成绩排序结果，最终将得到学生的优劣先后，代码如下：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>names=[<span class="string">&#x27;daiyang&#x27;</span>,<span class="string">&#x27;daixiaodong&#x27;</span>,<span class="string">&#x27;zhouqifei&#x27;</span>,<span class="string">&#x27;dongjiazhou&#x27;</span>,<span class="string">&#x27;liushaoliang&#x27;</span>,<span class="string">&#x27;zhouzifeng&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>totals=[<span class="number">337</span>,<span class="number">333</span>,<span class="number">345</span>,<span class="number">345</span>,<span class="number">337</span>,<span class="number">333</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chinese=[<span class="number">103</span>,<span class="number">90</span>,<span class="number">108</span>,<span class="number">108</span>,<span class="number">103</span>,<span class="number">86</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math=[<span class="number">156</span>,<span class="number">162</span>,<span class="number">155</span>,<span class="number">135</span>,<span class="number">156</span>,<span class="number">160</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>english=[<span class="number">78</span>,<span class="number">81</span>,<span class="number">82</span>,<span class="number">102</span>,<span class="number">78</span>,<span class="number">87</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inds=np.lexsort((english,math,chinese,totals))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inds</span><br><span class="line">array([<span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(names)[inds] <span class="comment">#花式索引，这里其实是升序排列</span></span><br><span class="line">array([<span class="string">&#x27;zhouzifeng&#x27;</span>, <span class="string">&#x27;daixiaodong&#x27;</span>, <span class="string">&#x27;daiyang&#x27;</span>, <span class="string">&#x27;liushaoliang&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;dongjiazhou&#x27;</span>, <span class="string">&#x27;zhouqifei&#x27;</span>], dtype=<span class="string">&#x27;&lt;U12&#x27;</span>)</span><br></pre></td></tr></table></figure>也可以自定义结构化数组，并利用`np.argsort()`实现：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t=list2structarray(<span class="built_in">list</span>(<span class="built_in">zip</span>(totals,chinese,math,english)),dtype=<span class="string">&#x27;i4,i4,i4,i4&#x27;</span>)</span><br><span class="line">inds=np.argsort(t)[::-<span class="number">1</span>] <span class="comment">#按降序排列的下标索引</span></span><br><span class="line"><span class="built_in">print</span>(inds)</span><br><span class="line"><span class="built_in">print</span>(np.array(names)[inds])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">[2 3 4 0 1 5]</span></span><br><span class="line"><span class="string">[&#x27;zhouqifei&#x27; &#x27;dongjiazhou&#x27; &#x27;liushaoliang&#x27; &#x27;daiyang&#x27; &#x27;daixiaodong&#x27;</span></span><br><span class="line"><span class="string"> &#x27;zhouzifeng&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.sort_complex()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.sort_complex(a)</code><br>函数说明:<br>对复数数组按照先实部后虚部的顺序进行排序，注意是沿最后一维进行排序</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.sort_complex([<span class="number">1</span> + <span class="number">2j</span>, <span class="number">2</span> - <span class="number">1j</span>, <span class="number">3</span> - <span class="number">2j</span>, <span class="number">3</span> - <span class="number">3j</span>, <span class="number">3</span> + <span class="number">5j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">3.</span>-<span class="number">2.j</span>, <span class="number">2.</span>-<span class="number">1.j</span>, <span class="number">3.</span>+<span class="number">5.j</span>, <span class="number">6.</span>+<span class="number">2.j</span>, <span class="number">6.</span>+<span class="number">1.j</span>, <span class="number">3.</span>-<span class="number">3.j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=a.reshape(<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[<span class="number">3.</span>-<span class="number">2.j</span>, <span class="number">2.</span>-<span class="number">1.j</span>, <span class="number">3.</span>+<span class="number">5.j</span>],</span><br><span class="line">       [<span class="number">6.</span>+<span class="number">2.j</span>, <span class="number">6.</span>+<span class="number">1.j</span>, <span class="number">3.</span>-<span class="number">3.j</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort_complex(b)</span><br><span class="line">array([[<span class="number">2.</span>-<span class="number">1.j</span>, <span class="number">3.</span>-<span class="number">2.j</span>, <span class="number">3.</span>+<span class="number">5.j</span>],</span><br><span class="line">       [<span class="number">3.</span>-<span class="number">3.j</span>, <span class="number">6.</span>+<span class="number">1.j</span>, <span class="number">6.</span>+<span class="number">2.j</span>]])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-6"><div class="note blue simple"><p><code>np.max(a, axis=None, out=None, keepdims=False)</code><br>函数说明：<br>该操作返回数组的最大值（<code>axis=None</code>的默认行为）或者沿轴的最大值（结果数组的维数可能会减1，以<code>(m,n)</code>形二维数组为例，若沿0轴获取最大值，即获取数组中每个列向量中的最大值，所得结果数组形状将变为<code>(n,)</code>，除非<code>keepdims</code>设为<code>True</code>，此时结果数组维数将变为<code>(1,n)</code>，仍为二维），另外也可以直接在<code>ndarray</code>对象上调用该方法。<code>out</code>参数用于存放结果数组，<code>keepdims</code>参数表示是否维持数组的维数不变。实际上，<code>axis</code>还可以是一个元组，以<code>(m,n,q)</code>形三维数组为例说明，若沿着<code>axis=(0,1)</code>获取最大值，即获取数组中（沿2轴的）每个“面”中的最大值，所得结果数组形状将变为<code>(q,)</code>，除非<code>keepdims</code>为<code>True</code>，此时结果数组维数将变为<code>(1,1,q)</code>，仍保持三维。最后提醒一下，<code>np.max()</code>还可以写成<code>np.amax()</code>，两个函数就是一回事</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">12</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">12</span>, <span class="number">11</span>,  <span class="number">6</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">17</span>,  <span class="number">5</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">14</span>, <span class="number">13</span>, <span class="number">17</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a)</span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">max</span>()</span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a,axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">12</span>, <span class="number">17</span>, <span class="number">13</span>, <span class="number">21</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a,axis=<span class="number">1</span>,keepdims=<span class="literal">True</span>)</span><br><span class="line">array([[<span class="number">21</span>],</span><br><span class="line">       [<span class="number">17</span>],</span><br><span class="line">       [<span class="number">17</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">7</span>,  <span class="number">2</span>,  <span class="number">0</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">23</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">23</span>, <span class="number">14</span>, <span class="number">14</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">11</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">13</span>,  <span class="number">9</span>, <span class="number">17</span>,  <span class="number">0</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">5</span>, <span class="number">15</span>, <span class="number">18</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a,axis=(<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line">array([<span class="number">20</span>, <span class="number">23</span>, <span class="number">17</span>, <span class="number">23</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a,axis=(<span class="number">0</span>,<span class="number">1</span>),keepdims=<span class="literal">True</span>)</span><br><span class="line">array([[[<span class="number">20</span>, <span class="number">23</span>, <span class="number">17</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a[:,:,<span class="number">0</span>]) <span class="comment">#沿2轴的首个“面”</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a[:,:,<span class="number">1</span>])</span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a[:,:,<span class="number">2</span>])</span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a[:,:,<span class="number">3</span>]) <span class="comment">#沿2轴的最后一个“面”</span></span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.argmax()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.argmax(a, axis=None, out=None)</code><br>函数说明：<br>返回数组或沿轴最大值的下标索引，参数见<code>np.max()</code>，只要说的是，当<code>axis</code>为<code>None</code>时（默认值），表示先将<code>a</code>展平，然后在一维化的数组<code>a</code>中寻找最大值并返回此时的下标，另外也可以直接在<code>ndarray</code>对象上调用该方法</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">30</span>,<span class="number">40</span>,<span class="number">70</span>],[<span class="number">80</span>,<span class="number">20</span>,<span class="number">10</span>],[<span class="number">50</span>,<span class="number">90</span>,<span class="number">60</span>],[<span class="number">12</span>,<span class="number">56</span>,<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.argmax()</span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flat[_]</span><br><span class="line"><span class="number">90</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">max</span>()</span><br><span class="line"><span class="number">90</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.argmax(axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[_,np.arange(a.shape[<span class="number">1</span>])] <span class="comment">#全坐标索引</span></span><br><span class="line">array([<span class="number">80</span>, <span class="number">90</span>, <span class="number">70</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">max</span>(axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">80</span>, <span class="number">90</span>, <span class="number">70</span>])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.maximum()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.maximum(arr1, arr2, /, out=None, *, where=True, casting='same_kind', order='K', dtype=None, subok=True[, signature, extobj])</code><br>函数说明：<br>用于比较两个数组对象（<code>arr1</code>和<code>arr2</code>这两个数组必须是同形状或者可以广播至同一形状）并返回一个新数组，其中存储了两个数组对应位置上的较大值。其余参数暂时先不管了</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">20</span>,size=(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.random.randint(<span class="number">20</span>,size=(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">8</span>, <span class="number">12</span>,  <span class="number">1</span>, <span class="number">16</span>],</span><br><span class="line">        [ <span class="number">6</span>, <span class="number">17</span>,  <span class="number">5</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">18</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">15</span>, <span class="number">15</span>, <span class="number">12</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">4</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">12</span>,  <span class="number">6</span>,  <span class="number">0</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[[<span class="number">18</span>, <span class="number">12</span>,  <span class="number">2</span>, <span class="number">18</span>],</span><br><span class="line">        [ <span class="number">7</span>, <span class="number">16</span>,  <span class="number">7</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>, <span class="number">11</span>,  <span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>, <span class="number">17</span>,  <span class="number">5</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>, <span class="number">14</span>,  <span class="number">0</span>],</span><br><span class="line">        [ <span class="number">3</span>, <span class="number">15</span>,  <span class="number">2</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=np.empty_like(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.maximum(a,b,out=s)</span><br><span class="line">array([[[<span class="number">18</span>, <span class="number">12</span>,  <span class="number">2</span>, <span class="number">18</span>],</span><br><span class="line">        [ <span class="number">7</span>, <span class="number">17</span>,  <span class="number">7</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">18</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">4</span>, <span class="number">14</span>,  <span class="number">3</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">15</span>,  <span class="number">6</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">array([[[<span class="number">18</span>, <span class="number">12</span>,  <span class="number">2</span>, <span class="number">18</span>],</span><br><span class="line">        [ <span class="number">7</span>, <span class="number">17</span>,  <span class="number">7</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">18</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>, <span class="number">17</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">4</span>, <span class="number">14</span>,  <span class="number">3</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">15</span>,  <span class="number">6</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.eye(<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">0.5</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.maximum(a,b) <span class="comment">#b形状为(2,)，而a形状为(2,2)，因此b发生广播，首先补齐维度变为(1,2)，然后沿0轴复制元素进一步补齐维数，于是b相当于[[0.5,2],[0.5,2]]，可通过np.broadcast_to(b,(2,2))验证</span></span><br><span class="line">array([[<span class="number">1.</span> , <span class="number">2.</span> ],</span><br><span class="line">       [<span class="number">0.5</span>, <span class="number">2.</span> ]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.nanmax()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.nanmax(a, axis=None, out=None, keepdims=False)</code><br>函数说明：<br>只要数组中有一个元素为<code>NaN</code>（通常是无意义的异常值），则相应的<code>np.max()</code>比较得到的最大值也将为<code>NaN</code>，若要忽略<code>NaN</code>值，则使用<code>np.nanmax()</code>代替<code>np.max()</code>，该函数具体的用法参照<code>np.max()</code>即可</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">12</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>).astype(<span class="string">&#x27;float&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">2</span>]=np.nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>,<span class="number">0</span>]=np.nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">9.</span>, <span class="number">19.</span>,  <span class="number">5.</span>, <span class="number">23.</span>],</span><br><span class="line">       [ <span class="number">6.</span>,  <span class="number">3.</span>, nan, <span class="number">13.</span>],</span><br><span class="line">       [nan, <span class="number">15.</span>, <span class="number">17.</span>,  <span class="number">2.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a)</span><br><span class="line">nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.<span class="built_in">max</span>(a,axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">23.</span>, nan, nan])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nanmax(a)</span><br><span class="line"><span class="number">23.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nanmax(a,axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">23.</span>, <span class="number">13.</span>, <span class="number">17.</span>])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-7"><div class="note blue simple"><p><code>np.min(axis=None, out=None, keepdims=False)</code><br>函数说明：<br>等同于函数<code>np.amin()</code>，具体参见<code>np.max()</code>，只不过一个求最大一个求最小而已</p></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.argmin()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.argmin(a, axis=None, out=None)</code><br>函数说明：<br>具体参见<code>np.argmax()</code></p></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.minimum()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.numpy.minimum(x1, x2, /, out=None, *, where=True, casting='same_kind', order='K', dtype=None, subok=True[, signature, extobj]) = &lt;ufunc 'minimum'&gt;</code><br>函数说明：<br>具体参见<code>np.maximum()</code></p></div></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.nanmin()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.nanmin(a, axis=None, out=None, keepdims=False)</code><br>函数说明：<br>具体参见<code>np.nanmax()</code></p></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-8"><div class="note blue simple"><p><code>np.sum(a, axis=None, dtype=None, out=None, keepdims=False)</code><br>函数说明：<br>求和运算，类似于<code>np.max()</code>、<code>np.min()</code>，都是“聚合”操作，参数含义也都一样，就不多说了。可以直接在<code>ndarray</code>对象上调用该方法</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>()</span><br><span class="line"><span class="number">276</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>(axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>],</span><br><span class="line">       [<span class="number">20</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">26</span>],</span><br><span class="line">       [<span class="number">28</span>, <span class="number">30</span>, <span class="number">32</span>, <span class="number">34</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>(axis=(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">array([ <span class="number">66</span>, <span class="number">210</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>].<span class="built_in">sum</span>()</span><br><span class="line"><span class="number">66</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>].<span class="built_in">sum</span>()</span><br><span class="line"><span class="number">210</span></span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.cumsum()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.cumsum(a, axis=None, dtype=None, out=None)</code><br>函数说明：<br>计算数组或沿轴元素的累加，当<code>axis</code>为<code>None</code>时，会先展平一维化数组，然后再计算累加，所得也会是一个一维数组。可以直接在<code>ndarray</code>对象上调用该方法</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten() <span class="comment">#继续上面的代码</span></span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>,</span><br><span class="line">       <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.cumsum()</span><br><span class="line">array([  <span class="number">0</span>,   <span class="number">1</span>,   <span class="number">3</span>,   <span class="number">6</span>,  <span class="number">10</span>,  <span class="number">15</span>,  <span class="number">21</span>,  <span class="number">28</span>,  <span class="number">36</span>,  <span class="number">45</span>,  <span class="number">55</span>,  <span class="number">66</span>,  <span class="number">78</span>,</span><br><span class="line">        <span class="number">91</span>, <span class="number">105</span>, <span class="number">120</span>, <span class="number">136</span>, <span class="number">153</span>, <span class="number">171</span>, <span class="number">190</span>, <span class="number">210</span>, <span class="number">231</span>, <span class="number">253</span>, <span class="number">276</span>], dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.cumsum(axis=<span class="number">2</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">9</span>, <span class="number">15</span>, <span class="number">22</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">38</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">25</span>, <span class="number">39</span>, <span class="number">54</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">33</span>, <span class="number">51</span>, <span class="number">70</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">41</span>, <span class="number">63</span>, <span class="number">86</span>]]], dtype=int32)</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-9"><div class="note blue simple"><p><code>np.cumprod(a, axis=None, dtype=None, out=None)</code><br>函数说明：<br>计算数组或沿轴元素的累乘，当<code>axis</code>为<code>None</code>时，会先展平一维化数组，然后再计算累乘，所得也会是一个一维数组。可以直接在<code>ndarray</code>对象上调用该方法</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">5</span>,<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten()</span><br><span class="line">array([<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.cumprod(a)</span><br><span class="line">array([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.cumprod(a,axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">9</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">9</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">0</span>]], dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.cumprod(a,axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">3</span>,  <span class="number">3</span>,  <span class="number">3</span>,  <span class="number">0</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">9</span>, <span class="number">27</span>, <span class="number">27</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">0</span>,  <span class="number">0</span>]], dtype=int32)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-10"><div class="note blue simple"><p><code>np.nonzero(a)</code><br>函数说明：<br>用于返回数组<code>a</code>中非零元素的下标索引（按坐标分量返回），根据此下标索引可以获取所有非零元素并以一维数组返回，若要直接返回数组中的非零元素，直接<code>a[a!=0]</code>。该函数常用于查找条件为真的数组元素索引，譬如，给定数组<code>a</code>，条件<code>a&gt;3</code>返回一个布尔数组，由于<code>False</code>就是整数0（有<code>False==0</code>成立），所以<code>np.nonzero(a&gt;3)</code>将返回符合条件的数组元素的下标索引。另外也可以直接在<code>ndarray</code>对象上调用<code>nonzero()</code>方法</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">24</span>,<span class="number">12</span>).reshape(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">20</span>, <span class="number">12</span>,  <span class="number">1</span>,  <span class="number">0</span>],</span><br><span class="line">       [<span class="number">11</span>,  <span class="number">3</span>, <span class="number">13</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">4</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">21</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nonzero(_)</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], dtype=int64), array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=int64))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[_] <span class="comment">#全坐标索引获取非零元素</span></span><br><span class="line">array([<span class="number">20</span>, <span class="number">12</span>,  <span class="number">1</span>, <span class="number">11</span>,  <span class="number">3</span>, <span class="number">13</span>,  <span class="number">4</span>,  <span class="number">4</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">21</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[a!=<span class="number">0</span>] <span class="comment">#布尔索引获取非零元组</span></span><br><span class="line">array([<span class="number">20</span>, <span class="number">12</span>,  <span class="number">1</span>, <span class="number">11</span>,  <span class="number">3</span>, <span class="number">13</span>,  <span class="number">4</span>,  <span class="number">4</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">21</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.nonzero(a&gt;<span class="number">3</span>)] <span class="comment">#等同于：a[a&gt;3]</span></span><br><span class="line">array([<span class="number">20</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>,  <span class="number">4</span>,  <span class="number">4</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">21</span>])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-11"><div class="note blue simple"><p><code>np.where(condition, [x, y])</code><br>函数说明：<br>分两种情况（其中<code>condition</code>将返回一个布尔数组）：</p><ol><li><code>np.where(condition)</code>：此时等同于<code>condition.nonzero()</code></li><li><code>np.where(condition,x,y)</code>：首先创建一个空的结果数组，形状同<code>condition</code>，如果<code>condition</code>某个位置的元素为<code>True</code>，表示符合条件，则从<code>x</code>中对应位置处取出元素并放到结果数组中的相应位置，如果<code>condition</code>某个位置的元素为<code>False</code>，表示不符合条件，则从<code>y</code>中对应位置处取出元素并放到结果数组中的相应位置。并不要求<code>x</code>、<code>y</code>和<code>condition</code>的形状完全一致，但是其应能广播至同一形状</li></ol></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where([[<span class="number">0</span>, <span class="number">1</span>],[<span class="number">1</span>, <span class="number">0</span>]])</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>], dtype=int64), array([<span class="number">1</span>, <span class="number">0</span>], dtype=int64))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([[<span class="number">0</span>, <span class="number">1</span>],[<span class="number">1</span>, <span class="number">0</span>]]).nonzero()</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>], dtype=int64), array([<span class="number">1</span>, <span class="number">0</span>], dtype=int64))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where([[<span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line"><span class="meta">... </span>          [<span class="literal">True</span>, <span class="literal">True</span>]],</span><br><span class="line"><span class="meta">... </span>         [[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line"><span class="meta">... </span>          [<span class="number">3</span>, <span class="number">4</span>]],</span><br><span class="line"><span class="meta">... </span>         [[<span class="number">9</span>, <span class="number">8</span>],</span><br><span class="line"><span class="meta">... </span>          [<span class="number">7</span>, <span class="number">6</span>]])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=[[<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>],[<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=[-<span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret=np.where(a&gt;<span class="number">3</span>,x,y) <span class="comment">#这里发生了广播</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret</span><br><span class="line">array([[-<span class="number">1</span>, <span class="number">12</span>, -<span class="number">1</span>, <span class="number">14</span>],</span><br><span class="line">       [-<span class="number">1</span>, <span class="number">16</span>, -<span class="number">1</span>, <span class="number">18</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">9.</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(a &lt; <span class="number">5</span>, a, -<span class="number">1</span>) <span class="comment">#大于等于5的元素被置为-1，不过最简单的做法还是：a[a&gt;=5]=-1</span></span><br><span class="line">array([[ <span class="number">0.</span>,  <span class="number">1.</span>,  <span class="number">2.</span>],</span><br><span class="line">       [ <span class="number">3.</span>,  <span class="number">4.</span>, -<span class="number">1.</span>],</span><br><span class="line">       [-<span class="number">1.</span>, -<span class="number">1.</span>, -<span class="number">1.</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-12"><div class="note blue simple"><p><code>np.extract(condition, arr)</code><br>函数说明：<br>用于从数组<code>a</code>中提取满足条件的元素。这不就是<code>a[condition]</code>么</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>condition = np.mod(arr, <span class="number">3</span>)==<span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>condition</span><br><span class="line">array([[ <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>],</span><br><span class="line">       [<span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.extract(condition, arr)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[condition]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-13"><div class="note blue simple"><p><code>np.place(arr, mask, vals)</code><br>函数说明：<br>将数组<code>arr</code>中满足条件<code>mask</code>（掩码数组）的元素用数据<code>vals</code>进行替换（原址操作）。这不就是<code>arr[mask]=vals</code>么。注意<code>vals</code>参数是一个一维数组或一维序列，指定用于替换的元素，设其长度为<code>N</code>，而符合条件的元素个数记为<code>M</code>，若<code>N&gt;M</code>，则将只使用<code>vals</code>序列的前<code>M</code>个元素用于替换，若<code>N&lt;=M</code>，则将循环重复使用这个序列的元素，譬如<code>vals=[1,2,3]</code>，且符合条件的元素有5个，则用于替换的元素为：[<code>1,2,3,1,2</code>]</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.place(arr, arr&gt;<span class="number">2</span>, [<span class="number">66</span>, <span class="number">88</span>]) <span class="comment">#相当于arr[arr&gt;2]=[66,88]，不过此句实际会报错，因为等号两边替换的元素和符合条件的元素数量不一致</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>, <span class="number">66</span>],</span><br><span class="line">       [<span class="number">88</span>, <span class="number">66</span>, <span class="number">88</span>, <span class="number">66</span>],</span><br><span class="line">       [<span class="number">88</span>, <span class="number">66</span>, <span class="number">88</span>, <span class="number">66</span>]])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="szzsgc-14"><div class="note blue simple"><p><code>np.partition(a, kth, axis=-1, kind='introselect', order=None)</code><br>函数说明：<br>指定一个或多个数，对数组进行分区。这玩意儿常用来求序列的第<code>k</code>项最大（小）值，特别是前几项最大（小）值，效率较高，因为它不对分区元素排序<br>参数说明：</p><ul><li><code>kth</code>：可以是单个整数，也可以是多个整数的序列，单个整数值时，<code>kth</code>表示第<code>k</code>个元素，<code>k</code>是指按升序排序后的数组（记作<code>s</code>，参数<code>axis</code>决定了具体沿哪个轴进行排序）的下标索引，<code>axis</code>所在轴长也就是<code>kth</code>参数的合法取值（实际取值区间为<code>[-len(arr),len(arr)-1]</code>，负数索引譬如-1表示的是最后一个元素的索引，这里姑且假设<code>axis</code>取0，于是0轴长度就是<code>len(arr)</code>），函数的功能是将原数组中小于<code>s[k]</code>的元素放到（<code>s[k]</code>的）左边区域，将大于或等于<code>s[k]</code>的元素放到（<code>s[k]</code>的）右边区域，但分区区域中元素并无顺序。显而易见的是，由于第<code>k</code>个元素指的是排序后的数组（<code>s</code>）的第<code>k</code>个元素，因此<code>s</code>本身就是一个符合条件的函数返回值，因为<code>s[k]</code>左边的元素的确都比<code>s[k]</code>小，<code>s[k]</code>右边的元素的确都比<code>s[k]</code>大或等啊。当<code>kth</code>参数是多值序列时（设为<code>[k0,k1,,k2,...]</code>），序列中的每一个整数都要在“合法取值”内，只需记住：作为函数返回值的数组的第<code>k0</code>、<code>k1</code>、<code>k2</code>、…个元素就是按升序排列后的数组的第<code>k0</code>、<code>k1</code>、<code>k2</code>、…个元素，将这些元素视为一个一个的分界点，左边的数总是小于它，右边的数总是大于等于它</li><li><code>axis</code>：指定要排序的轴，缺省为-1，表示沿最后一根轴排序，若指定为<code>None</code>，则首先将数组“展平”为一维，然后再排序，同<code>np.sort()</code></li><li><code>order</code>：非内存布局，而是用于自定义结构化数据类型时，指定字段排序优先级，仍同<code>np.sort()</code></li></ul></div><code>kth</code>为整数时：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>] <span class="comment">#这里有五个数，使用np.sort()按升序排序得到：[1,2,3,4,5]，记作s</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,<span class="number">0</span>) <span class="comment">#以s的第0个元素为分界点，比它小的在前面，比它大的或相等的在后面，前后区域中的元素未排序</span></span><br><span class="line">array([<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,-<span class="number">5</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,<span class="number">1</span>) <span class="comment">#以s的第1个元素为分界点，比它小的在前面，比它大的或相等的在后面，前后区域中的元素未排序</span></span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,-<span class="number">4</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,<span class="number">2</span>) <span class="comment">#以s的第2个元素为分界点，比它小的在前面，比它大的或相等的在后面，前后区域中的元素未排序</span></span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,-<span class="number">3</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,<span class="number">3</span>) <span class="comment">#以s的第3个元素为分界点，比它小的在前面，比它大的或相等的在后面，前后区域中的元素未排序</span></span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,-<span class="number">2</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,<span class="number">4</span>) <span class="comment">#以s的第4个元素为分界点，比它小的在前面，比它大的或相等的在后面，前后区域中的元素未排序</span></span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,-<span class="number">1</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure><code>kth</code>为多个整数序列时：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">a=[<span class="number">2</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">13</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;kth参数是多值序列时：如[3,5,8]，函数返回的数组的第3个元素（从0开始计数，第0个元素...）、第5个元素、第8个元素分别是原数组按升序排列后的第3、5、8个元素：&#x27;</span>)</span><br><span class="line">b=np.frombuffer(<span class="string">b&#x27; &#x27;</span>*<span class="built_in">len</span>(a),dtype=<span class="string">&#x27;S1&#x27;</span>)</span><br><span class="line">b=b.copy() <span class="comment"># 通过frombuffer()得到的将是一个只允许“读”模式的数组对象，op_flags参数无法开启“写”模式，只好拷贝一份副本而丢弃原数组对象</span></span><br><span class="line">it=np.nditer(b,op_flags=[<span class="string">&#x27;readwrite&#x27;</span>])</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> it.finished:</span><br><span class="line">    <span class="keyword">if</span> it.iterindex <span class="keyword">in</span> [<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>]:</span><br><span class="line">        it[<span class="number">0</span>]=<span class="string">b&#x27;|&#x27;</span></span><br><span class="line">    <span class="comment">#print(it[0])</span></span><br><span class="line">    it.iternext()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;   分区  界点 分区 界点 分区 界点 分区&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  &#x27;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.nditer(b):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(i, encoding=<span class="string">&#x27;utf-8&#x27;</span>),end=<span class="string">&#x27;  &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(np.sort(a),end=<span class="string">&#x27; -- sort(a)\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(np.partition(a,(<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>)),end=<span class="string">&#x27; -- partition(a,[3,5,8])\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;OUTPUT</span></span><br><span class="line"><span class="string">kth参数是多值序列时：如[3,5,8]，函数返回的数组的第3个元素（从0开始计数，第0个元素...）、第5个元素、第8个元素分别是原数组按升序排列后的第3、5、8个元素：</span></span><br><span class="line"><span class="string">   分区  界点 分区 界点 分区 界点 分区</span></span><br><span class="line"><span class="string">           |     |        |</span></span><br><span class="line"><span class="string">[ 1  1  2  2  4  5  6  7  7  8  9 10 13] -- sort(a)</span></span><br><span class="line"><span class="string">[ 1  1  2  2  4  5  6  7  7  9  8 10 13] -- partition(a,[3,5,8])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>该函数常用于求数组的前几个最大或最小值：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">2</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">13</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,[-<span class="number">1</span>,-<span class="number">2</span>,-<span class="number">3</span>]) <span class="comment">#求数组的前三大元素（由于默认是升序，因此是取最后三项，使用负数索引），另外当kth为多值序列时，其中的索引无需计较先后顺序</span></span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">4</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">5</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">13</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,[-<span class="number">2</span>,-<span class="number">3</span>,-<span class="number">1</span>])</span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">4</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">5</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">13</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,[-<span class="number">1</span>,-<span class="number">2</span>,-<span class="number">3</span>])[[-<span class="number">1</span>,-<span class="number">2</span>,-<span class="number">3</span>]] <span class="comment">#花式索引</span></span><br><span class="line">array([<span class="number">13</span>, <span class="number">10</span>,  <span class="number">9</span>])</span><br></pre></td></tr></table></figure>再看一个自定义结构化类型和多维情况下的例子：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dtype = [(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="built_in">float</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="built_in">int</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>values = [(<span class="string">&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>), (<span class="string">&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>), (<span class="string">&#x27;muggledy&#x27;</span>, <span class="number">1.8</span>, <span class="number">22</span>), (<span class="string">&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>)] <span class="comment">#尝试将&#x27;Arthur&#x27;改成&#x27;rthur&#x27;，看看结果会有什么不同（该实验将说明“未在order参数中出现的字段仍将影响排序结果”，对于order=&#x27;height&#x27;来说，&#x27;height&#x27;字段出于最高优先级，其次是在dtype中先定义的&#x27;name&#x27;字段，最后是&#x27;age&#x27;字段）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array(values, dtype=dtype)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a, order=<span class="string">&#x27;height&#x27;</span>)</span><br><span class="line">array([(<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>), (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>),</span><br><span class="line">       (<span class="string">b&#x27;muggledy&#x27;</span>, <span class="number">1.8</span>, <span class="number">22</span>), (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a, kth=<span class="number">2</span>, order=<span class="string">&#x27;height&#x27;</span>)</span><br><span class="line">array([(<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>), (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>),</span><br><span class="line">       (<span class="string">b&#x27;muggledy&#x27;</span>, <span class="number">1.8</span>, <span class="number">22</span>), (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a, order=[<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>])</span><br><span class="line">array([(<span class="string">b&#x27;muggledy&#x27;</span>, <span class="number">1.8</span>, <span class="number">22</span>), (<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>),</span><br><span class="line">       (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>), (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a, kth=<span class="number">2</span>, order=[<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>])</span><br><span class="line">array([(<span class="string">b&#x27;muggledy&#x27;</span>, <span class="number">1.8</span>, <span class="number">22</span>), (<span class="string">b&#x27;Galahad&#x27;</span>, <span class="number">1.7</span>, <span class="number">38</span>),</span><br><span class="line">       (<span class="string">b&#x27;Lancelot&#x27;</span>, <span class="number">1.9</span>, <span class="number">38</span>), (<span class="string">b&#x27;Arthur&#x27;</span>, <span class="number">1.8</span>, <span class="number">41</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;&lt;f8&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">3</span>,<span class="number">7</span>,<span class="number">1</span>],[<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">7</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,kth=<span class="number">1</span>,axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[[<span class="number">3</span>,<span class="number">1</span>],[<span class="number">6</span>,<span class="number">5</span>]],[[<span class="number">4</span>,<span class="number">7</span>],[<span class="number">2</span>,<span class="number">3</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[<span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">6</span>, <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.partition(a,kth=<span class="number">1</span>,axis=<span class="number">1</span>)</span><br><span class="line">array([[[<span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">6</span>, <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">7</span>]]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.argpartition()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.argpartition(a, kth, axis=-1, kind='introselect', order=None)</code><br>函数说明：<br>功能同<code>np.partition()</code>，只不过返回的是<code>np.partition()</code>结果数组中的元素在原数组<code>a</code>中的下标索引</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">2</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">13</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1=np.argpartition(a,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2=np.partition(a,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">array([ <span class="number">5</span>,  <span class="number">0</span>,  <span class="number">8</span>,  <span class="number">3</span>,  <span class="number">6</span>,  <span class="number">4</span>,  <span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>,  <span class="number">9</span>,  <span class="number">7</span>,  <span class="number">2</span>, <span class="number">12</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2</span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">7</span>,  <span class="number">9</span>,  <span class="number">8</span>, <span class="number">10</span>, <span class="number">13</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(a)[s1]</span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">7</span>,  <span class="number">9</span>,  <span class="number">8</span>, <span class="number">10</span>, <span class="number">13</span>])</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="数学运算">数学运算</h2><div class="tabs" id="sxys"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#sxys-1"><code>np.dot()</code></button></li><li class="tab"><button type="button" data-href="#sxys-2"><code>np.log()</code></button></li><li class="tab"><button type="button" data-href="#sxys-3"><code>np.sqrt()</code></button></li><li class="tab"><button type="button" data-href="#sxys-4"><code>np.mod()</code></button></li><li class="tab"><button type="button" data-href="#sxys-5">多项式</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="sxys-1"><div class="note blue simple"><p><code>np.dot(a, b, out=None)</code><br>函数说明：<br>矩阵乘法（可以在<code>ndarray</code>对象上直接调用该方法），等同于<code>np.matmul(a,b)</code>或使用<code>@</code>运算符：<code>a @ b</code>，注意区别于<code>np.multiply()</code>方法，这是用于两个数组之间的逐元素乘法操作，对应运算符<code>*</code>，即<code>a * b</code></p><ul><li><code>a</code>和<code>b</code>都是标量，表示数值间的普通乘法</li><li><code>a</code>和<code>b</code>都是一维时，表示计算这两个向量的内积</li><li><code>a</code>和<code>b</code>都是二维或其中一个允许是一维，表示矩阵乘法</li><li><code>a</code>是<code>N</code>维（<code>N&gt;2</code>）而<code>b</code>是一维，则结果是<code>a</code>和<code>b</code>的最后一个轴上元素的和积，因此需满足条件：<code>a</code>和<code>b</code>最后一个轴的长度相同，等同于：<code>reduce(lambda last,now:last+now[0]*now[1],zip(np.rollaxis(a,a.ndim-1),b),0)</code>，结果数组形状为<code>a.shape[:-1]</code></li><li><code>a</code>是<code>N</code>维（<code>N&gt;2</code>）而<code>b</code>是<code>M</code>维（<code>M&gt;=2</code>），则结果是<code>a</code>的最后一个轴和<code>b</code>的倒数第二个轴上元素的和积，需满足条件：<code>a</code>的最后一个轴长等于b的倒数第二个轴长，且有：<code>dot(a, b)[i,j,k,m] = sum(a[i,j,:] * b[k,:,m])</code>，这条没看懂</li></ul></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">3</span>).reshape(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">3</span>).reshape(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">8</span>, <span class="number">9</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dot(b)</span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.dot(a) <span class="comment">#c形状为(2,3)，a形状为(3,)，允许这样，而并不一定要求a形状为(3,1)</span></span><br><span class="line">array([ <span class="number">4</span>, <span class="number">25</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.dot(a[:,<span class="literal">None</span>])</span><br><span class="line">array([[ <span class="number">4</span>],</span><br><span class="line">       [<span class="number">25</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">24</span>).reshape(<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dot(b)</span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">8</span>, <span class="number">14</span>, <span class="number">20</span>],</span><br><span class="line">       [<span class="number">26</span>, <span class="number">32</span>, <span class="number">38</span>, <span class="number">44</span>],</span><br><span class="line">       [<span class="number">50</span>, <span class="number">56</span>, <span class="number">62</span>, <span class="number">68</span>]])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.out()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.outer(a, b, out=None)</code><br>函数说明：<br>用于计算两个一维向量的外积，其尺寸各自随意，等同于<code>a[:,None]@b[None,:]</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">4</span>, <span class="number">9</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">9</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.outer(a,b)</span><br><span class="line">array([[<span class="number">36</span>,  <span class="number">8</span>,  <span class="number">4</span>, <span class="number">32</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">81</span>, <span class="number">18</span>,  <span class="number">9</span>, <span class="number">72</span>, <span class="number">36</span>],</span><br><span class="line">       [<span class="number">27</span>,  <span class="number">6</span>,  <span class="number">3</span>, <span class="number">24</span>, <span class="number">12</span>]])</span><br></pre></td></tr></table></figure></div></div><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span><code>np.inner()</code></span></div><div class="hide-content"><div class="note blue simple"><p><code>np.inner(a, b)</code><br>函数说明：<br>用于计算两个一维向量的内积，其尺寸必须一致，等同于<code>a[None,:]@b[:,None]</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">9</span>, <span class="number">6</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.inner(a,a)</span><br><span class="line"><span class="number">126</span></span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sxys-2"><div class="note blue simple"><p><code>np.log(a)</code><br>函数说明：<br>逐元素的以<code>e</code>为底的对数计算，满足<code>log(exp(x)) = x</code>（以<code>e</code>为底<code>exp(x)</code>的对数就是<code>x</code>），还有<code>np.log2()</code>、<code>np.log10()</code>，而基于其他底数的对数计算，通常可以采用换底公式转换为以10为底的对数（也就是<code>ln</code>）计算：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mi>a</mi></msub><mi>b</mi><mo>=</mo><mfrac><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>10</mn></msub><mi>b</mi></mrow><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>10</mn></msub><mi>a</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>ln</mi><mo>⁡</mo><mi>b</mi></mrow><mrow><mi>ln</mi><mo>⁡</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\log_a b=\frac{\log_{10}b}{\log_{10}a}=\frac{\ln b}{\ln a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.93858em;vertical-align:-.24414em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.057252em"><span style="top:-2.4558600000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.24414em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.513324em;vertical-align:-.5311079999999999em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.982216em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.19444571428571428em"><span style="top:-2.2341314285714287em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.26586857142857145em"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:.19516666666666668em"></span><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.496108em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.19444571428571428em"><span style="top:-2.2341314285714287em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.26586857142857145em"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:.19516666666666668em"></span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.5311079999999999em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8801079999999999em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">n</span></span><span class="mspace mtight" style="margin-right:.19516666666666668em"></span><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">n</span></span><span class="mspace mtight" style="margin-right:.19516666666666668em"></span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.log(np.exp(<span class="number">12</span>))</span><br><span class="line"><span class="number">12.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.log2(<span class="number">12</span>)</span><br><span class="line"><span class="number">3.584962500721156</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.log10(<span class="number">12</span>)/np.log10(<span class="number">2</span>)</span><br><span class="line"><span class="number">3.5849625007211565</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sxys-3"><div class="note blue simple"><p><code>np.sqrt(a)</code><br>函数说明：<br>逐元素计算平方根。要计算任意次方根，可以使用<code>**</code>运算符，如<code>a**(1/2)</code>、<code>a**(1/3)</code>，其等同于调用<code>np.power()</code>函数（或<code>math</code>库中的<code>pow()</code>），如<code>np.power(a,1/2)</code>、<code>np.power(a,1/3)</code></p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sqrt([<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>])</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>])**(<span class="number">1</span>/<span class="number">2</span>)</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>])</span><br></pre></td></tr></table></figure><div class="hide-toggle"><div class="hide-button toggle-title"><i class="fas fa-caret-right fa-fw"></i><span>立方根</span></div><div class="hide-content"><div class="note blue simple"><p><code>np.cbrt(a)</code><br>函数说明：<br>逐元素计算立方根。不建议使用<code>a**(1/3)</code>方式，譬如当<code>a</code>是负数时将返回复数类型，<code>a**(1/5)</code>等也是如此</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([-<span class="number">1</span>,-<span class="number">8</span>,-<span class="number">27</span>])**(<span class="number">1</span>/<span class="number">3</span>) <span class="comment">#之所以返回nan，是因为np.array([-1,-8,-27])是int64整型，无法支持复数运算</span></span><br><span class="line">array([nan, nan, nan])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([-<span class="number">1</span>,-<span class="number">8</span>,-<span class="number">27</span>],dtype=<span class="string">&#x27;complex&#x27;</span>)**(<span class="number">1</span>/<span class="number">3</span>)</span><br><span class="line">array([<span class="number">0.5</span>+<span class="number">0.8660254j</span> , <span class="number">1.</span> +<span class="number">1.73205081j</span>, <span class="number">1.5</span>+<span class="number">2.59807621j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.power(np.array([-<span class="number">1</span>,-<span class="number">8</span>,-<span class="number">27</span>],dtype=<span class="string">&quot;complex&quot;</span>),<span class="number">1</span>/<span class="number">3</span>)</span><br><span class="line">array([<span class="number">0.5</span>+<span class="number">0.8660254j</span> , <span class="number">1.</span> +<span class="number">1.73205081j</span>, <span class="number">1.5</span>+<span class="number">2.59807621j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(-<span class="number">27</span>)**(<span class="number">1</span>/<span class="number">3</span>)</span><br><span class="line">(<span class="number">1.5000000000000004</span>+<span class="number">2.598076211353316j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>-<span class="number">27</span>**(<span class="number">1</span>/<span class="number">3</span>) <span class="comment">#由于**运算符的优先级大于-，所以相当于-(27**(1/3))，因为有-(-a)^&#123;1/3&#125;=a^&#123;1/3&#125;,a&gt;0成立</span></span><br><span class="line">-<span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.cbrt(-<span class="number">27</span>) <span class="comment">#立方根（cube root）</span></span><br><span class="line">-<span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=-<span class="number">27</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.<span class="built_in">pow</span>(<span class="built_in">abs</span>(x),<span class="built_in">float</span>(<span class="number">1</span>)/<span class="number">3</span>) * (<span class="number">1</span>,-<span class="number">1</span>)[x&lt;<span class="number">0</span>] <span class="comment">#参见https://stackoverflow.com/questions/1361740/cubic-root-of-the-negative-number-on-python</span></span><br><span class="line">-<span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.<span class="built_in">pow</span>(-<span class="number">27</span>,<span class="number">1</span>/<span class="number">3</span>) <span class="comment">#参见https://vevurka.github.io/cs/python/cubic_root/</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: math domain error</span><br></pre></td></tr></table></figure></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sxys-4"><div class="note blue simple"><p><code>np.mod(a,b)</code><br>函数说明：<br>逐元素的取模运算</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mod(a,<span class="number">2</span>)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]], dtype=int32)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sxys-5"><div class="note blue simple"><p><code>np.poly1d(c_or_r, r=False, variable='x')</code><br>函数说明：<br>用于创建一个一元多项式函数，有两种模式，一是<code>r</code>为<code>False</code>（默认），此时<code>c_or_r</code>指定多项式的系数，譬如<code>c_or_r=[1,2,3]</code>，创建的多项式函数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><msup><mi>x</mi><mn>1</mn></msup><mo>+</mo><mn>3</mn><msup><mi>x</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">f(x)=1x^2+2x^1+3x^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.897438em;vertical-align:-.08333em"></span><span class="mord">1</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.897438em;vertical-align:-.08333em"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span>，二是<code>r</code>为<code>True</code>，此时<code>c_or_r</code>指定多项式的根，仍以<code>c_or_r=[1,2,3]</code>为例，创建的多项式函数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mn>3</mn><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mo>−</mo><mn>6</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>11</mn><mi>x</mi><mo>−</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">f(x)=(x-1)(x-2)(x-3)= x^3 - 6x^2 + 11x -6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">2</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.897438em;vertical-align:-.08333em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.897438em;vertical-align:-.08333em"></span><span class="mord">6</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.72777em;vertical-align:-.08333em"></span><span class="mord">1</span><span class="mord">1</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">6</span></span></span></span>，实际<code>poly1d</code>是一个类，若返回的类实例记作<code>f=np.poly1d([1,2,3])</code>，可以直接用<code>()</code>调用之（<code>f()</code>），返回多项式的具体值，<code>variable</code>参数指定未知变量字母，控制多项式函数的打印结果，默认为<code>'x'</code>，<code>f</code>有一些属性，<code>r</code>属性返回多项式的根，<code>c</code>属性返回多项式的系数数组，<code>order</code>属性返回多项式的最高次方，<code>f</code>可以用<code>[i]</code>进行索引，获取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">x^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.824664em;vertical-align:0"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.824664em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span>的系数，<code>f</code>还有两个方法，<code>deriv([m])</code>表示求导，可选的参数<code>m</code>表示求几次导，默认求一次导，返回的仍是一个多项式函数，<code>integ([m,k])</code>表示求积分，可选的参数<code>m</code>表示积几次分，<code>k</code>表示积分后的常数项的值</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f=np.poly1d([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(f)</span><br><span class="line">   <span class="number">2</span></span><br><span class="line"><span class="number">1</span> x + <span class="number">2</span> x + <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.r</span><br><span class="line">array([-<span class="number">1.</span>+<span class="number">1.41421356j</span>, -<span class="number">1.</span>-<span class="number">1.41421356j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(_)</span><br><span class="line">array([<span class="number">4.4408921e-16</span>+<span class="number">0.j</span>, <span class="number">4.4408921e-16</span>+<span class="number">0.j</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.c</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f[<span class="number">2</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.deriv()</span><br><span class="line">poly1d([<span class="number">2</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(_)</span><br><span class="line"><span class="number">2</span> x + <span class="number">2</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><style>.tip{width:80%}@media only screen and (max-width:600px){.tip{width:100%}}</style><div class="tip fas fa-quote-left"><p>[1] <a href="https://numpy.org/doc/stable/user/quickstart.html" rel="external nofollow noreferrer" target="_blank">Numpy官方英文文档·用户手册</a><br>[2] <a href="https://www.numpy.org.cn/user/quickstart.html#基础知识" rel="external nofollow noreferrer" target="_blank">Numpy中文网入门教程</a><br>[3] <a href="https://www.runoob.com/numpy/numpy-tutorial.html" rel="external nofollow noreferrer" target="_blank">RUNOOB菜鸟教程 Numpy入门教程</a></p></div><script>var dyrefreshexists=!1,dyencyptdingshiqi=setInterval((function(){"undefined"!=typeof refreshFn_forEncrypt&&(dyrefreshexists=!0,refreshFn_forEncrypt()),dyrefreshexists&&clearInterval(dyencyptdingshiqi)}),300)</script></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Numpy基础教程</h></span></div><div class="post-copyright__type"><span class="post-copyright-info" id="post-copyright-url"><a href="https://muggledy.top/posts/10423/">https://muggledy.top/posts/10423/</a></span><span>&nbsp;&nbsp;</span><span class="cursorpointer" id="post-url-copyer" onclick="copy_post_url()"><i class="fas fa-paste copy-button"></i></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>Muggledy</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-04-21</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-06-24</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener external nofollow noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener external nofollow noreferrer" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div><div class="post-copyright__note"><span class="post-copyright-info"><h>转载或借鉴请注明博客来源噢！</h></span></div></div><script>function copy_post_url(){event.stopPropagation();var e=document.getElementById("post-copyright-url");window.getSelection().selectAllChildren(e),document.execCommand("Copy")}</script><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2024/06/15/tmAyXzJW9H5ZSer.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/social-share.js@1.0.16/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/social-share.js@1.0.16/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-bookmark fa-fw"></i> <span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/43947/" title="基于Selenium+Request+Python线程池批量下载SM.MS个人图
片资源数据..."><img class="cover" src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/asuna1229c.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-22</div><div class="title">SM.MS图片资源下载</div></div></a></div><div><a href="/posts/5311/" title="Python程序中保存的所有数据都是围绕对象这一概念来构建的，对象包括一些基本的
数据类型，如数字、字符串、列表和字典，也可以通过类的形式创建用户自定义的对象..
."><img class="cover" src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/zjandxiong.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-24</div><div class="title">Python基础 - 类型和对象</div></div></a></div><div><a href="/posts/176/" title="介绍python程序结构与控制流，同时为了更好地实现模块化，会将实现指定功能的程
序封装为函数..."><img class="cover" src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/index0.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-27</div><div class="title">Python基础 - 程序结构与函数编程</div></div></a></div><div><a href="/posts/22901/" title="类是创建新对象类型的机制，当解决一个问题的时候，面向对象会把事物抽象成对象的概念
，就是说这个问题里面有哪些对象，然后给对象赋一些属性和方法，然后让每个对象去执行
自己的方法，问题得到解决..."><img class="cover" src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/bingguo.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-01</div><div class="title">Python基础 - 面向对象编程</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><div class="avatar-image"><img class="avatar-img" src="/img/blogavatar.jpg" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224511.gif"' alt="avatar"></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="dogsbody" fallback-src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/avatoricon.png">🐄</g-emoji><span>上班ing...</span></div></div></div><div class="card-info-name is-center"><div class="author-info__name">Muggledy</div><div class="author-info__description">孤筏重洋</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/muggledy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/muggledy" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/img/qrcode_web.archive.org.png" rel="external nofollow noreferrer" target="_blank" title="WeChat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="mailto:zgjsycfndy2015@163.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=3101266674&amp;site=qq&amp;menu=yes" rel="external nofollow noreferrer" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><a href="/note/"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></a><div class="announcement_content">本人的更新是极慢的~<br>Vercel镜像站：<a href="https://vercel.muggledy.top" rel="external nofollow noreferrer" target="_blank">https://vercel.muggledy.top</a><div id="welcome-info"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-number">1.</span> <span class="toc-text">创建数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%A2%E7%8A%B6%E9%87%8D%E5%A1%91"><span class="toc-number">2.</span> <span class="toc-text">形状重塑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="toc-number">3.</span> <span class="toc-text">数组切片和索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E8%BF%AD%E4%BB%A3"><span class="toc-number">4.</span> <span class="toc-text">数组元素迭代</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6"><span class="toc-number">5.</span> <span class="toc-text">广播机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8B%BC%E6%8E%A5%E4%B8%8E%E5%88%86%E5%89%B2"><span class="toc-number">6.</span> <span class="toc-text">数组拼接与分割</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">7.</span> <span class="toc-text">数组增删改查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="toc-number">8.</span> <span class="toc-text">数学运算</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/43947/" title="SM.MS图片资源下载"><img src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/asuna1229c.jpg" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224519.jpg"' alt="SM.MS图片资源下载"></a><div class="content"><a class="title" href="/posts/43947/" title="基于Selenium+Request+Python线程池批量下载SM.MS个人图
片资源数据...">SM.MS图片资源下载</a><time datetime="2023-12-22T00:51:23.000Z" title="发表于 2023-12-22 08:51:23">2023-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/35908/" title="Pytorch入门教程"><img src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/demoX3.webp" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224519.jpg"' alt="Pytorch入门教程"></a><div class="content"><a class="title" href="/posts/35908/" title="首先简要介绍了反向传播的原理，然后以线性回归模型、Softmax多分类模型以及M
LP多层感知器模型为例从头搭建网络并训练，相应地还给出了代码的简洁写法...">Pytorch入门教程</a><time datetime="2021-06-08T01:39:12.000Z" title="发表于 2021-06-08 09:39:12">2021-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22901/" title="Python基础 - 面向对象编程"><img src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/bingguo.webp" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224519.jpg"' alt="Python基础 - 面向对象编程"></a><div class="content"><a class="title" href="/posts/22901/" title="类是创建新对象类型的机制，当解决一个问题的时候，面向对象会把事物抽象成对象的概念
，就是说这个问题里面有哪些对象，然后给对象赋一些属性和方法，然后让每个对象去执行
自己的方法，问题得到解决...">Python基础 - 面向对象编程</a><time datetime="2021-05-01T13:05:41.000Z" title="发表于 2021-05-01 21:05:41">2021-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/176/" title="Python基础 - 程序结构与函数编程"><img src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/index0.webp" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224519.jpg"' alt="Python基础 - 程序结构与函数编程"></a><div class="content"><a class="title" href="/posts/176/" title="介绍python程序结构与控制流，同时为了更好地实现模块化，会将实现指定功能的程
序封装为函数...">Python基础 - 程序结构与函数编程</a><time datetime="2021-04-27T03:45:30.000Z" title="发表于 2021-04-27 11:45:30">2021-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5311/" title="Python基础 - 类型和对象"><img src="https://cdn.statically.io/gh/celestezj/Mirror1ImageHosting/master/compress/zjandxiong.webp" onerror='this.onerror=null,this.src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/img/20210328224519.jpg"' alt="Python基础 - 类型和对象"></a><div class="content"><a class="title" href="/posts/5311/" title="Python程序中保存的所有数据都是围绕对象这一概念来构建的，对象包括一些基本的
数据类型，如数字、字符串、列表和字典，也可以通过类的形式创建用户自定义的对象..
.">Python基础 - 类型和对象</a><time datetime="2021-04-24T12:55:45.000Z" title="发表于 2021-04-24 20:55:45">2021-04-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright"><span>&copy;2021 - 2024</span><span class="onespace">&nbsp;</span><svg style="width:1.5em;height:1.5em" aria-hidden="true"><use xlink:href="#icon-butterfly1"></use></svg><span>By Muggledy</span></div><div class="footer_custom_text"><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/"><img src="/img/Frame-Hexo-blue.svg"></a>&nbsp;&nbsp;<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/"><img src="/img/Theme-Butterfly-brightgreen.svg"></a>&nbsp;&nbsp;<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pages.github.com/"><img src="/img/Hosted-Github-red.svg"></a>&nbsp;&nbsp;<a target="_blank" rel="noopener external nofollow noreferrer" href="https://statically.io/"><img src="/img/CDN-Staticaly-blueviolet.svg"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.statically.io/gh/muggledy/muggledy.github.io/v1.2/js/utils.js"></script><script src="/js/main.js"></script><script defer src="https://cdn.statically.io/gh/muggledy/muggledy.github.io/v1.2/js/tw_cn.js"></script><script src="https://cdn.statically.io/gh/instantpage/instant.page/master/instantpage.min.js" type="module" defer></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.statically.io/gh/celestezj/pangu.js/master/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script defer src="https://cdn.statically.io/gh/muggledy/muggledy.github.io/v6.1/js/search/local-search.js"></script><script src="https://cdn.statically.io/gh/celestezj/pace/master/pace.min.js"></script><script async>var preloader={endLoading:()=>{void 0!==window.is_loading_percentage_timer&&1===window.is_loading_percentage_timer&&(window.is_loading_percentage_timer=0,clearInterval(window.loadingPercentageTimer),document.getElementById("loading-percentage").textContent="99%",document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded"),void 0!==window.clear_sidebar_for_preloading_percentage&&1===window.clear_sidebar_for_preloading_percentage&&(document.getElementById("sidebar-menus").classList.remove("open"),document.getElementById("sidebar-menus").style.visibility="visible",document.body.style.paddingRight="",document.getElementById("menu-mask").setAttribute("style","display:none"),window.clear_sidebar_for_preloading_percentage=0))},initLoading:()=>{if(void 0===window.is_loading_percentage_timer||0===window.is_loading_percentage_timer){window.is_loading_percentage_timer=1,document.body.style.overflow="";var e=document.getElementById("loading-percentage");e.textContent="0%",void 0!==window.loadingPercentageTimer&&clearInterval(window.loadingPercentageTimer),window.loadingPercentageTimer=setInterval((function(){var n=document.querySelector(".pace-progress");if(n){void 0!==window.clear_sidebar_for_preloading_percentage&&0!==window.clear_sidebar_for_preloading_percentage||(document.getElementById("loading-box").classList.remove("loaded"),document.body.style.paddingRight="",document.getElementById("sidebar-menus").classList.remove("open"),document.getElementById("sidebar-menus").style.visibility="hidden",document.getElementById("menu-mask").setAttribute("style","display:none"),window.clear_sidebar_for_preloading_percentage=1);var t=n.getAttribute("data-progress-text");t!==e.textContent&&(e.textContent=t,"100%"===t&&(window.is_loading_percentage_timer=0,clearInterval(window.loadingPercentageTimer),document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded"),document.getElementById("sidebar-menus").classList.remove("open"),document.getElementById("sidebar-menus").style.visibility="visible",document.body.style.paddingRight="",document.getElementById("menu-mask").setAttribute("style","display:none"),window.clear_sidebar_for_preloading_percentage=0))}}),100)}}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),5e3),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><div class="js-pjax"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/katex.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/contrib/copy-tex.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/contrib/copy-tex.min.css"><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div","","katex-wrap")})</script><script>document.getElementsByClassName("mermaid").length&&(window.mermaidJsLoad?mermaid.init():getScript("https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.13.8/mermaid.min.js").then(()=>{window.mermaidJsLoad=!0,mermaid.initialize({theme:"default"}),mermaid.init()}))</script><script>function loadValine(){function e(){new Valine(Object.assign({el:"#vcomment",appId:"QydYkVWb5rbaSOLBJyV7cuLA-MdYXbMMI",appKey:"SQj7LQtIxpmqfQoOUT5y0yq4",placeholder:"快来评论吧~",avatar:"monsterid",meta:"nick,mail,link".split(","),pageSize:"10",lang:"zh-CN",recordIP:!1,serverURLs:"https://qydykvwb.api.lncldglobal.com",emojiCDN:"",emojiMaps:"",enableQQ:!0,path:window.location.pathname,requiredFields:["nick,mail"],visitor:!1,master:"5f452633ebd48518f8778c240d946335,a483c79213701a5644bec62de88f974d".split(","),friends:"34c64a0cb78287b2ae889cda5d9d2a91,574fbd33aa74a09d671f4608af20fd2b,9d4dec3cf85be4ed9bf2d4d783ade681,eb9916875df884c6da5c71c020719966".split(",")},null))}"function"==typeof Valine?e():getScript("https://cdn.statically.io/gh/celestezj/Valine/master/dist/Valine.min.js").then(e)}{function loadOtherComment(){loadValine()}setTimeout(loadValine,0)}</script><script>function addGitalkSource(){const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.statically.io/gh/gitalk/gitalk/master/dist/gitalk.min.css",document.getElementsByTagName("head")[0].appendChild(t)}function loadGitalk(){function t(){new Gitalk(Object.assign({clientID:"05956758b57064d95a57",clientSecret:"3c4ddd74e671e3d79aac8417e708f69ff93b3e28",repo:"muggledy.github.io",owner:"muggledy",admin:["muggledy"],id:"c051106ad023978442736a6734b247cd",language:"zh-CN",perPage:10,distractionFreeMode:!1,pagerDirection:"last",createIssueManually:!1,updateCountCallback:commentCount},null)).render("gitalk-container")}"function"==typeof Gitalk?t():(addGitalkSource(),getScript("https://cdn.statically.io/gh/gitalk/gitalk/master/dist/gitalk.min.js").then(t))}function commentCount(t){let e=document.querySelector("#post-meta .gitalk-comment-count");e&&(e.innerHTML=t)}{function loadOtherComment(){loadGitalk()}loadGitalk()}</script></div><script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.17.0/js/md5.min.js"></script><script>window.addEventListener("load",()=>{const e=(e,t)=>{if(e)return e;return"https://gravatar.loli.net/avatar/"+(md5(t.toLowerCase())+"?d=monsterid")},t=e=>{let t="";if(e.length)for(let a=0;a<e.length;a++){t+="<div class='aside-list-item'>";{const n="src";t+=`<a href='${e[a].url}' class='thumbnail'><img ${n}='${e[a].avatar}' alt='${e[a].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[a].url}'>${e[a].content}</a>\n        <div class='name'><span>${e[a].nick} / </span><time datetime="${e[a].date}">${btf.diffDate(e[a].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let a=document.querySelector("#card-newest-comments .aside-list");a.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(a)},a=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const s=saveToLocal.get("valine-newest-comments");s?t(JSON.parse(s)):(a={method:"GET",headers:{"X-LC-Id":"QydYkVWb5rbaSOLBJyV7cuLA-MdYXbMMI","X-LC-Key":"SQj7LQtIxpmqfQoOUT5y0yq4","Content-Type":"application/json"}},n="https://qydykvwb.api.lncldglobal.com/1.1/classes/Comment?limit=6&order=-createdAt",("undefined"==typeof fetch_v2?fetch(n,a):fetch_v2(n,Object.assign(a,{timeout:1e4}))).then(e=>e.json()).then(a=>{const n=a.results.map((function(t){return{avatar:e(t.QQAvatar,t.mail),content:(a=t.comment,""===a||(a=(a=(a=(a=a.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(a=a.substring(0,150)+"..."),a),nick:t.nick,url:t.url+"#"+t.objectId,date:t.updatedAt};var a}));saveToLocal.set("valine-newest-comments",JSON.stringify(n),5/1440),t(n)}).catch(e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确以及网络是否通畅"}))}var a,n};a(),document.addEventListener("pjax:complete",a)})</script><script src="/js/t_chart.js"></script><script async src="https://cdn.statically.io/gh/celestezj/ImageHosting/v4.5/data/funny_title/funny-title-js.min.js"></script><script async src="https://cdn.statically.io/gh/celestezj/ImageHosting/master/data/font_animal/font_animal.js"></script><script data-pjax src="https://cdn.statically.io/gh/muggledy/muggledy.github.io/v1.2/js/cal_rs.js"></script><script async src="https://at.alicdn.com/t/font_2494703_el3qb7r0dxv.js"></script><script defer data-pjax src="/js/go_cs.js"></script><script async src="https://cdn.statically.io/gh/muggledy/muggledy.github.io/v7.4/js/grayscale.js"></script><div class="aplayer no-destroy" data-id="6609974608" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-volume="0.2"></div><script async src="/js/welcome.js"></script><script defer src="/js/issues.js"></script><script src="https://cdn.statically.io/gh/celestezj/butterfly-plugins/main/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="https://unpkg.com/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["title","#web_bg","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:complete",(function(){void 0!==window.ifExe_addHighlightTool&&(window.ifExe_addHighlightTool=!0),void 0!==window.ifExe_clickFnOfTagHide&&(window.ifExe_clickFnOfTagHide=!0),void 0!==window.ifExe_addTableWrap&&(window.ifExe_addTableWrap=!0),void 0!==window.ifExe_addPhotoFigcaption&&(window.ifExe_addPhotoFigcaption=!0),void 0!==window.ifExe_jqLoadAndRun_jg&&(window.ifExe_jqLoadAndRun_jg=!0),void 0!==window.ifExe_jqLoadAndRun_fb&&(window.ifExe_jqLoadAndRun_fb=!0),window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:send",(function(){if("object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//npm.elemecdn.com/penndu@1.0.0/bsz.js"></script><link rel="stylesheet" href="https://cdn.statically.io/gh/celestezj/Aplayer/master/dist/APlayer.min.css" media="print" onload='this.media="all"'><script async src="https://cdn.statically.io/gh/celestezj/Aplayer/master/dist/APlayer.min.js"></script><script async src="/js/Meting.js"></script></div><script>function dogo(){var o,s="/posts/43947/,/posts/10423/,/posts/5311/,/posts/176/,/posts/22901/,/posts/35908/,/posts/65257/";for(s=s.split(",");s[o=Math.floor(Math.random()*s.length)]==getRelativeUrl(););pjax.loadUrl(s[o])}</script><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.statically.io/gh/celestezj/Butterfly-card-history/v1.1/baiduhistory/js/main.min.js"></script></body><script>document.addEventListener("touchmove",(function(e){e.preventDefault()}),!1)</script><script async data-pjax>IsPC()&&btf.isJqueryLoad(image_preview_wrapper),btf.isJqueryLoad(dybubblefn)</script></html>