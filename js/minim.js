"use strict";var dyrightshowmini,mini_note_wrapper,exec_mini_note_wrapper,start_mini_note,close_mini_note,get_mini_note_status,change_mini_note_mode,dymininotemodelocalval,dymininotemode,dyifexecmininotelocalval,dyifexecmininote;IsPC()&&(dyrightshowmini=function(e){var n;3==e.which&&(n=e.clientX,e=e.clientY,$(".dyminimenu").show().css({left:n,top:e}))},mini_note_wrapper=function(){function a(){var e=3;autosave_timer=setInterval(function(){e<=0&&(e=3,localStorage.setItem(wll_mask_currpage_name,$(".dyminibox").html())),$(".mini_note_timer").find("span").text(e),e--},1e3)}document.getElementsByClassName("dyminibox")[0].style.display="",$(function(){var e=localStorage.getItem(wll_mask_currpage_name);e?($(".dyminibox").html(e),null==autosave_timer&&a()):$(".dyminibox").html(""),document.oncontextmenu=function(){return!1},document.addEventListener("mousedown",dyrightshowmini,!1),$(document).click(function(){$(".dyminimenu").hide()})}),wll_menu=function(e){var n,i,o,t,l,m;1==e&&(n=Math.floor(30*Math.random()),i=new Array("pulse","bounce","tada","swing","wobble","flip","flipInX","bounceIn","bounceInUp","bounceInDown","fadeIn","fadeInUp","fadeInDown","fadeInLeft","fadeInRight","fadeInUpBig","fadeInDownBig","fadeInLeftBig","fadeInRightBig","rotateIn","rotateInUpLeft","rotateInDownLeft","rotateInUpRight","rotateInDownRight","swing","rollIn","bounce","tada","swing","wobble"),o=$(".dyminimenu").offset().left,"absolute"==dymininotemode?(t=document.body.clientWidth)<o+294&&(o=t-294):"fixed"==dymininotemode&&(o-=$(window).scrollLeft(),(l=$(window).width())<o+294&&(o=l-294)),t=$(".dyminimenu").offset().top,"absolute"==dymininotemode?(l=document.body.clientHeight)<t+310&&(t=l-310):"fixed"==dymininotemode&&(t-=$(window).scrollTop(),(m=$(window).height())<t+310&&(t=m-310)),m=Math.floor(3*Math.random())+1,$(".dyminibox").append("<div class='b_list animated "+i[n]+"' style='left:"+o+"px;top:"+t+"px;'><img src='/img/"+m+".png' alt='便签' width='294' height='310'><div class='b_content' contenteditable='true'></div><p class='mini_note_timer'><span>3</span>秒后自动保存</p></div>"),null==autosave_timer&&a()),2==e&&($(".b_list").removeClass("animated rollIn").addClass("animated bounceOutRight").fadeOut(1e3),localStorage.removeItem(wll_mask_currpage_name),$(".dyminibox").html(""),null!=autosave_timer&&(clearInterval(autosave_timer),autosave_timer=null))}},exec_mini_note_wrapper=function(){"undefined"!=typeof btf?btf.isJqueryLoad(mini_note_wrapper):window.attachEvent?window.attachEvent("onload",function(){btf.isJqueryLoad(mini_note_wrapper)}):window.addEventListener("load",function(){btf.isJqueryLoad(mini_note_wrapper)},!0)},start_mini_note=function(){dyifexecmininote=1,localStorage.setItem("dyifexecmininotelocalval",dyifexecmininote),exec_mini_note_wrapper(),console.log("Mini Note功能已打开")},close_mini_note=function(){var e;dyifexecmininote=0,localStorage.setItem("dyifexecmininotelocalval",dyifexecmininote),document.getElementsByClassName("dyminibox")[0].style.display="none",void 0===e?e=null:null==e||(clearInterval(e),e=null),null!=wll_menu&&(wll_menu=null),document.removeEventListener("mousedown",dyrightshowmini,!1),window.document.oncontextmenu=function(){return!0},console.log("Mini Note功能已关闭")},get_mini_note_status=function(){console.log("欢迎使用（电脑端·体验版）Mini Note，其有两种布局模式，各有千秋（即各有各的缺点，主要是absolute布局下，当页面内有很多打开的折叠部件时，折叠后会导致Mini Note拉伸页面可见区域，很难看，所以又增加了fixed布局）！"),dyifexecmininote?console.log("Mini Note功能已打开，你可以执行close_mini_note()关闭（不会清空数据）"):console.log("Mini Note功能已关闭，你可以执行start_mini_note()打开"),console.log("当前为"+dymininotemode+"布局，你可以执行change_mini_note_mode()切换布局，但是千万注意，在Mini Note功能已打开的情况下，一旦切换，本页面数据将立即被清空！其他页面数据虽然还在，但是由于布局改变，Mini Note可能无法正常显示，因此你可能还需要手动清空其他页面！")},change_mini_note_mode=function(){"absolute"==dymininotemode?(console.log(dymininotemode+"->fixed"),dymininotemode="fixed"):"fixed"==dymininotemode&&(console.log(dymininotemode+"->absolute"),dymininotemode="absolute"),document.getElementsByClassName("dyminibox")[0].style.position=dymininotemode,localStorage.setItem("dymininotemodelocalval",dymininotemode),null!=wll_menu&&(console.log("注意本页面Mini Note（本地）数据已被清空！"),wll_menu(2))},dymininotemodelocalval=localStorage.getItem("dymininotemodelocalval"),dymininotemode=null!=dymininotemodelocalval?dymininotemodelocalval:"absolute",document.getElementsByClassName("dyminibox")[0].style.position=dymininotemode,dyifexecmininotelocalval=localStorage.getItem("dyifexecmininotelocalval"),dyifexecmininote=null!=dyifexecmininotelocalval?Boolean(parseInt(dyifexecmininotelocalval)):0);